(()=>{"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e(this,t),a(this,"_ptr",void 0),a(this,"_size",void 0),a(this,"_capacity",void 0),i<1?(this._ptr=[],this._capacity=0,this._size=0):(this._ptr=new Array(i),this._capacity=i,this._size=0)}return i(t,[{key:"at",value:function(e){return this._ptr[e]}},{key:"set",value:function(e,t){this._ptr[e]=t}},{key:"get",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Array,i=e;i<this._size;i++)t.push(this._ptr[i]);return t}},{key:"pushBack",value:function(e){this._size>=this._capacity&&this.prepareCapacity(0==this._capacity?t.s_defaultSize:2*this._capacity),this._ptr[this._size++]=e}},{key:"clear",value:function(){this._ptr.length=0,this._size=0}},{key:"getSize",value:function(){return this._size}},{key:"assign",value:function(e,t){this._size<e&&this.prepareCapacity(e);for(var i=0;i<e;i++)this._ptr[i]=t;this._size=e}},{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.updateSize(e,t,!0)}},{key:"updateSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._size<e)if(this.prepareCapacity(e),i)for(var a=this._size;a<e;a++)this._ptr[a]="function"==typeof t?JSON.parse(JSON.stringify(new t)):t;else for(var r=this._size;r<e;r++)this._ptr[r]=t;else{var n=this._size-e;this._ptr.splice(this._size-n,n)}this._size=e}},{key:"insert",value:function(e,t,i){var a=e._index,r=t._index,n=i._index,o=n-r;this.prepareCapacity(this._size+o);var s=this._size-a;if(s>0)for(var c=0;c<s;c++)this._ptr.splice(a+c,0,null);for(var l=r;l<n;l++,a++)this._ptr[a]=t._vector._ptr[l];this._size=this._size+o}},{key:"remove",value:function(e){return!(e<0||this._size<=e)&&(this._ptr.splice(e,1),--this._size,!0)}},{key:"erase",value:function(e){var t=e._index;return t<0||this._size<=t?e:(this._ptr.splice(t,1),--this._size,new o(this,t))}},{key:"prepareCapacity",value:function(e){e>this._capacity&&(0==this._capacity?(this._ptr=new Array(e),this._capacity=e):(this._ptr.length=e,this._capacity=e))}},{key:"begin",value:function(){return 0==this._size?this.end():new o(this,0)}},{key:"end",value:function(){return new o(this,this._size)}},{key:"getOffset",value:function(e){var i=new t;return i._ptr=this.get(e),i._size=this.get(e).length,i._capacity=this.get(e).length,i}}]),t}();a(r,"s_defaultSize",10);var n,o=function(){function t(i,r){e(this,t),a(this,"_index",void 0),a(this,"_vector",void 0),this._vector=null!=i?i:null,this._index=null!=r?r:0}return i(t,[{key:"set",value:function(e){return this._index=e._index,this._vector=e._vector,this}},{key:"preIncrement",value:function(){return++this._index,this}},{key:"preDecrement",value:function(){return--this._index,this}},{key:"increment",value:function(){return new t(this._vector,this._index++)}},{key:"decrement",value:function(){return new t(this._vector,this._index--)}},{key:"ptr",value:function(){return this._vector._ptr[this._index]}},{key:"substitution",value:function(e){return this._index=e._index,this._vector=e._vector,this}},{key:"notEqual",value:function(e){return this._index!=e._index||this._vector!=e._vector}}]),t}();function s(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}!function(e){e.csmVector=r,e.iterator=o}(n||(n={}));var c,l=function(){function e(t){var i,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(a="s")in(i=this)?Object.defineProperty(i,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[a]=r,this.s=t}var t,i,a;return t=e,(i=[{key:"append",value:function(e,t){return this.s+=void 0!==t?e.substr(0,t):e,this}},{key:"expansion",value:function(e,t){for(var i=0;i<e;i++)this.append(t);return this}},{key:"getBytes",value:function(){return encodeURIComponent(this.s).replace(/%../g,"x").length}},{key:"getLength",value:function(){return this.s.length}},{key:"isLess",value:function(e){return this.s<e.s}},{key:"isGreat",value:function(e){return this.s>e.s}},{key:"isEqual",value:function(e){return this.s==e}},{key:"isEmpty",value:function(){return 0==this.s.length}}])&&s(t.prototype,i),a&&s(t,a),e}();function u(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}!function(e){e.csmString=l}(c||(c={}));var h,d=function(){function e(t){var i,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(a="_id")in(i=this)?Object.defineProperty(i,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[a]=r,this._id="string"!=typeof t?t:new l(t)}var t,i,a;return t=e,(i=[{key:"getString",value:function(){return this._id}},{key:"isEqual",value:function(t){return"string"==typeof t?this._id.isEqual(t):f(t,l)?this._id.isEqual(t.s):!!f(t,e)&&this._id.isEqual(t._id.s)}},{key:"isNotEqual",value:function(t){return"string"==typeof t?!this._id.isEqual(t):f(t,l)?!this._id.isEqual(t.s):!!f(t,e)&&!this._id.isEqual(t._id.s)}}])&&u(t.prototype,i),a&&u(t,a),e}();function g(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}!function(e){e.CubismId=d}(h||(h={}));var b,m=function(){function e(){var t,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=void 0,(i="_ids")in(t=this)?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,this._ids=new r}var t,i,a;return t=e,(i=[{key:"release",value:function(){for(var e=0;e<this._ids.getSize();++e)this._ids.set(e,void 0);this._ids=null}},{key:"registerIds",value:function(e){for(var t=0;t<e.length;t++)this.registerId(e[t])}},{key:"registerId",value:function(e){var t=null;return"string"!=typeof e?this.registerId(e.s):(null!=(t=this.findId(e))||(t=new d(e),this._ids.pushBack(t)),t)}},{key:"getId",value:function(e){return this.registerId(e)}},{key:"isExist",value:function(e){return"string"==typeof e?null!=this.findId(e):this.isExist(e.s)}},{key:"findId",value:function(e){for(var t=0;t<this._ids.getSize();++t)if(this._ids.at(t).getString().isEqual(e))return this._ids.at(t);return null}}])&&g(t.prototype,i),a&&g(t,a),e}();function _(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}!function(e){e.CubismIdManager=m}(b||(b={}));var v,p=function(){function e(){var t,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=void 0,(i="_tr")in(t=this)?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,this._tr=new Float32Array(16),this.loadIdentity()}var t,i,a;return t=e,a=[{key:"multiply",value:function(e,t,i){for(var a=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r=0;r<4;++r)for(var n=0;n<4;++n)for(var o=0;o<4;++o)a[n+4*r]+=e[o+4*r]*t[n+4*o];for(var s=0;s<16;++s)i[s]=a[s]}}],(i=[{key:"loadIdentity",value:function(){var e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}},{key:"setMatrix",value:function(e){for(var t=0;t<16;++t)this._tr[t]=e[t]}},{key:"getArray",value:function(){return this._tr}},{key:"getScaleX",value:function(){return this._tr[0]}},{key:"getScaleY",value:function(){return this._tr[5]}},{key:"getTranslateX",value:function(){return this._tr[12]}},{key:"getTranslateY",value:function(){return this._tr[13]}},{key:"transformX",value:function(e){return this._tr[0]*e+this._tr[12]}},{key:"transformY",value:function(e){return this._tr[5]*e+this._tr[13]}},{key:"invertTransformX",value:function(e){return(e-this._tr[12])/this._tr[0]}},{key:"invertTransformY",value:function(e){return(e-this._tr[13])/this._tr[5]}},{key:"translateRelative",value:function(t,i){var a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1]);e.multiply(a,this._tr,this._tr)}},{key:"translate",value:function(e,t){this._tr[12]=e,this._tr[13]=t}},{key:"translateX",value:function(e){this._tr[12]=e}},{key:"translateY",value:function(e){this._tr[13]=e}},{key:"scaleRelative",value:function(t,i){var a=new Float32Array([t,0,0,0,0,i,0,0,0,0,1,0,0,0,0,1]);e.multiply(a,this._tr,this._tr)}},{key:"scale",value:function(e,t){this._tr[0]=e,this._tr[5]=t}},{key:"multiplyByMatrix",value:function(t){e.multiply(t.getArray(),this._tr,this._tr)}},{key:"clone",value:function(){for(var t=new e,i=0;i<this._tr.length;i++)t._tr[i]=this._tr[i];return t}}])&&_(t.prototype,i),a&&_(t,a),e}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismMatrix44=p}(v||(v={}));var S,A,C=function(){function e(){y(this,e),w(this,"_mvpMatrix4x4",void 0),w(this,"_modelColor",void 0),w(this,"_isCulling",void 0),w(this,"_isPremultipliedAlpha",void 0),w(this,"_anisotropy",void 0),w(this,"_model",void 0),w(this,"_useHighPrecisionMask",void 0),this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._model=null,this._modelColor=new M,this._useHighPrecisionMask=!1,this._mvpMatrix4x4=new p,this._mvpMatrix4x4.loadIdentity()}var t,i,a;return t=e,a=[{key:"create",value:function(){return null}},{key:"delete",value:function(e){}}],(i=[{key:"initialize",value:function(e){this._model=e}},{key:"drawModel",value:function(){null!=this.getModel()&&(this.saveProfile(),this.doDrawModel(),this.restoreProfile())}},{key:"setMvpMatrix",value:function(e){this._mvpMatrix4x4.setMatrix(e.getArray())}},{key:"getMvpMatrix",value:function(){return this._mvpMatrix4x4}},{key:"setModelColor",value:function(e,t,i,a){e<0?e=0:e>1&&(e=1),t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),a<0?a=0:a>1&&(a=1),this._modelColor.R=e,this._modelColor.G=t,this._modelColor.B=i,this._modelColor.A=a}},{key:"getModelColor",value:function(){return JSON.parse(JSON.stringify(this._modelColor))}},{key:"setIsPremultipliedAlpha",value:function(e){this._isPremultipliedAlpha=e}},{key:"isPremultipliedAlpha",value:function(){return this._isPremultipliedAlpha}},{key:"setIsCulling",value:function(e){this._isCulling=e}},{key:"isCulling",value:function(){return this._isCulling}},{key:"setAnisotropy",value:function(e){this._anisotropy=e}},{key:"getAnisotropy",value:function(){return this._anisotropy}},{key:"getModel",value:function(){return this._model}},{key:"useHighPrecisionMask",value:function(e){this._useHighPrecisionMask=e}},{key:"isUsingHighPrecisionMask",value:function(){return this._useHighPrecisionMask}}])&&k(t.prototype,i),a&&k(t,a),e}();w(C,"staticRelease",void 0),(A=S||(S={}))[A.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",A[A.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",A[A.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative";var x,M=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;y(this,e),w(this,"R",void 0),w(this,"G",void 0),w(this,"B",void 0),w(this,"A",void 0),this.R=t,this.G=i,this.B=a,this.A=r};!function(e){e.CubismBlendMode=S,e.CubismRenderer=C,e.CubismTextureColor=M}(x||(x={}));function P(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var B,j,I,E,R=function(e,t,i){!function(e,t,i){D.print(e,"[CSM]"+t,i)}(e,t+"\n",i)},V=function(e){console.assert(e)};B=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];R(xe.LogLevel_Debug,"[D]"+e,i)},j=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];R(xe.LogLevel_Info,"[I]"+e,i)},I=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];R(xe.LogLevel_Warning,"[W]"+e,i)},E=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];R(xe.LogLevel_Error,"[E]"+e,i)};var F,D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,a;return t=e,a=[{key:"print",value:function(e,t,i){if(!(e<Pe.getLoggingLevel())){var a=Pe.coreLogFunction;a&&a(t.replace(/\{(\d+)\}/g,(function(e,t){return i[t]})))}}},{key:"dumpBytes",value:function(e,t,i){for(var a=0;a<i;a++)a%16==0&&a>0?this.print(e,"\n"):a%8==0&&a>0&&this.print(e,"  "),this.print(e,"{0} ",[255&t[a]]);this.print(e,"\n")}}],(i=null)&&P(t.prototype,i),a&&P(t,a),e}();function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function O(e,t,i){return t&&L(e.prototype,t),i&&L(e,i),e}function z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismDebug=D}(F||(F={}));var G=function e(t,i){T(this,e),z(this,"first",void 0),z(this,"second",void 0),this.first=null==t?null:t,this.second=null==i?null:i},N=function(){function e(t){T(this,e),z(this,"_keyValues",void 0),z(this,"_dummyValue",void 0),z(this,"_size",void 0),null!=t?t<1?(this._keyValues=[],this._dummyValue=null,this._size=0):(this._keyValues=new Array(t),this._size=t):(this._keyValues=[],this._dummyValue=null,this._size=0)}return O(e,[{key:"release",value:function(){this.clear()}},{key:"appendKey",value:function(e){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new G(e),this._size+=1}},{key:"getValue",value:function(e){for(var t=-1,i=0;i<this._size;i++)if(this._keyValues[i].first==e){t=i;break}return t>=0?this._keyValues[t].second:(this.appendKey(e),this._keyValues[this._size-1].second)}},{key:"setValue",value:function(e,t){for(var i=-1,a=0;a<this._size;a++)if(this._keyValues[a].first==e){i=a;break}i>=0?this._keyValues[i].second=t:(this.appendKey(e),this._keyValues[this._size-1].second=t)}},{key:"isExist",value:function(e){for(var t=0;t<this._size;t++)if(this._keyValues[t].first==e)return!0;return!1}},{key:"clear",value:function(){this._keyValues=void 0,this._keyValues=null,this._keyValues=[],this._size=0}},{key:"getSize",value:function(){return this._size}},{key:"prepareCapacity",value:function(t,i){t>this._keyValues.length&&(0==this._keyValues.length?(!i&&t<e.DefaultSize&&(t=e.DefaultSize),this._keyValues.length=t):(!i&&t<2*this._keyValues.length&&(t=2*this._keyValues.length),this._keyValues.length=t))}},{key:"begin",value:function(){return new q(this,0)}},{key:"end",value:function(){return new q(this,this._size)}},{key:"erase",value:function(e){var t=e._index;return t<0||this._size<=t?e:(this._keyValues.splice(t,1),--this._size,new q(this,t))}},{key:"dumpAsInt",value:function(){for(var e=0;e<this._size;e++)B("{0} ,",this._keyValues[e]),B("\n")}}]),e}();z(N,"DefaultSize",10);var U,q=function(){function e(t,i){T(this,e),z(this,"_index",void 0),z(this,"_map",void 0),this._map=null!=t?t:new N,this._index=null!=i?i:0}return O(e,[{key:"set",value:function(e){return this._index=e._index,this._map=e._map,this}},{key:"preIncrement",value:function(){return++this._index,this}},{key:"preDecrement",value:function(){return--this._index,this}},{key:"increment",value:function(){return new e(this._map,this._index++)}},{key:"decrement",value:function(){var t=new e(this._map,this._index);return this._map=t._map,this._index=t._index,this}},{key:"ptr",value:function(){return this._map._keyValues[this._index]}},{key:"notEqual",value:function(e){return this._index!=e._index||this._map!=e._map}}]),e}();function Z(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function X(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}!function(e){e.csmMap=N,e.csmPair=G,e.iterator=q}(U||(U={}));var Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,a;return t=e,a=[{key:"parseJsonObject",value:function(t,i){return Object.keys(t).forEach((function(a){if("boolean"==typeof t[a]){var r=Boolean(t[a]);i.put(a,new le(r))}else if("string"==typeof t[a]){var n=String(t[a]);i.put(a,new fe(n))}else if("number"==typeof t[a]){var o=Number(t[a]);i.put(a,new ce(o))}else X(t[a],Array)?i.put(a,e.parseJsonArray(t[a])):X(t[a],Object)?i.put(a,e.parseJsonObject(t[a],new be)):null==t[a]?i.put(a,new de):i.put(a,t[a])})),i}},{key:"parseJsonArray",value:function(e){var t=this,i=new ge;return Object.keys(e).forEach((function(a){if("number"==typeof Number(a))if("boolean"==typeof e[a]){var r=Boolean(e[a]);i.add(new le(r))}else if("string"==typeof e[a]){var n=String(e[a]);i.add(new fe(n))}else if("number"==typeof e[a]){var o=Number(e[a]);i.add(new ce(o))}else X(e[a],Array)?i.add(t.parseJsonArray(e[a])):X(e[a],Object)?i.add(t.parseJsonObject(e[a],new be)):null==e[a]?i.add(new de):i.add(e[a]);else if(X(e[a],Array))i.add(t.parseJsonArray(e[a]));else if(X(e[a],Object))i.add(t.parseJsonObject(e[a],new be));else if(null==e[a])i.add(new de);else for(var s=Array(e[a]),c=0;c<s.length;c++)i.add(s[c])})),i}}],(i=null)&&Z(t.prototype,i),a&&Z(t,a),e}();function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function J(e,t,i){return t&&K(e.prototype,t),i&&K(e,i),e}function Q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}function te(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function ie(e,t){return!t||"object"!=((i=t)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)&&"function"!=typeof t?W(e):t;var i}function ae(e,t){return ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ae(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=$(e);if(t){var r=$(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return ie(this,i)}}var ne="Error: type mismatch",oe=function(){function e(){H(this,e),Q(this,"_stringBuffer",void 0)}return J(e,[{key:"getRawString",value:function(e,t){return this.getString(e,t)}},{key:"toInt",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}},{key:"toFloat",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}},{key:"toBoolean",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"getSize",value:function(){return 0}},{key:"getArray",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}},{key:"getVector",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r}},{key:"getMap",value:function(e){return e}},{key:"getValueByIndex",value:function(t){return e.errorValue.setErrorNotForClientCall(ne)}},{key:"getValueByString",value:function(t){return e.nullValue.setErrorNotForClientCall(ne)}},{key:"getKeys",value:function(){return e.s_dummyKeys}},{key:"isError",value:function(){return!1}},{key:"isNull",value:function(){return!1}},{key:"isBool",value:function(){return!1}},{key:"isFloat",value:function(){return!1}},{key:"isString",value:function(){return!1}},{key:"isArray",value:function(){return!1}},{key:"isMap",value:function(){return!1}},{key:"equals",value:function(e){return!1}},{key:"isStatic",value:function(){return!1}},{key:"setErrorNotForClientCall",value:function(e){return he.errorValue}}],[{key:"staticInitializeNotForClientCall",value:function(){le.trueValue=new le(!0),le.falseValue=new le(!1),e.errorValue=new he("ERROR",!0),e.nullValue=new de,e.s_dummyKeys=new r}},{key:"staticReleaseNotForClientCall",value:function(){le.trueValue=null,le.falseValue=null,e.errorValue=null,e.nullValue=null,e.s_dummyKeys=null}}]),e}();Q(oe,"s_dummyKeys",void 0),Q(oe,"errorValue",void 0),Q(oe,"nullValue",void 0);var se=function(){function e(t,i){H(this,e),Q(this,"_parseCallback",Y.parseJsonObject),Q(this,"_error",void 0),Q(this,"_lineCount",void 0),Q(this,"_root",void 0),this._error=null,this._lineCount=0,this._root=null,null!=t&&this.parseBytes(t,i,this._parseCallback)}return J(e,[{key:"getRoot",value:function(){return this._root}},{key:"parseBytes",value:function(t,i,a){var r=new Array(1),n=e.arrayBufferToString(t);if(this._root=null==a?this.parseValue(n,i,0,r):a(JSON.parse(n),new be),this._error){var o;return o="Json parse error : @line "+(this._lineCount+1)+"\n",this._root=new fe(o),j("{0}",this._root.getRawString()),!1}return null!=this._root||(this._root=new he(new l(this._error),!1),!1)}},{key:"getParseError",value:function(){return this._error}},{key:"checkEndOfFile",value:function(){return this._root.getArray()[1].equals("EOF")}},{key:"parseValue",value:function(e,t,i,a){if(this._error)return null;for(var r,n=null,o=i;o<t;o++){switch(e[o]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":var s=new Array(1);return r=pe(e.slice(o),s),a[0]=e.indexOf(s[0]),new ce(r);case'"':return new fe(this.parseString(e,t,o+1,a));case"[":return n=this.parseArray(e,t,o+1,a);case"{":return n=this.parseObject(e,t,o+1,a);case"n":return o+3<t?(n=new de,a[0]=o+4):this._error="parse null",n;case"t":return o+3<t?(n=le.trueValue,a[0]=o+4):this._error="parse true",n;case"f":return o+4<t?(n=le.falseValue,a[0]=o+5):this._error="illegal ',' position",n;case",":return this._error="illegal ',' position",null;case"]":return a[0]=o,null;case"\n":this._lineCount++}}return this._error="illegal end of value",null}},{key:"parseString",value:function(e,t,i,a){if(this._error)return null;for(var r=i,n=new l(""),o=i;r<t;r++)switch(e[r]){case'"':return a[0]=r+1,n.append(e.slice(o),r-o),n.s;case"//":if(++r-1>o&&n.append(e.slice(o),r-o),o=r+1,r<t)switch(e[r]){case"\\":n.expansion(1,"\\");break;case'"':n.expansion(1,'"');break;case"/":n.expansion(1,"/");break;case"b":n.expansion(1,"\b");break;case"f":n.expansion(1,"\f");break;case"n":n.expansion(1,"\n");break;case"r":n.expansion(1,"\r");break;case"t":n.expansion(1,"\t");break;case"u":this._error="parse string/unicord escape not supported"}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null}},{key:"parseObject",value:function(e,t,i,a){if(this._error)return null;for(var r=new be,n="",o=i,s=Array(1),c=!1;o<t;o++){e:for(;o<t;o++)switch(e[o]){case'"':if(n=this.parseString(e,t,o+1,s),this._error)return null;o=s[0],c=!0;break e;case"}":return a[0]=o+1,r;case":":this._error="illegal ':' position";break;case"\n":this._lineCount++}if(!c)return this._error="key not found",null;c=!1;e:for(;o<t;o++)switch(e[o]){case":":c=!0,o++;break e;case"}":this._error="illegal '}' position";break;case"\n":this._lineCount++}if(!c)return this._error="':' not found",null;var l=this.parseValue(e,t,o,s);if(this._error)return null;o=s[0],r.put(n,l);e:for(;o<t;o++)switch(e[o]){case",":break e;case"}":return a[0]=o+1,r;case"\n":this._lineCount++}}return this._error="illegal end of perseObject",null}},{key:"parseArray",value:function(e,t,i,a){if(this._error)return null;for(var r=new ge,n=i,o=new Array(1);n<t;n++){var s=this.parseValue(e,t,n,o);if(this._error)return null;n=o[0],s&&r.add(s);e:for(;n<t;n++)switch(e[n]){case",":break e;case"]":return a[0]=n+1,r;case"\n":++this._lineCount}}return r=void 0,this._error="illegal end of parseObject",null}}],[{key:"create",value:function(t,i){var a=new e;return a.parseBytes(t,i,a._parseCallback)?a:(e.delete(a),null)}},{key:"delete",value:function(e){null}},{key:"arrayBufferToString",value:function(e){for(var t=new Uint8Array(e),i="",a=0,r=t.length;a<r;++a)i+="%"+this.pad(t[a].toString(16));return i=decodeURIComponent(i)}},{key:"pad",value:function(e){return e.length<2?"0"+e:e}}]),e}(),ce=function(e){ee(i,e);var t=re(i);function i(e){var a;return H(this,i),Q(W(a=t.call(this)),"_value",void 0),a._value=e,a}return J(i,[{key:"isFloat",value:function(){return!0}},{key:"getString",value:function(e,t){return this._value=parseFloat("\0"),this._stringBuffer="\0",this._stringBuffer}},{key:"toInt",value:function(){return parseInt(this._value.toString())}},{key:"toFloat",value:function(){return this._value}},{key:"equals",value:function(e){return"number"==typeof e&&(!Math.round(e)&&e==this._value)}}]),i}(oe),le=function(e){ee(i,e);var t=re(i);function i(e){var a;return H(this,i),Q(W(a=t.call(this)),"_boolValue",void 0),a._boolValue=e,a}return J(i,[{key:"isBool",value:function(){return!0}},{key:"toBoolean",value:function(){return this._boolValue}},{key:"getString",value:function(e,t){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer}},{key:"equals",value:function(e){return"boolean"==typeof e&&e==this._boolValue}},{key:"isStatic",value:function(){return!0}}]),i}(oe);Q(le,"trueValue",void 0),Q(le,"falseValue",void 0);var ue,fe=function(e){ee(i,e);var t=re(i);function i(e){var a;return H(this,i),a=t.call(this),"string"==typeof e&&(a._stringBuffer=e),te(e,l)&&(a._stringBuffer=e.s),a}return J(i,[{key:"isString",value:function(){return!0}},{key:"getString",value:function(e,t){return this._stringBuffer}},{key:"equals",value:function(e){return"string"==typeof e?this._stringBuffer==e:!!te(e,l)&&this._stringBuffer==e.s}}]),i}(oe),he=function(e){ee(i,e);var t=re(i);function i(e,a){var r;return H(this,i),Q(W(r=t.call(this,e)),"_isStatic",void 0),r._isStatic=a,ie(r)}return J(i,[{key:"isStatic",value:function(){return this._isStatic}},{key:"setErrorNotForClientCall",value:function(e){return this._stringBuffer=e,this}},{key:"isError",value:function(){return!0}}]),i}(fe),de=function(e){ee(i,e);var t=re(i);function i(){var e;return H(this,i),(e=t.call(this))._stringBuffer="NullValue",e}return J(i,[{key:"isNull",value:function(){return!0}},{key:"getString",value:function(e,t){return this._stringBuffer}},{key:"isStatic",value:function(){return!0}},{key:"setErrorNotForClientCall",value:function(e){return this._stringBuffer=e,he.nullValue}}]),i}(oe),ge=function(e){ee(i,e);var t=re(i);function i(){var e;return H(this,i),Q(W(e=t.call(this)),"_array",void 0),e._array=new r,e}return J(i,[{key:"release",value:function(){for(var e=this._array.begin();e.notEqual(this._array.end());e.preIncrement()){var t=e.ptr();t&&!t.isStatic()&&(t=void 0,t=null)}}},{key:"isArray",value:function(){return!0}},{key:"getValueByIndex",value:function(e){if(e<0||this._array.getSize()<=e)return oe.errorValue.setErrorNotForClientCall("Error: index out of bounds");var t=this._array.at(e);return null==t?oe.nullValue:t}},{key:"getValueByString",value:function(e){return oe.errorValue.setErrorNotForClientCall(ne)}},{key:"getString",value:function(e,t){for(var i=t+"[\n",a=this._array.begin();a.notEqual(this._array.end());a.increment()){var r=a.ptr();this._stringBuffer+=t+""+r.getString(t+" ")+"\n"}return this._stringBuffer=i+t+"]\n",this._stringBuffer}},{key:"add",value:function(e){this._array.pushBack(e)}},{key:"getVector",value:function(){return this._array}},{key:"getSize",value:function(){return this._array.getSize()}}]),i}(oe),be=function(e){ee(i,e);var t=re(i);function i(){var e;return H(this,i),Q(W(e=t.call(this)),"_map",void 0),Q(W(e),"_keys",void 0),e._map=new N,e}return J(i,[{key:"release",value:function(){for(var e=this._map.begin();e.notEqual(this._map.end());){var t=e.ptr().second;t&&!t.isStatic()&&(t=void 0,t=null),e.preIncrement()}}},{key:"isMap",value:function(){return!0}},{key:"getValueByString",value:function(e){if(te(e,l)){var t=this._map.getValue(e.s);return null==t?oe.nullValue:t}for(var i=this._map.begin();i.notEqual(this._map.end());i.preIncrement())if(i.ptr().first==e)return null==i.ptr().second?oe.nullValue:i.ptr().second;return oe.nullValue}},{key:"getValueByIndex",value:function(e){return oe.errorValue.setErrorNotForClientCall(ne)}},{key:"getString",value:function(e,t){this._stringBuffer=t+"{\n";for(var i=this._map.begin();i.notEqual(this._map.end());){var a=i.ptr().first,r=i.ptr().second;this._stringBuffer+=t+" "+a+" : "+r.getString(t+"   ")+" \n",i.preIncrement()}return this._stringBuffer+=t+"}\n",this._stringBuffer}},{key:"getMap",value:function(e){return this._map}},{key:"put",value:function(e,t){this._map.setValue(e,t)}},{key:"getKeys",value:function(){if(!this._keys){this._keys=new r;for(var e=this._map.begin();e.notEqual(this._map.end());){var t=e.ptr().first;this._keys.pushBack(t),e.preIncrement()}}return this._keys}},{key:"getSize",value:function(){return this._keys.getSize()}}]),i}(oe);function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ve(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function pe(e,t){for(var i=0,a=1;;a++){var r=e.slice(a-1,a);if("e"!=r&&"-"!=r&&"E"!=r){var n=e.substring(0,a),o=Number(n);if(isNaN(o))break;i=a}}var s=parseFloat(e);return isNaN(s)&&(s=NaN),t[0]=e.slice(i),s}!function(e){e.CubismJson=se,e.JsonArray=ge,e.JsonBoolean=le,e.JsonError=he,e.JsonFloat=ce,e.JsonMap=be,e.JsonNullvalue=de,e.JsonString=fe,e.Value=oe}(ue||(ue={}));var ye=!1,ke=!1,we=null,Se=null,Ae=Object.freeze({vertexOffset:0,vertexStep:2});function Ce(e){e&&(e=void 0)}var xe,Me,Pe=function(){function e(){me(this,e)}var t,i,a;return t=e,a=[{key:"startUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(ye)return j("CubismFramework.startUp() is already done."),ye;if(null!=(we=e)&&Live2DCubismCore.Logging.csmSetLogFunction(we.logFunction),ye=!0){var t=Live2DCubismCore.Version.csmGetVersion(),i=(16711680&t)>>16,a=65535&t,r=t;j("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+((4278190080&t)>>24)).slice(-2),("00"+i).slice(-2),("0000"+a).slice(-4),r)}return j("CubismFramework.startUp() is complete."),ye}},{key:"cleanUp",value:function(){ye=!1,ke=!1,we=null,Se=null}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;V(ye),ye?ke?I("CubismFramework.initialize() skipped, already initialized."):(oe.staticInitializeNotForClientCall(),Se=new m,Live2DCubismCore.Memory.initializeAmountOfMemory(e),ke=!0,j("CubismFramework.initialize() is complete.")):I("CubismFramework is not started.")}},{key:"dispose",value:function(){V(ye),ye?ke?(oe.staticReleaseNotForClientCall(),Se.release(),Se=null,C.staticRelease(),ke=!1,j("CubismFramework.dispose() is complete.")):I("CubismFramework.dispose() skipped, not initialized."):I("CubismFramework is not started.")}},{key:"isStarted",value:function(){return ye}},{key:"isInitialized",value:function(){return ke}},{key:"coreLogFunction",value:function(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)}},{key:"getLoggingLevel",value:function(){return null!=we?we.loggingLevel:xe.LogLevel_Off}},{key:"getIdManager",value:function(){return Se}}],(i=null)&&_e(t.prototype,i),a&&_e(t,a),e}(),Be=function e(){me(this,e),ve(this,"logFunction",void 0),ve(this,"loggingLevel",void 0)};!function(e){e[e.LogLevel_Verbose=0]="LogLevel_Verbose",e[e.LogLevel_Debug=1]="LogLevel_Debug",e[e.LogLevel_Info=2]="LogLevel_Info",e[e.LogLevel_Warning=3]="LogLevel_Warning",e[e.LogLevel_Error=4]="LogLevel_Error",e[e.LogLevel_Off=5]="LogLevel_Off"}(xe||(xe={})),function(e){e.Constant=Ae,e.csmDelete=Ce,e.CubismFramework=Pe}(Me||(Me={}));var je,Ie={shisho:{viewScale:1.7,basePath:"https://kaeru-shigure.github.io/wl2d-assets/shisho/",modelFileName:"shisho.model3.json",translateY:-.35,customParams:{_idParamMouthOpenY:.2,_idParamTail:1,_idParam2:1},back:"textures/back_v2.png"},74163:{viewScale:7,basePath:"https://kaeru-shigure.github.io/wl2d-assets/74163/",modelFileName:"model3.model3.json",translateY:-5.5,customParams:{},back:"textures/back.png"},purple_cat:{viewScale:4,basePath:"https://kaeru-shigure.github.io/wl2d-assets/purple_cat/",modelFileName:"purple.model3.json",translateY:-2.5,customParams:{},back:"textures/back.png"}},Ee="shisho",Re="Head",Ve="Body",Fe=(xe.LogLevel_Verbose,Object.freeze({HitAreaPrefix:"HitArea",HitAreaHead:"Head",HitAreaBody:"Body",PartsIdCore:"Parts01Core",PartsArmPrefix:"Parts01Arm_",PartsArmLPrefix:"Parts01ArmL_",PartsArmRPrefix:"Parts01ArmR_",ParamAngleX:"ParamAngleX",ParamAngleY:"ParamAngleY",ParamAngleZ:"ParamAngleZ",ParamEyeLOpen:"ParamEyeLOpen",ParamEyeLSmile:"ParamEyeLSmile",ParamEyeROpen:"ParamEyeROpen",ParamEyeRSmile:"ParamEyeRSmile",ParamEyeBallX:"ParamEyeBallX",ParamEyeBallY:"ParamEyeBallY",ParamEyeBallForm:"ParamEyeBallForm",ParamBrowLY:"ParamBrowLY",ParamBrowRY:"ParamBrowRY",ParamBrowLX:"ParamBrowLX",ParamBrowRX:"ParamBrowRX",ParamBrowLAngle:"ParamBrowLAngle",ParamBrowRAngle:"ParamBrowRAngle",ParamBrowLForm:"ParamBrowLForm",ParamBrowRForm:"ParamBrowRForm",ParamMouthForm:"ParamMouthForm",ParamMouthOpenY:"ParamMouthOpenY",ParamCheek:"ParamCheek",ParamBodyAngleX:"ParamBodyAngleX",ParamBodyAngleY:"ParamBodyAngleY",ParamBodyAngleZ:"ParamBodyAngleZ",ParamBreath:"ParamBreath",ParamArmLA:"ParamArmLA",ParamArmRA:"ParamArmRA",ParamArmLB:"ParamArmLB",ParamArmRB:"ParamArmRB",ParamHandL:"ParamHandL",ParamHandR:"ParamHandR",ParamHairFront:"ParamHairFront",ParamHairSide:"ParamHairSide",ParamHairBack:"ParamHairBack",ParamHairFluffy:"ParamHairFluffy",ParamShoulderY:"ParamShoulderY",ParamBustX:"ParamBustX",ParamBustY:"ParamBustY",ParamBaseX:"ParamBaseX",ParamBaseY:"ParamBaseY",ParamNONE:"NONE:"}));!function(e){e.HitAreaBody=Fe.HitAreaBody,e.HitAreaHead=Fe.HitAreaHead,e.HitAreaPrefix=Fe.HitAreaPrefix,e.ParamAngleX=Fe.ParamAngleX,e.ParamAngleY=Fe.ParamAngleY,e.ParamAngleZ=Fe.ParamAngleZ,e.ParamArmLA=Fe.ParamArmLA,e.ParamArmLB=Fe.ParamArmLB,e.ParamArmRA=Fe.ParamArmRA,e.ParamArmRB=Fe.ParamArmRB,e.ParamBaseX=Fe.ParamBaseX,e.ParamBaseY=Fe.ParamBaseY,e.ParamBodyAngleX=Fe.ParamBodyAngleX,e.ParamBodyAngleY=Fe.ParamBodyAngleY,e.ParamBodyAngleZ=Fe.ParamBodyAngleZ,e.ParamBreath=Fe.ParamBreath,e.ParamBrowLAngle=Fe.ParamBrowLAngle,e.ParamBrowLForm=Fe.ParamBrowLForm,e.ParamBrowLX=Fe.ParamBrowLX,e.ParamBrowLY=Fe.ParamBrowLY,e.ParamBrowRAngle=Fe.ParamBrowRAngle,e.ParamBrowRForm=Fe.ParamBrowRForm,e.ParamBrowRX=Fe.ParamBrowRX,e.ParamBrowRY=Fe.ParamBrowRY,e.ParamBustX=Fe.ParamBustX,e.ParamBustY=Fe.ParamBustY,e.ParamCheek=Fe.ParamCheek,e.ParamEyeBallForm=Fe.ParamEyeBallForm,e.ParamEyeBallX=Fe.ParamEyeBallX,e.ParamEyeBallY=Fe.ParamEyeBallY,e.ParamEyeLOpen=Fe.ParamEyeLOpen,e.ParamEyeLSmile=Fe.ParamEyeLSmile,e.ParamEyeROpen=Fe.ParamEyeROpen,e.ParamEyeRSmile=Fe.ParamEyeRSmile,e.ParamHairBack=Fe.ParamHairBack,e.ParamHairFluffy=Fe.ParamHairFluffy,e.ParamHairFront=Fe.ParamHairFront,e.ParamHairSide=Fe.ParamHairSide,e.ParamHandL=Fe.ParamHandL,e.ParamHandR=Fe.ParamHandR,e.ParamMouthForm=Fe.ParamMouthForm,e.ParamMouthOpenY=Fe.ParamMouthOpenY,e.ParamNONE=Fe.ParamNONE,e.ParamShoulderY=Fe.ParamShoulderY,e.PartsArmLPrefix=Fe.PartsArmLPrefix,e.PartsArmPrefix=Fe.PartsArmPrefix,e.PartsArmRPrefix=Fe.PartsArmRPrefix,e.PartsIdCore=Fe.PartsIdCore}(je||(je={}));var De,Te=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ze(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}function Ne(e,t){return!t||"object"!=((i=t)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)&&"function"!=typeof t?Le(e):t;var i}function Ue(e,t){return Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ue(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=Ge(e);if(t){var r=Ge(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return Ne(this,i)}}!function(e){e.ICubismModelSetting=Te}(De||(De={}));var Ze,Xe="FileReferences",Ye="UserData",We="Name",He="File",Ke="Ids",Je="Sound",Qe="FadeInTime",$e="FadeOutTime",et="LipSync",tt="EyeBlink";!function(e){e[e.FrequestNode_Groups=0]="FrequestNode_Groups",e[e.FrequestNode_Moc=1]="FrequestNode_Moc",e[e.FrequestNode_Motions=2]="FrequestNode_Motions",e[e.FrequestNode_Expressions=3]="FrequestNode_Expressions",e[e.FrequestNode_Textures=4]="FrequestNode_Textures",e[e.FrequestNode_Physics=5]="FrequestNode_Physics",e[e.FrequestNode_Pose=6]="FrequestNode_Pose",e[e.FrequestNode_HitAreas=7]="FrequestNode_HitAreas"}(Ze||(Ze={}));var it,at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(o,e);var t,i,a,n=qe(o);function o(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),ze(Le(i=n.call(this)),"_json",void 0),ze(Le(i),"_jsonValue",void 0),i._json=se.create(e,t),i._json&&(i._jsonValue=new r,i._jsonValue.pushBack(i._json.getRoot().getValueByString("Groups")),i._jsonValue.pushBack(i._json.getRoot().getValueByString(Xe).getValueByString("Moc")),i._jsonValue.pushBack(i._json.getRoot().getValueByString(Xe).getValueByString("Motions")),i._jsonValue.pushBack(i._json.getRoot().getValueByString(Xe).getValueByString("Expressions")),i._jsonValue.pushBack(i._json.getRoot().getValueByString(Xe).getValueByString("Textures")),i._jsonValue.pushBack(i._json.getRoot().getValueByString(Xe).getValueByString("Physics")),i._jsonValue.pushBack(i._json.getRoot().getValueByString(Xe).getValueByString("Pose")),i._jsonValue.pushBack(i._json.getRoot().getValueByString("HitAreas"))),i}return t=o,(i=[{key:"release",value:function(){se.delete(this._json),this._jsonValue=null}},{key:"GetJson",value:function(){return this._json}},{key:"getModelFileName",value:function(){return this.isExistModelFile()?this._jsonValue.at(Ze.FrequestNode_Moc).getRawString():""}},{key:"getTextureCount",value:function(){return this.isExistTextureFiles()?this._jsonValue.at(Ze.FrequestNode_Textures).getSize():0}},{key:"getTextureDirectory",value:function(){for(var e=this._jsonValue.at(Ze.FrequestNode_Textures).getValueByIndex(0).getRawString().split("/"),t=e.length-1,i="",a=0;a<t;a++)i+=e[a],a<t-1&&(i+="/");return i}},{key:"getTextureFileName",value:function(e){return this._jsonValue.at(Ze.FrequestNode_Textures).getValueByIndex(e).getRawString()}},{key:"getHitAreasCount",value:function(){return this.isExistHitAreas()?this._jsonValue.at(Ze.FrequestNode_HitAreas).getSize():0}},{key:"getHitAreaId",value:function(e){return Pe.getIdManager().getId(this._jsonValue.at(Ze.FrequestNode_HitAreas).getValueByIndex(e).getValueByString("Id").getRawString())}},{key:"getHitAreaName",value:function(e){return this._jsonValue.at(Ze.FrequestNode_HitAreas).getValueByIndex(e).getValueByString(We).getRawString()}},{key:"getPhysicsFileName",value:function(){return this.isExistPhysicsFile()?this._jsonValue.at(Ze.FrequestNode_Physics).getRawString():""}},{key:"getPoseFileName",value:function(){return this.isExistPoseFile()?this._jsonValue.at(Ze.FrequestNode_Pose).getRawString():""}},{key:"getExpressionCount",value:function(){return this.isExistExpressionFile()?this._jsonValue.at(Ze.FrequestNode_Expressions).getSize():0}},{key:"getExpressionName",value:function(e){return this._jsonValue.at(Ze.FrequestNode_Expressions).getValueByIndex(e).getValueByString(We).getRawString()}},{key:"getExpressionFileName",value:function(e){return this._jsonValue.at(Ze.FrequestNode_Expressions).getValueByIndex(e).getValueByString(He).getRawString()}},{key:"getMotionGroupCount",value:function(){return this.isExistMotionGroups()?this._jsonValue.at(Ze.FrequestNode_Motions).getKeys().getSize():0}},{key:"getMotionGroupName",value:function(e){return this.isExistMotionGroups()?this._jsonValue.at(Ze.FrequestNode_Motions).getKeys().at(e):null}},{key:"getMotionCount",value:function(e){return this.isExistMotionGroupName(e)?this._jsonValue.at(Ze.FrequestNode_Motions).getValueByString(e).getSize():0}},{key:"getMotionFileName",value:function(e,t){return this.isExistMotionGroupName(e)?this._jsonValue.at(Ze.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(He).getRawString():""}},{key:"getMotionSoundFileName",value:function(e,t){return this.isExistMotionSoundFile(e,t)?this._jsonValue.at(Ze.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(Je).getRawString():""}},{key:"getMotionFadeInTimeValue",value:function(e,t){return this.isExistMotionFadeIn(e,t)?this._jsonValue.at(Ze.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(Qe).toFloat():-1}},{key:"getMotionFadeOutTimeValue",value:function(e,t){return this.isExistMotionFadeOut(e,t)?this._jsonValue.at(Ze.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString($e).toFloat():-1}},{key:"getUserDataFile",value:function(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString(Xe).getValueByString(Ye).getRawString():""}},{key:"getLayoutMap",value:function(e){var t=this._json.getRoot().getValueByString("Layout").getMap();if(null==t)return!1;for(var i=!1,a=t.begin();a.notEqual(t.end());a.preIncrement())e.setValue(a.ptr().first,a.ptr().second.toFloat()),i=!0;return i}},{key:"getEyeBlinkParameterCount",value:function(){if(!this.isExistEyeBlinkParameters())return 0;for(var e=0,t=0;t<this._jsonValue.at(Ze.FrequestNode_Groups).getSize();t++){var i=this._jsonValue.at(Ze.FrequestNode_Groups).getValueByIndex(t);if(!i.isNull()&&!i.isError()&&i.getValueByString(We).getRawString()==tt){e=i.getValueByString(Ke).getVector().getSize();break}}return e}},{key:"getEyeBlinkParameterId",value:function(e){if(!this.isExistEyeBlinkParameters())return null;for(var t=0;t<this._jsonValue.at(Ze.FrequestNode_Groups).getSize();t++){var i=this._jsonValue.at(Ze.FrequestNode_Groups).getValueByIndex(t);if(!i.isNull()&&!i.isError()&&i.getValueByString(We).getRawString()==tt)return Pe.getIdManager().getId(i.getValueByString(Ke).getValueByIndex(e).getRawString())}return null}},{key:"getLipSyncParameterCount",value:function(){if(!this.isExistLipSyncParameters())return 0;for(var e=0,t=0;t<this._jsonValue.at(Ze.FrequestNode_Groups).getSize();t++){var i=this._jsonValue.at(Ze.FrequestNode_Groups).getValueByIndex(t);if(!i.isNull()&&!i.isError()&&i.getValueByString(We).getRawString()==et){e=i.getValueByString(Ke).getVector().getSize();break}}return e}},{key:"getLipSyncParameterId",value:function(e){if(!this.isExistLipSyncParameters())return null;for(var t=0;t<this._jsonValue.at(Ze.FrequestNode_Groups).getSize();t++){var i=this._jsonValue.at(Ze.FrequestNode_Groups).getValueByIndex(t);if(!i.isNull()&&!i.isError()&&i.getValueByString(We).getRawString()==et)return Pe.getIdManager().getId(i.getValueByString(Ke).getValueByIndex(e).getRawString())}return null}},{key:"isExistModelFile",value:function(){var e=this._jsonValue.at(Ze.FrequestNode_Moc);return!e.isNull()&&!e.isError()}},{key:"isExistTextureFiles",value:function(){var e=this._jsonValue.at(Ze.FrequestNode_Textures);return!e.isNull()&&!e.isError()}},{key:"isExistHitAreas",value:function(){var e=this._jsonValue.at(Ze.FrequestNode_HitAreas);return!e.isNull()&&!e.isError()}},{key:"isExistPhysicsFile",value:function(){var e=this._jsonValue.at(Ze.FrequestNode_Physics);return!e.isNull()&&!e.isError()}},{key:"isExistPoseFile",value:function(){var e=this._jsonValue.at(Ze.FrequestNode_Pose);return!e.isNull()&&!e.isError()}},{key:"isExistExpressionFile",value:function(){var e=this._jsonValue.at(Ze.FrequestNode_Expressions);return!e.isNull()&&!e.isError()}},{key:"isExistMotionGroups",value:function(){var e=this._jsonValue.at(Ze.FrequestNode_Motions);return!e.isNull()&&!e.isError()}},{key:"isExistMotionGroupName",value:function(e){var t=this._jsonValue.at(Ze.FrequestNode_Motions).getValueByString(e);return!t.isNull()&&!t.isError()}},{key:"isExistMotionSoundFile",value:function(e,t){var i=this._jsonValue.at(Ze.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(Je);return!i.isNull()&&!i.isError()}},{key:"isExistMotionFadeIn",value:function(e,t){var i=this._jsonValue.at(Ze.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString(Qe);return!i.isNull()&&!i.isError()}},{key:"isExistMotionFadeOut",value:function(e,t){var i=this._jsonValue.at(Ze.FrequestNode_Motions).getValueByString(e).getValueByIndex(t).getValueByString($e);return!i.isNull()&&!i.isError()}},{key:"isExistUserDataFile",value:function(){var e=this._json.getRoot().getValueByString(Xe).getValueByString(Ye);return!e.isNull()&&!e.isError()}},{key:"isExistEyeBlinkParameters",value:function(){if(this._jsonValue.at(Ze.FrequestNode_Groups).isNull()||this._jsonValue.at(Ze.FrequestNode_Groups).isError())return!1;for(var e=0;e<this._jsonValue.at(Ze.FrequestNode_Groups).getSize();++e)if(this._jsonValue.at(Ze.FrequestNode_Groups).getValueByIndex(e).getValueByString(We).getRawString()==tt)return!0;return!1}},{key:"isExistLipSyncParameters",value:function(){if(this._jsonValue.at(Ze.FrequestNode_Groups).isNull()||this._jsonValue.at(Ze.FrequestNode_Groups).isError())return!1;for(var e=0;e<this._jsonValue.at(Ze.FrequestNode_Groups).getSize();++e)if(this._jsonValue.at(Ze.FrequestNode_Groups).getValueByIndex(e).getValueByString(We).getRawString()==et)return!0;return!1}}])&&Oe(t.prototype,i),a&&Oe(t,a),o}(Te);function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ot(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismModelSettingJson=at}(it||(it={}));var st,ct=function(){function e(){rt(this,e),ot(this,"_breathParameters",void 0),ot(this,"_currentTime",void 0),this._currentTime=0}var t,i,a;return t=e,a=[{key:"create",value:function(){return new e}},{key:"delete",value:function(e){null!=e&&(e=null)}}],(i=[{key:"setParameters",value:function(e){this._breathParameters=e}},{key:"getParameters",value:function(){return this._breathParameters}},{key:"updateParameters",value:function(e,t){this._currentTime+=t;for(var i=2*this._currentTime*3.14159,a=0;a<this._breathParameters.getSize();++a){var r=this._breathParameters.at(a);e.addParameterValueById(r.parameterId,r.offset+r.peak*Math.sin(i/r.cycle),r.weight)}}}])&&nt(t.prototype,i),a&&nt(t,a),e}(),lt=function e(t,i,a,r,n){rt(this,e),ot(this,"parameterId",void 0),ot(this,"offset",void 0),ot(this,"peak",void 0),ot(this,"cycle",void 0),ot(this,"weight",void 0),this.parameterId=null==t?null:t,this.offset=null==i?0:i,this.peak=null==a?0:a,this.cycle=null==r?0:r,this.weight=null==n?0:n};function ut(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ft(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.BreathParameterData=lt,e.CubismBreath=ct}(st||(st={}));var ht,dt,gt,bt=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ft(this,"_blinkingState",void 0),ft(this,"_parameterIds",void 0),ft(this,"_nextBlinkingTime",void 0),ft(this,"_stateStartTimeSeconds",void 0),ft(this,"_blinkingIntervalSeconds",void 0),ft(this,"_closingSeconds",void 0),ft(this,"_closedSeconds",void 0),ft(this,"_openingSeconds",void 0),ft(this,"_userTimeSeconds",void 0),this._blinkingState=ht.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new r,null!=t)for(var i=0;i<t.getEyeBlinkParameterCount();++i)this._parameterIds.pushBack(t.getEyeBlinkParameterId(i))}var t,i,a;return t=e,a=[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}},{key:"delete",value:function(e){null!=e&&(e=null)}}],(i=[{key:"setBlinkingInterval",value:function(e){this._blinkingIntervalSeconds=e}},{key:"setBlinkingSetting",value:function(e,t,i){this._closingSeconds=e,this._closedSeconds=t,this._openingSeconds=i}},{key:"setParameterIds",value:function(e){this._parameterIds=e}},{key:"getParameterIds",value:function(){return this._parameterIds}},{key:"updateParameters",value:function(t,i){var a;this._userTimeSeconds+=i;var r=0;switch(this._blinkingState){case ht.EyeState_Closing:(r=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds)>=1&&(r=1,this._blinkingState=ht.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),a=1-r;break;case ht.EyeState_Closed:(r=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds)>=1&&(this._blinkingState=ht.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),a=0;break;case ht.EyeState_Opening:(r=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds)>=1&&(r=1,this._blinkingState=ht.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),a=r;break;case ht.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=ht.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),a=1;break;case ht.EyeState_First:default:this._blinkingState=ht.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),a=1}e.CloseIfZero||(a=-a);for(var n=0;n<this._parameterIds.getSize();++n)t.setParameterValueById(this._parameterIds.at(n),a)}},{key:"determinNextBlinkingTiming",value:function(){var e=Math.random();return this._userTimeSeconds+e*(2*this._blinkingIntervalSeconds-1)}}])&&ut(t.prototype,i),a&&ut(t,a),e}();function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function vt(e,t,i){return t&&_t(e.prototype,t),i&&_t(e,i),e}function pt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}ft(bt,"CloseIfZero",!0),(dt=ht||(ht={}))[dt.EyeState_First=0]="EyeState_First",dt[dt.EyeState_Interval=1]="EyeState_Interval",dt[dt.EyeState_Closing=2]="EyeState_Closing",dt[dt.EyeState_Closed=3]="EyeState_Closed",dt[dt.EyeState_Opening=4]="EyeState_Opening",function(e){e.CubismEyeBlink=bt,e.EyeState=ht}(gt||(gt={}));var yt,kt="FadeInTime",wt="Link",St=function(){function e(){mt(this,e),pt(this,"_partGroups",void 0),pt(this,"_partGroupCounts",void 0),pt(this,"_fadeTimeSeconds",void 0),pt(this,"_lastModel",void 0),this._fadeTimeSeconds=.5,this._lastModel=null,this._partGroups=new r,this._partGroupCounts=new r}return vt(e,[{key:"updateParameters",value:function(e,t){e!=this._lastModel&&this.reset(e),this._lastModel=e,t<0&&(t=0);for(var i=0,a=0;a<this._partGroupCounts.getSize();a++){var r=this._partGroupCounts.at(a);this.doFade(e,t,i,r),i+=r}this.copyPartOpacities(e)}},{key:"reset",value:function(e){for(var t=0,i=0;i<this._partGroupCounts.getSize();++i){for(var a=this._partGroupCounts.at(i),r=t;r<t+a;++r){this._partGroups.at(r).initialize(e);var n=this._partGroups.at(r).partIndex,o=this._partGroups.at(r).parameterIndex;if(!(n<0)){e.setPartOpacityByIndex(n,r==t?1:0),e.setParameterValueByIndex(o,r==t?1:0);for(var s=0;s<this._partGroups.at(r).link.getSize();++s)this._partGroups.at(r).link.at(s).initialize(e)}}t+=a}}},{key:"copyPartOpacities",value:function(e){for(var t=0;t<this._partGroups.getSize();++t){var i=this._partGroups.at(t);if(0!=i.link.getSize())for(var a=this._partGroups.at(t).partIndex,r=e.getPartOpacityByIndex(a),n=0;n<i.link.getSize();++n){var o=i.link.at(n).partIndex;o<0||e.setPartOpacityByIndex(o,r)}}}},{key:"doFade",value:function(e,t,i,a){for(var r=-1,n=1,o=.5,s=i;s<i+a;++s){var c=this._partGroups.at(s).partIndex,l=this._partGroups.at(s).parameterIndex;if(e.getParameterValueByIndex(l)>.001){if(r>=0)break;r=s,n=e.getPartOpacityByIndex(c),(n+=t/this._fadeTimeSeconds)>1&&(n=1)}}r<0&&(r=0,n=1);for(var u=i;u<i+a;++u){var f=this._partGroups.at(u).partIndex;if(r==u)e.setPartOpacityByIndex(f,n);else{var h=e.getPartOpacityByIndex(f),d=void 0;(1-(d=n<o?-.5*n/o+1:(1-n)*o/.5))*(1-n)>.15&&(d=1-.15/(1-n)),h>d&&(h=d),e.setPartOpacityByIndex(f,h)}}}}],[{key:"create",value:function(t,i){var a=new e,r=se.create(t,i),n=r.getRoot();n.getValueByString(kt).isNull()||(a._fadeTimeSeconds=n.getValueByString(kt).toFloat(.5),a._fadeTimeSeconds<=0&&(a._fadeTimeSeconds=.5));for(var o=n.getValueByString("Groups"),s=o.getSize(),c=0;c<s;++c){for(var l=o.getValueByIndex(c),u=l.getSize(),f=0,h=0;h<u;++h){var d=l.getValueByIndex(h),g=new At,b=Pe.getIdManager().getId(d.getValueByString("Id").getRawString());if(g.partId=b,!d.getValueByString(wt).isNull())for(var m=d.getValueByString(wt),_=m.getSize(),v=0;v<_;++v){var p=new At,y=Pe.getIdManager().getId(m.getValueByIndex(v).getString());p.partId=y,g.link.pushBack(p)}a._partGroups.pushBack(g.clone()),++f}a._partGroupCounts.pushBack(f)}return se.delete(r),a}},{key:"delete",value:function(e){null!=e&&(e=null)}}]),e}(),At=function(){function e(t){if(mt(this,e),pt(this,"partId",void 0),pt(this,"parameterIndex",void 0),pt(this,"partIndex",void 0),pt(this,"link",void 0),this.parameterIndex=0,this.partIndex=0,this.link=new r,null!=t){this.partId=t.partId;for(var i=t.link.begin();i.notEqual(t.link.end());i.preIncrement())this.link.pushBack(i.ptr().clone())}}return vt(e,[{key:"assignment",value:function(e){this.partId=e.partId;for(var t=e.link.begin();t.notEqual(e.link.end());t.preIncrement())this.link.pushBack(t.ptr().clone());return this}},{key:"initialize",value:function(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}},{key:"clone",value:function(){var t=new e;t.partId=this.partId,t.parameterIndex=this.parameterIndex,t.partIndex=this.partIndex,t.link=new r;for(var i=this.link.begin();i.notEqual(this.link.end());i.increment())t.link.pushBack(i.ptr().clone());return t}}]),e}();function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Mt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Pt(e){return Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pt(e)}function Bt(e,t){return!t||"object"!=((i=t)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)&&"function"!=typeof t?Ct(e):t;var i}function jt(e,t){return jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jt(e,t)}function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=Pt(e);if(t){var r=Pt(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return Bt(this,i)}}!function(e){e.CubismPose=St,e.PartData=At}(yt||(yt={}));var Et,Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(n,e);var t,i,a,r=It(n);function n(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Mt(Ct(i=r.call(this)),"_width",void 0),Mt(Ct(i),"_height",void 0),i._width=void 0!==e?e:0,i._height=void 0!==t?t:0,i.setHeight(2),i}return t=n,(i=[{key:"setWidth",value:function(e){var t=e/this._width,i=t;this.scale(t,i)}},{key:"setHeight",value:function(e){var t=e/this._height,i=t;this.scale(t,i)}},{key:"setPosition",value:function(e,t){this.translate(e,t)}},{key:"setCenterPosition",value:function(e,t){this.centerX(e),this.centerY(t)}},{key:"top",value:function(e){this.setY(e)}},{key:"bottom",value:function(e){var t=this._height*this.getScaleY();this.translateY(e-t)}},{key:"left",value:function(e){this.setX(e)}},{key:"right",value:function(e){var t=this._width*this.getScaleX();this.translateX(e-t)}},{key:"centerX",value:function(e){var t=this._width*this.getScaleX();this.translateX(e-t/2)}},{key:"setX",value:function(e){this.translateX(e)}},{key:"centerY",value:function(e){var t=this._height*this.getScaleY();this.translateY(e-t/2)}},{key:"setY",value:function(e){this.translateY(e)}},{key:"setupFromLayout",value:function(e){for(var t=e.begin();t.notEqual(e.end());t.preIncrement()){var i=t.ptr().first,a=t.ptr().second;"width"==i?this.setWidth(a):"height"==i&&this.setHeight(a)}for(var r=e.begin();r.notEqual(e.end());r.preIncrement()){var n=r.ptr().first,o=r.ptr().second;"x"==n?this.setX(o):"y"==n?this.setY(o):"center_x"==n?this.centerX(o):"center_y"==n?this.centerY(o):"top"==n?this.top(o):"bottom"==n?this.bottom(o):"left"==n?this.left(o):"right"==n&&this.right(o)}}}])&&xt(t.prototype,i),a&&xt(t,a),n}(p);function Vt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ft(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismModelMatrix=Rt}(Et||(Et={}));var Dt,Tt=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ft(this,"x",void 0),Ft(this,"y",void 0),this.x=t,this.y=i,this.x=null==t?0:t,this.y=null==i?0:i}var t,i,a;return t=e,(i=[{key:"add",value:function(t){var i=new e(0,0);return i.x=this.x+t.x,i.y=this.y+t.y,i}},{key:"substract",value:function(t){var i=new e(0,0);return i.x=this.x-t.x,i.y=this.y-t.y,i}},{key:"multiply",value:function(t){var i=new e(0,0);return i.x=this.x*t.x,i.y=this.y*t.y,i}},{key:"multiplyByScaler",value:function(t){return this.multiply(new e(t,t))}},{key:"division",value:function(t){var i=new e(0,0);return i.x=this.x/t.x,i.y=this.y/t.y,i}},{key:"divisionByScalar",value:function(t){return this.division(new e(t,t))}},{key:"getLength",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"getDistanceWith",value:function(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"normalize",value:function(){var e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}},{key:"isEqual",value:function(e){return this.x==e.x&&this.y==e.y}},{key:"isNotEqual",value:function(e){return!this.isEqual(e)}}])&&Vt(t.prototype,i),a&&Vt(t,a),e}();function Lt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}!function(e){e.CubismVector2=Tt}(Dt||(Dt={}));var Ot,zt,Gt,Nt,Ut=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,a;return t=e,a=[{key:"range",value:function(e,t,i){return e<t?e=t:e>i&&(e=i),e}},{key:"sin",value:function(e){return Math.sin(e)}},{key:"cos",value:function(e){return Math.cos(e)}},{key:"abs",value:function(e){return Math.abs(e)}},{key:"sqrt",value:function(e){return Math.sqrt(e)}},{key:"cbrt",value:function(e){if(0===e)return e;var t,i=e,a=i<0;return a&&(i=-i),t=i===1/0?1/0:(i/((t=Math.exp(Math.log(i)/3))*t)+2*t)/3,a?-t:t}},{key:"getEasingSine",value:function(e){return e<0?0:e>1?1:.5-.5*this.cos(e*Math.PI)}},{key:"max",value:function(e,t){return e>t?e:t}},{key:"min",value:function(e,t){return e>t?t:e}},{key:"degreesToRadian",value:function(e){return e/180*Math.PI}},{key:"radianToDegrees",value:function(e){return 180*e/Math.PI}},{key:"directionToRadian",value:function(e,t){for(var i=Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x);i<-Math.PI;)i+=2*Math.PI;for(;i>Math.PI;)i-=2*Math.PI;return i}},{key:"directionToDegrees",value:function(e,t){var i=this.directionToRadian(e,t),a=this.radianToDegrees(i);return t.x-e.x>0&&(a=-a),a}},{key:"radianToDirection",value:function(e){var t=new Tt;return t.x=this.sin(e),t.y=this.cos(e),t}},{key:"quadraticEquation",value:function(t,i,a){return this.abs(t)<e.Epsilon?this.abs(i)<e.Epsilon?-a:-a/i:-(i+this.sqrt(i*i-4*t*a))/(2*t)}},{key:"cardanoAlgorithmForBezier",value:function(t,i,a,r){if(this.sqrt(t)<e.Epsilon)return this.range(this.quadraticEquation(i,a,r),0,1);var n=i/t,o=a/t,s=(3*o-n*n)/3,c=s/3,l=(2*n*n*n-9*n*o+r/t*27)/27,u=l/2,f=u*u+c*c*c,h=.5,d=.51;if(f<0){var g=-s/3,b=g*g*g,m=this.sqrt(b),_=-l/(2*m),v=this.range(_,-1,1),p=Math.acos(v),y=2*this.cbrt(m),k=y*this.cos(p/3)-n/3;if(this.abs(k-h)<d)return this.range(k,0,1);var w=y*this.cos((p+2*Math.PI)/3)-n/3;if(this.abs(w-h)<d)return this.range(w,0,1);var S=y*this.cos((p+4*Math.PI)/3)-n/3;return this.range(S,0,1)}if(0==f){var A,C=2*(A=u<0?this.cbrt(-u):-this.cbrt(u))-n/3;if(this.abs(C-h)<d)return this.range(C,0,1);var x=-A-n/3;return this.range(x,0,1)}var M=this.sqrt(f),P=this.cbrt(M-u)-this.cbrt(M+u)-n/3;return this.range(P,0,1)}}],(i=null)&&Lt(t.prototype,i),a&&Lt(t,a),e}();function qt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Zt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Gt=1e-5,(zt="Epsilon")in(Ot=Ut)?Object.defineProperty(Ot,zt,{value:Gt,enumerable:!0,configurable:!0,writable:!0}):Ot[zt]=Gt,function(e){e.CubismMath=Ut}(Nt||(Nt={}));var Xt,Yt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Zt(this,"_faceTargetX",void 0),Zt(this,"_faceTargetY",void 0),Zt(this,"_faceX",void 0),Zt(this,"_faceY",void 0),Zt(this,"_faceVX",void 0),Zt(this,"_faceVY",void 0),Zt(this,"_lastTimeSeconds",void 0),Zt(this,"_userTimeSeconds",void 0),this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}var t,i,a;return t=e,(i=[{key:"update",value:function(e){this._userTimeSeconds+=e;var t=4/30;if(0!=this._lastTimeSeconds){var i=30*(this._userTimeSeconds-this._lastTimeSeconds);this._lastTimeSeconds=this._userTimeSeconds;var a=i*t/4.5,r=this._faceTargetX-this._faceX,n=this._faceTargetY-this._faceY;if(!(Ut.abs(r)<=.01&&Ut.abs(n)<=.01)){var o=Ut.sqrt(r*r+n*n),s=t*n/o,c=t*r/o-this._faceVX,l=s-this._faceVY,u=Ut.sqrt(c*c+l*l);(u<-a||u>a)&&(c*=a/u,l*=a/u),this._faceVX+=c,this._faceVY+=l;var f=.5*(Ut.sqrt(a*a+16*a*o-8*a*o)-a),h=Ut.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);h>f&&(this._faceVX*=f/h,this._faceVY*=f/h),this._faceX+=this._faceVX,this._faceY+=this._faceVY}}else this._lastTimeSeconds=this._userTimeSeconds}},{key:"getX",value:function(){return this._faceX}},{key:"getY",value:function(){return this._faceY}},{key:"set",value:function(e,t){this._faceTargetX=e,this._faceTargetY=t}}])&&qt(t.prototype,i),a&&qt(t,a),e}();function Wt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ht(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismTargetPoint=Yt}(Xt||(Xt={}));var Kt,Jt=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ht(this,"setFinishedMotionHandler",(function(e){return t._onFinishedMotion=e})),Ht(this,"getFinishedMotionHandler",(function(){return t._onFinishedMotion})),Ht(this,"_fadeInSeconds",void 0),Ht(this,"_fadeOutSeconds",void 0),Ht(this,"_weight",void 0),Ht(this,"_offsetSeconds",void 0),Ht(this,"_firedEventValues",void 0),Ht(this,"_onFinishedMotion",void 0),this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new r}var t,i,a;return t=e,a=[{key:"delete",value:function(e){e.release(),e=null}}],(i=[{key:"release",value:function(){this._weight=0}},{key:"updateParameters",value:function(e,t,i){if(t.isAvailable()&&!t.isFinished()){if(!t.isStarted()){t.setIsStarted(!0),t.setStartTime(i-this._offsetSeconds),t.setFadeInStartTime(i);var a=this.getDuration();t.getEndTime()<0&&t.setEndTime(a<=0?-1:t.getStartTime()+a)}var r=this._weight;r=r*(0==this._fadeInSeconds?1:Ut.getEasingSine((i-t.getFadeInStartTime())/this._fadeInSeconds))*(0==this._fadeOutSeconds||t.getEndTime()<0?1:Ut.getEasingSine((t.getEndTime()-i)/this._fadeOutSeconds)),t.setState(i,r),V(0<=r&&r<=1),this.doUpdateParameters(e,i,r,t),t.getEndTime()>0&&t.getEndTime()<i&&t.setIsFinished(!0)}}},{key:"setFadeInTime",value:function(e){this._fadeInSeconds=e}},{key:"setFadeOutTime",value:function(e){this._fadeOutSeconds=e}},{key:"getFadeOutTime",value:function(){return this._fadeOutSeconds}},{key:"getFadeInTime",value:function(){return this._fadeInSeconds}},{key:"setWeight",value:function(e){this._weight=e}},{key:"getWeight",value:function(){return this._weight}},{key:"getDuration",value:function(){return-1}},{key:"getLoopDuration",value:function(){return-1}},{key:"setOffsetTime",value:function(e){this._offsetSeconds=e}},{key:"getFiredEvent",value:function(e,t){return this._firedEventValues}},{key:"isExistModelOpacity",value:function(){return!1}},{key:"getModelOpacityIndex",value:function(){return-1}},{key:"getModelOpacityId",value:function(e){return null}},{key:"getModelOpacityValue",value:function(){return 1}}])&&Wt(t.prototype,i),a&&Wt(t,a),e}();function Qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ei(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ti(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ii(e){return ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ii(e)}function ai(e,t){return!t||"object"!==function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)&&"function"!=typeof t?Qt(e):t}function ri(e,t){return ri=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ri(e,t)}function ni(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=ii(e);if(t){var r=ii(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return ai(this,i)}}!function(e){e.ACubismMotion=Jt}(Kt||(Kt={}));var oi,si,ci="Parameters",li="Blend",ui=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ri(e,t)}(o,e);var t,i,a,n=ni(o);function o(){var e;return $t(this,o),ti(Qt(e=n.call(this)),"_parameters",void 0),e._parameters=new r,e}return t=o,i=[{key:"doUpdateParameters",value:function(e,t,i,a){for(var r=0;r<this._parameters.getSize();++r){var n=this._parameters.at(r);switch(n.blendType){case oi.ExpressionBlendType_Add:e.addParameterValueById(n.parameterId,n.value,i);break;case oi.ExpressionBlendType_Multiply:e.multiplyParameterValueById(n.parameterId,n.value,i);break;case oi.ExpressionBlendType_Overwrite:e.setParameterValueById(n.parameterId,n.value,i)}}}},{key:"parse",value:function(e,t){var i=se.create(e,t),a=i.getRoot();this.setFadeInTime(a.getValueByString("FadeInTime").toFloat(1)),this.setFadeOutTime(a.getValueByString("FadeOutTime").toFloat(1));var r=a.getValueByString(ci).getSize();this._parameters.prepareCapacity(r);for(var n=0;n<r;++n){var o=a.getValueByString(ci).getValueByIndex(n),s=Pe.getIdManager().getId(o.getValueByString("Id").getRawString()),c=o.getValueByString("Value").toFloat(),l=void 0;l=o.getValueByString(li).isNull()||"Add"==o.getValueByString(li).getString()?oi.ExpressionBlendType_Add:"Multiply"==o.getValueByString(li).getString()?oi.ExpressionBlendType_Multiply:"Overwrite"==o.getValueByString(li).getString()?oi.ExpressionBlendType_Overwrite:oi.ExpressionBlendType_Add;var u=new mi;u.parameterId=s,u.blendType=l,u.value=c,this._parameters.pushBack(u)}se.delete(i)}}],a=[{key:"create",value:function(e,t){var i=new o;return i.parse(e,t),i}}],i&&ei(t.prototype,i),a&&ei(t,a),o}(Jt);(si=oi||(oi={}))[si.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",si[si.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",si[si.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite";var fi,hi,di,gi,bi,mi=function e(){$t(this,e),ti(this,"parameterId",void 0),ti(this,"blendType",void 0),ti(this,"value",void 0)};function _i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismExpressionMotion=ui,e.ExpressionBlendType=oi,e.ExpressionParameter=mi}(fi||(fi={})),(di=hi||(hi={}))[di.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",di[di.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",di[di.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",(bi=gi||(gi={}))[bi.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",bi[bi.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",bi[bi.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",bi[bi.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped";var pi,yi=function e(){_i(this,e),vi(this,"time",0),vi(this,"value",0)},ki=function e(){_i(this,e),vi(this,"evaluate",void 0),vi(this,"basePointIndex",void 0),vi(this,"segmentType",void 0),this.evaluate=null,this.basePointIndex=0,this.segmentType=0},wi=function e(){_i(this,e),vi(this,"type",void 0),vi(this,"id",void 0),vi(this,"segmentCount",void 0),vi(this,"baseSegmentIndex",void 0),vi(this,"fadeInTime",void 0),vi(this,"fadeOutTime",void 0),this.type=hi.CubismMotionCurveTarget_Model,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0},Si=function e(){_i(this,e),vi(this,"fireTime",0),vi(this,"value",void 0)},Ai=function e(){_i(this,e),vi(this,"duration",void 0),vi(this,"loop",void 0),vi(this,"curveCount",void 0),vi(this,"eventCount",void 0),vi(this,"fps",void 0),vi(this,"curves",void 0),vi(this,"segments",void 0),vi(this,"points",void 0),vi(this,"events",void 0),this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new r,this.segments=new r,this.points=new r,this.events=new r};function Ci(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}!function(e){e.CubismMotionCurve=wi,e.CubismMotionCurveTarget=hi,e.CubismMotionData=Ai,e.CubismMotionEvent=Si,e.CubismMotionPoint=yi,e.CubismMotionSegment=ki,e.CubismMotionSegmentType=gi}(pi||(pi={}));var xi,Mi,Pi="Meta",Bi="Curves",ji="FadeInTime",Ii="FadeOutTime",Ei="Segments",Ri="UserData",Vi=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"_json",void 0),this._json=se.create(t,i)}var t,i,a;return t=e,(i=[{key:"release",value:function(){se.delete(this._json)}},{key:"getMotionDuration",value:function(){return this._json.getRoot().getValueByString(Pi).getValueByString("Duration").toFloat()}},{key:"isMotionLoop",value:function(){return this._json.getRoot().getValueByString(Pi).getValueByString("Loop").toBoolean()}},{key:"getEvaluationOptionFlag",value:function(e){return xi.EvaluationOptionFlag_AreBeziersRistricted==e&&this._json.getRoot().getValueByString(Pi).getValueByString("AreBeziersRestricted").toBoolean()}},{key:"getMotionCurveCount",value:function(){return this._json.getRoot().getValueByString(Pi).getValueByString("CurveCount").toInt()}},{key:"getMotionFps",value:function(){return this._json.getRoot().getValueByString(Pi).getValueByString("Fps").toFloat()}},{key:"getMotionTotalSegmentCount",value:function(){return this._json.getRoot().getValueByString(Pi).getValueByString("TotalSegmentCount").toInt()}},{key:"getMotionTotalPointCount",value:function(){return this._json.getRoot().getValueByString(Pi).getValueByString("TotalPointCount").toInt()}},{key:"isExistMotionFadeInTime",value:function(){return!this._json.getRoot().getValueByString(Pi).getValueByString(ji).isNull()}},{key:"isExistMotionFadeOutTime",value:function(){return!this._json.getRoot().getValueByString(Pi).getValueByString(Ii).isNull()}},{key:"getMotionFadeInTime",value:function(){return this._json.getRoot().getValueByString(Pi).getValueByString(ji).toFloat()}},{key:"getMotionFadeOutTime",value:function(){return this._json.getRoot().getValueByString(Pi).getValueByString(Ii).toFloat()}},{key:"getMotionCurveTarget",value:function(e){return this._json.getRoot().getValueByString(Bi).getValueByIndex(e).getValueByString("Target").getRawString()}},{key:"getMotionCurveId",value:function(e){return Pe.getIdManager().getId(this._json.getRoot().getValueByString(Bi).getValueByIndex(e).getValueByString("Id").getRawString())}},{key:"isExistMotionCurveFadeInTime",value:function(e){return!this._json.getRoot().getValueByString(Bi).getValueByIndex(e).getValueByString(ji).isNull()}},{key:"isExistMotionCurveFadeOutTime",value:function(e){return!this._json.getRoot().getValueByString(Bi).getValueByIndex(e).getValueByString(Ii).isNull()}},{key:"getMotionCurveFadeInTime",value:function(e){return this._json.getRoot().getValueByString(Bi).getValueByIndex(e).getValueByString(ji).toFloat()}},{key:"getMotionCurveFadeOutTime",value:function(e){return this._json.getRoot().getValueByString(Bi).getValueByIndex(e).getValueByString(Ii).toFloat()}},{key:"getMotionCurveSegmentCount",value:function(e){return this._json.getRoot().getValueByString(Bi).getValueByIndex(e).getValueByString(Ei).getVector().getSize()}},{key:"getMotionCurveSegment",value:function(e,t){return this._json.getRoot().getValueByString(Bi).getValueByIndex(e).getValueByString(Ei).getValueByIndex(t).toFloat()}},{key:"getEventCount",value:function(){return this._json.getRoot().getValueByString(Pi).getValueByString("UserDataCount").toInt()}},{key:"getTotalEventValueSize",value:function(){return this._json.getRoot().getValueByString(Pi).getValueByString("TotalUserDataSize").toInt()}},{key:"getEventTime",value:function(e){return this._json.getRoot().getValueByString(Ri).getValueByIndex(e).getValueByString("Time").toFloat()}},{key:"getEventValue",value:function(e){return new l(this._json.getRoot().getValueByString(Ri).getValueByIndex(e).getValueByString("Value").getRawString())}}])&&Ci(t.prototype,i),a&&Ci(t,a),e}();function Fi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Di(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ti(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Li(e){return Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Li(e)}function Oi(e,t){return!t||"object"!==function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)&&"function"!=typeof t?Fi(e):t}function zi(e,t){return zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zi(e,t)}function Gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=Li(e);if(t){var r=Li(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return Oi(this,i)}}!function(e){e[e.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted"}(xi||(xi={})),function(e){e.CubismMotionJson=Vi}(Mi||(Mi={}));var Ni="Opacity";function Ui(e,t,i){var a=new yi;return a.time=e.time+(t.time-e.time)*i,a.value=e.value+(t.value-e.value)*i,a}function qi(e,t){var i=(t-e[0].time)/(e[1].time-e[0].time);return i<0&&(i=0),e[0].value+(e[1].value-e[0].value)*i}function Zi(e,t){var i=(t-e[0].time)/(e[3].time-e[0].time);i<0&&(i=0);var a=Ui(e[0],e[1],i),r=Ui(e[1],e[2],i),n=Ui(e[2],e[3],i),o=Ui(a,r,i),s=Ui(r,n,i);return Ui(o,s,i).value}function Xi(e,t){var i=t,a=e[0].time,r=e[3].time,n=e[1].time,o=e[2].time,s=r-3*o+3*n-a,c=3*o-6*n+3*a,l=3*n-3*a,u=a-i,f=Ut.cardanoAlgorithmForBezier(s,c,l,u),h=Ui(e[0],e[1],f),d=Ui(e[1],e[2],f),g=Ui(e[2],e[3],f),b=Ui(h,d,f),m=Ui(d,g,f);return Ui(b,m,f).value}function Yi(e,t){return e[0].value}function Wi(e,t){return e[1].value}function Hi(e,t,i){for(var a=e.curves.at(t),r=-1,n=a.baseSegmentIndex+a.segmentCount,o=0,s=a.baseSegmentIndex;s<n;++s)if(o=e.segments.at(s).basePointIndex+(e.segments.at(s).segmentType==gi.CubismMotionSegmentType_Bezier?3:1),e.points.at(o).time>i){r=s;break}if(-1==r)return e.points.at(o).value;var c=e.segments.at(r);return c.evaluate(e.points.get(c.basePointIndex),i)}var Ki,Ji=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zi(e,t)}(n,e);var t,i,a,r=Gi(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Ti(Fi(e=r.call(this)),"_sourceFrameRate",void 0),Ti(Fi(e),"_loopDurationSeconds",void 0),Ti(Fi(e),"_isLoop",void 0),Ti(Fi(e),"_isLoopFadeIn",void 0),Ti(Fi(e),"_lastWeight",void 0),Ti(Fi(e),"_motionData",void 0),Ti(Fi(e),"_eyeBlinkParameterIds",void 0),Ti(Fi(e),"_lipSyncParameterIds",void 0),Ti(Fi(e),"_modelCurveIdEyeBlink",void 0),Ti(Fi(e),"_modelCurveIdLipSync",void 0),Ti(Fi(e),"_modelCurveIdOpacity",void 0),Ti(Fi(e),"_modelOpacity",void 0),e._sourceFrameRate=30,e._loopDurationSeconds=-1,e._isLoop=!1,e._isLoopFadeIn=!0,e._lastWeight=0,e._motionData=null,e._modelCurveIdEyeBlink=null,e._modelCurveIdLipSync=null,e._modelCurveIdOpacity=null,e._eyeBlinkParameterIds=null,e._lipSyncParameterIds=null,e._modelOpacity=1,e}return t=n,i=[{key:"doUpdateParameters",value:function(e,t,i,a){null==this._modelCurveIdEyeBlink&&(this._modelCurveIdEyeBlink=Pe.getIdManager().getId("EyeBlink")),null==this._modelCurveIdLipSync&&(this._modelCurveIdLipSync=Pe.getIdManager().getId("LipSync")),null==this._modelCurveIdOpacity&&(this._modelCurveIdOpacity=Pe.getIdManager().getId(Ni));var r=t-a.getStartTime();r<0&&(r=0);var n=Number.MAX_VALUE,o=Number.MAX_VALUE,s=64,c=0,l=0;this._eyeBlinkParameterIds.getSize()>s&&B("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>s&&B("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());var u,f,h,d=this._fadeInSeconds<=0?1:Ut.getEasingSine((t-a.getFadeInStartTime())/this._fadeInSeconds),g=this._fadeOutSeconds<=0||a.getEndTime()<0?1:Ut.getEasingSine((a.getEndTime()-t)/this._fadeOutSeconds),b=r;if(this._isLoop)for(;b>this._motionData.duration;)b-=this._motionData.duration;var m=this._motionData.curves;for(f=0;f<this._motionData.curveCount&&m.at(f).type==hi.CubismMotionCurveTarget_Model;++f)u=Hi(this._motionData,f,b),m.at(f).id==this._modelCurveIdEyeBlink?o=u:m.at(f).id==this._modelCurveIdLipSync?n=u:m.at(f).id==this._modelCurveIdOpacity&&(this._modelOpacity=u,e.setModelOapcity(this.getModelOpacityValue()));for(;f<this._motionData.curveCount&&m.at(f).type==hi.CubismMotionCurveTarget_Parameter;++f)if(-1!=(h=e.getParameterIndex(m.at(f).id))){var _=e.getParameterValueByIndex(h);if(u=Hi(this._motionData,f,b),o!=Number.MAX_VALUE)for(var v=0;v<this._eyeBlinkParameterIds.getSize()&&v<s;++v)if(this._eyeBlinkParameterIds.at(v)==m.at(f).id){u*=o,l|=1<<v;break}if(n!=Number.MAX_VALUE)for(var p=0;p<this._lipSyncParameterIds.getSize()&&p<s;++p)if(this._lipSyncParameterIds.at(p)==m.at(f).id){u+=n,c|=1<<p;break}var y=void 0;if(m.at(f).fadeInTime<0&&m.at(f).fadeOutTime<0)y=_+(u-_)*i;else{var k=void 0,w=void 0;k=m.at(f).fadeInTime<0?d:0==m.at(f).fadeInTime?1:Ut.getEasingSine((t-a.getFadeInStartTime())/m.at(f).fadeInTime),w=m.at(f).fadeOutTime<0?g:0==m.at(f).fadeOutTime||a.getEndTime()<0?1:Ut.getEasingSine((a.getEndTime()-t)/m.at(f).fadeOutTime),y=_+(u-_)*(this._weight*k*w)}e.setParameterValueByIndex(h,y,1)}if(o!=Number.MAX_VALUE)for(var S=0;S<this._eyeBlinkParameterIds.getSize()&&S<s;++S){var A=e.getParameterValueById(this._eyeBlinkParameterIds.at(S));if(!(l>>S&1)){var C=A+(o-A)*i;e.setParameterValueById(this._eyeBlinkParameterIds.at(S),C)}}if(n!=Number.MAX_VALUE)for(var x=0;x<this._lipSyncParameterIds.getSize()&&x<s;++x){var M=e.getParameterValueById(this._lipSyncParameterIds.at(x));if(!(c>>x&1)){var P=M+(n-M)*i;e.setParameterValueById(this._lipSyncParameterIds.at(x),P)}}for(;f<this._motionData.curveCount&&m.at(f).type==hi.CubismMotionCurveTarget_PartOpacity;++f)-1!=(h=e.getParameterIndex(m.at(f).id))&&(u=Hi(this._motionData,f,b),e.setParameterValueByIndex(h,u));r>=this._motionData.duration&&(this._isLoop?(a.setStartTime(t),this._isLoopFadeIn&&a.setFadeInStartTime(t)):(this._onFinishedMotion&&this._onFinishedMotion(this),a.setIsFinished(!0))),this._lastWeight=i}},{key:"setIsLoop",value:function(e){this._isLoop=e}},{key:"isLoop",value:function(){return this._isLoop}},{key:"setIsLoopFadeIn",value:function(e){this._isLoopFadeIn=e}},{key:"isLoopFadeIn",value:function(){return this._isLoopFadeIn}},{key:"getDuration",value:function(){return this._isLoop?-1:this._loopDurationSeconds}},{key:"getLoopDuration",value:function(){return this._loopDurationSeconds}},{key:"setParameterFadeInTime",value:function(e,t){for(var i=this._motionData.curves,a=0;a<this._motionData.curveCount;++a)if(e==i.at(a).id)return void(i.at(a).fadeInTime=t)}},{key:"setParameterFadeOutTime",value:function(e,t){for(var i=this._motionData.curves,a=0;a<this._motionData.curveCount;++a)if(e==i.at(a).id)return void(i.at(a).fadeOutTime=t)}},{key:"getParameterFadeInTime",value:function(e){for(var t=this._motionData.curves,i=0;i<this._motionData.curveCount;++i)if(e==t.at(i).id)return t.at(i).fadeInTime;return-1}},{key:"getParameterFadeOutTime",value:function(e){for(var t=this._motionData.curves,i=0;i<this._motionData.curveCount;++i)if(e==t.at(i).id)return t.at(i).fadeOutTime;return-1}},{key:"setEffectIds",value:function(e,t){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=t}},{key:"release",value:function(){this._motionData=void 0,this._motionData=null}},{key:"parse",value:function(e,t){this._motionData=new Ai;var i=new Vi(e,t);this._motionData.duration=i.getMotionDuration(),this._motionData.loop=i.isMotionLoop(),this._motionData.curveCount=i.getMotionCurveCount(),this._motionData.fps=i.getMotionFps(),this._motionData.eventCount=i.getEventCount();var a=i.getEvaluationOptionFlag(xi.EvaluationOptionFlag_AreBeziersRistricted);i.isExistMotionFadeInTime()?this._fadeInSeconds=i.getMotionFadeInTime()<0?1:i.getMotionFadeInTime():this._fadeInSeconds=1,i.isExistMotionFadeOutTime()?this._fadeOutSeconds=i.getMotionFadeOutTime()<0?1:i.getMotionFadeOutTime():this._fadeOutSeconds=1,this._motionData.curves.updateSize(this._motionData.curveCount,wi,!0),this._motionData.segments.updateSize(i.getMotionTotalSegmentCount(),ki,!0),this._motionData.points.updateSize(i.getMotionTotalPointCount(),yi,!0),this._motionData.events.updateSize(this._motionData.eventCount,Si,!0);for(var r=0,n=0,o=0;o<this._motionData.curveCount;++o){"Model"==i.getMotionCurveTarget(o)?this._motionData.curves.at(o).type=hi.CubismMotionCurveTarget_Model:"Parameter"==i.getMotionCurveTarget(o)?this._motionData.curves.at(o).type=hi.CubismMotionCurveTarget_Parameter:"PartOpacity"==i.getMotionCurveTarget(o)?this._motionData.curves.at(o).type=hi.CubismMotionCurveTarget_PartOpacity:I('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!'),this._motionData.curves.at(o).id=i.getMotionCurveId(o),this._motionData.curves.at(o).baseSegmentIndex=n,this._motionData.curves.at(o).fadeInTime=i.isExistMotionCurveFadeInTime(o)?i.getMotionCurveFadeInTime(o):-1,this._motionData.curves.at(o).fadeOutTime=i.isExistMotionCurveFadeOutTime(o)?i.getMotionCurveFadeOutTime(o):-1;for(var s=0;s<i.getMotionCurveSegmentCount(o);){switch(0==s?(this._motionData.segments.at(n).basePointIndex=r,this._motionData.points.at(r).time=i.getMotionCurveSegment(o,s),this._motionData.points.at(r).value=i.getMotionCurveSegment(o,s+1),r+=1,s+=2):this._motionData.segments.at(n).basePointIndex=r-1,i.getMotionCurveSegment(o,s)){case gi.CubismMotionSegmentType_Linear:this._motionData.segments.at(n).segmentType=gi.CubismMotionSegmentType_Linear,this._motionData.segments.at(n).evaluate=qi,this._motionData.points.at(r).time=i.getMotionCurveSegment(o,s+1),this._motionData.points.at(r).value=i.getMotionCurveSegment(o,s+2),r+=1,s+=3;break;case gi.CubismMotionSegmentType_Bezier:this._motionData.segments.at(n).segmentType=gi.CubismMotionSegmentType_Bezier,this._motionData.segments.at(n).evaluate=a?Zi:Xi,this._motionData.points.at(r).time=i.getMotionCurveSegment(o,s+1),this._motionData.points.at(r).value=i.getMotionCurveSegment(o,s+2),this._motionData.points.at(r+1).time=i.getMotionCurveSegment(o,s+3),this._motionData.points.at(r+1).value=i.getMotionCurveSegment(o,s+4),this._motionData.points.at(r+2).time=i.getMotionCurveSegment(o,s+5),this._motionData.points.at(r+2).value=i.getMotionCurveSegment(o,s+6),r+=3,s+=7;break;case gi.CubismMotionSegmentType_Stepped:this._motionData.segments.at(n).segmentType=gi.CubismMotionSegmentType_Stepped,this._motionData.segments.at(n).evaluate=Yi,this._motionData.points.at(r).time=i.getMotionCurveSegment(o,s+1),this._motionData.points.at(r).value=i.getMotionCurveSegment(o,s+2),r+=1,s+=3;break;case gi.CubismMotionSegmentType_InverseStepped:this._motionData.segments.at(n).segmentType=gi.CubismMotionSegmentType_InverseStepped,this._motionData.segments.at(n).evaluate=Wi,this._motionData.points.at(r).time=i.getMotionCurveSegment(o,s+1),this._motionData.points.at(r).value=i.getMotionCurveSegment(o,s+2),r+=1,s+=3;break;default:V(0)}++this._motionData.curves.at(o).segmentCount,++n}}for(var c=0;c<i.getEventCount();++c)this._motionData.events.at(c).fireTime=i.getEventTime(c),this._motionData.events.at(c).value=i.getEventValue(c);i.release(),i=void 0,i=null}},{key:"getFiredEvent",value:function(e,t){this._firedEventValues.updateSize(0);for(var i=0;i<this._motionData.eventCount;++i)this._motionData.events.at(i).fireTime>e&&this._motionData.events.at(i).fireTime<=t&&this._firedEventValues.pushBack(new l(this._motionData.events.at(i).value.s));return this._firedEventValues}},{key:"isExistModelOpacity",value:function(){for(var e=0;e<this._motionData.curveCount;e++){var t=this._motionData.curves.at(e);if(t.type==hi.CubismMotionCurveTarget_Model&&0==t.id.getString().s.localeCompare(Ni))return!0}return!1}},{key:"getModelOpacityIndex",value:function(){if(this.isExistModelOpacity())for(var e=0;e<this._motionData.curveCount;e++){var t=this._motionData.curves.at(e);if(t.type==hi.CubismMotionCurveTarget_Model&&0==t.id.getString().s.localeCompare(Ni))return e}return-1}},{key:"getModelOpacityId",value:function(e){if(-1!=e){var t=this._motionData.curves.at(e);if(t.type==hi.CubismMotionCurveTarget_Model&&0==t.id.getString().s.localeCompare(Ni))return Pe.getIdManager().getId(t.id.getString().s)}return null}},{key:"getModelOpacityValue",value:function(){return this._modelOpacity}}],a=[{key:"create",value:function(e,t,i){var a=new n;return a.parse(e,t),a._sourceFrameRate=a._motionData.fps,a._loopDurationSeconds=a._motionData.duration,a._onFinishedMotion=i,a}}],i&&Di(t.prototype,i),a&&Di(t,a),n}(Jt);function Qi(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismMotion=Ji}(Ki||(Ki={}));var ea,ta=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$i(this,"_autoDelete",void 0),$i(this,"_motion",void 0),$i(this,"_available",void 0),$i(this,"_finished",void 0),$i(this,"_started",void 0),$i(this,"_startTimeSeconds",void 0),$i(this,"_fadeInStartTimeSeconds",void 0),$i(this,"_endTimeSeconds",void 0),$i(this,"_stateTimeSeconds",void 0),$i(this,"_stateWeight",void 0),$i(this,"_lastEventCheckSeconds",void 0),$i(this,"_fadeOutSeconds",void 0),$i(this,"_isTriggeredFadeOut",void 0),$i(this,"_motionQueueEntryHandle",void 0),this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}var t,i,a;return t=e,(i=[{key:"release",value:function(){this._autoDelete&&this._motion&&Jt.delete(this._motion)}},{key:"setFadeOut",value:function(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}},{key:"startFadeOut",value:function(e,t){var i=t+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||i<this._endTimeSeconds)&&(this._endTimeSeconds=i)}},{key:"isFinished",value:function(){return this._finished}},{key:"isStarted",value:function(){return this._started}},{key:"getStartTime",value:function(){return this._startTimeSeconds}},{key:"getFadeInStartTime",value:function(){return this._fadeInStartTimeSeconds}},{key:"getEndTime",value:function(){return this._endTimeSeconds}},{key:"setStartTime",value:function(e){this._startTimeSeconds=e}},{key:"setFadeInStartTime",value:function(e){this._fadeInStartTimeSeconds=e}},{key:"setEndTime",value:function(e){this._endTimeSeconds=e}},{key:"setIsFinished",value:function(e){this._finished=e}},{key:"setIsStarted",value:function(e){this._started=e}},{key:"isAvailable",value:function(){return this._available}},{key:"setIsAvailable",value:function(e){this._available=e}},{key:"setState",value:function(e,t){this._stateTimeSeconds=e,this._stateWeight=t}},{key:"getStateTime",value:function(){return this._stateTimeSeconds}},{key:"getStateWeight",value:function(){return this._stateWeight}},{key:"getLastCheckEventSeconds",value:function(){return this._lastEventCheckSeconds}},{key:"setLastCheckEventSeconds",value:function(e){this._lastEventCheckSeconds=e}},{key:"isTriggeredFadeOut",value:function(){return this._isTriggeredFadeOut}},{key:"getFadeOutSeconds",value:function(){return this._fadeOutSeconds}}])&&Qi(t.prototype,i),a&&Qi(t,a),e}();function ia(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function aa(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismMotionQueueEntry=ta}(ea||(ea={}));var ra,na=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),aa(this,"_userTimeSeconds",void 0),aa(this,"_motions",void 0),aa(this,"_eventCallBack",void 0),aa(this,"_eventCustomData",void 0),this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new r}var t,i,a;return t=e,i=[{key:"release",value:function(){for(var e=0;e<this._motions.getSize();++e)this._motions.at(e)&&(this._motions.at(e).release(),this._motions.set(e,null));this._motions=null}},{key:"startMotion",value:function(e,t,i){if(null==e)return oa;for(var a=null,r=0;r<this._motions.getSize();++r)null!=(a=this._motions.at(r))&&a.setFadeOut(a._motion.getFadeOutTime());return(a=new ta)._autoDelete=t,a._motion=e,this._motions.pushBack(a),a._motionQueueEntryHandle}},{key:"isFinished",value:function(){for(var e=this._motions.begin();e.notEqual(this._motions.end());){var t=e.ptr();if(null!=t)if(null!=t._motion){if(!t.isFinished())return!1;e.preIncrement()}else t.release(),t=null,e=this._motions.erase(e);else e=this._motions.erase(e)}return!0}},{key:"isFinishedByHandle",value:function(e){for(var t=this._motions.begin();t.notEqual(this._motions.end());t.increment()){var i=t.ptr();if(null!=i&&i._motionQueueEntryHandle==e&&!i.isFinished())return!1}return!0}},{key:"stopAllMotions",value:function(){for(var e=this._motions.begin();e.notEqual(this._motions.end());){var t=e.ptr();null!=t?(t.release(),t=null,e=this._motions.erase(e)):e=this._motions.erase(e)}}},{key:"getCubismMotionQueueEntry",value:function(e){for(var t=this._motions.begin();t.notEqual(this._motions.end());t.preIncrement()){var i=t.ptr();if(null!=i&&i._motionQueueEntryHandle==e)return i}return null}},{key:"setEventCallback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._eventCallBack=e,this._eventCustomData=t}},{key:"doUpdateMotion",value:function(e,t){for(var i=!1,a=this._motions.begin();a.notEqual(this._motions.end());){var r=a.ptr();if(null!=r){var n=r._motion;if(null!=n){n.updateParameters(e,r,t),i=!0;for(var o=n.getFiredEvent(r.getLastCheckEventSeconds()-r.getStartTime(),t-r.getStartTime()),s=0;s<o.getSize();++s)this._eventCallBack(this,o.at(s),this._eventCustomData);r.setLastCheckEventSeconds(t),r.isFinished()?(r.release(),r=null,a=this._motions.erase(a)):(r.isTriggeredFadeOut()&&r.startFadeOut(r.getFadeOutSeconds(),t),a.preIncrement())}else r.release(),r=null,a=this._motions.erase(a)}else a=this._motions.erase(a)}return i}}],i&&ia(t.prototype,i),a&&ia(t,a),e}(),oa=-1;function sa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ca(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function la(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ua(e,t,i){return ua="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fa(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(i||e):r.value}},ua(e,t,i||e)}function fa(e){return fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fa(e)}function ha(e,t){return!t||"object"!==function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)&&"function"!=typeof t?sa(e):t}function da(e,t){return da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},da(e,t)}function ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=fa(e);if(t){var r=fa(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return ha(this,i)}}!function(e){e.CubismMotionQueueManager=na,e.InvalidMotionQueueEntryHandleValue=oa}(ra||(ra={}));var ba,ma,_a,va,pa,ya=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&da(e,t)}(n,e);var t,i,a,r=ga(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),la(sa(e=r.call(this)),"_currentPriority",void 0),la(sa(e),"_reservePriority",void 0),e._currentPriority=0,e._reservePriority=0,e}return t=n,(i=[{key:"getCurrentPriority",value:function(){return this._currentPriority}},{key:"getReservePriority",value:function(){return this._reservePriority}},{key:"setReservePriority",value:function(e){this._reservePriority=e}},{key:"startMotionPriority",value:function(e,t,i){return i==this._reservePriority&&(this._reservePriority=0),this._currentPriority=i,ua(fa(n.prototype),"startMotion",this).call(this,e,t,this._userTimeSeconds)}},{key:"updateMotion",value:function(e,t){this._userTimeSeconds+=t;var i=ua(fa(n.prototype),"doUpdateMotion",this).call(this,e,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),i}},{key:"reserveMotion",value:function(e){return!(e<=this._reservePriority||e<=this._currentPriority||(this._reservePriority=e,0))}}])&&ca(t.prototype,i),a&&ca(t,a),n}(na);function ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wa(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismMotionManager=ya}(ba||(ba={})),(_a=ma||(ma={}))[_a.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",(pa=va||(va={}))[pa.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",pa[pa.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",pa[pa.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle";var Sa,Aa=function e(){ka(this,e),wa(this,"gravity",void 0),wa(this,"wind",void 0),this.gravity=new Tt(0,0),this.wind=new Tt(0,0)},Ca=function e(){ka(this,e),wa(this,"id",void 0),wa(this,"targetType",void 0)},xa=function e(){ka(this,e),wa(this,"minimum",void 0),wa(this,"maximum",void 0),wa(this,"defalut",void 0)},Ma=function e(){ka(this,e),wa(this,"initialPosition",void 0),wa(this,"mobility",void 0),wa(this,"delay",void 0),wa(this,"acceleration",void 0),wa(this,"radius",void 0),wa(this,"position",void 0),wa(this,"lastPosition",void 0),wa(this,"lastGravity",void 0),wa(this,"force",void 0),wa(this,"velocity",void 0),this.initialPosition=new Tt(0,0),this.position=new Tt(0,0),this.lastPosition=new Tt(0,0),this.lastGravity=new Tt(0,0),this.force=new Tt(0,0),this.velocity=new Tt(0,0)},Pa=function e(){ka(this,e),wa(this,"inputCount",void 0),wa(this,"outputCount",void 0),wa(this,"particleCount",void 0),wa(this,"baseInputIndex",void 0),wa(this,"baseOutputIndex",void 0),wa(this,"baseParticleIndex",void 0),wa(this,"normalizationPosition",void 0),wa(this,"normalizationAngle",void 0),this.normalizationPosition=new xa,this.normalizationAngle=new xa},Ba=function e(){ka(this,e),wa(this,"source",void 0),wa(this,"sourceParameterIndex",void 0),wa(this,"weight",void 0),wa(this,"type",void 0),wa(this,"reflect",void 0),wa(this,"getNormalizedParameterValue",void 0),this.source=new Ca},ja=function e(){ka(this,e),wa(this,"destination",void 0),wa(this,"destinationParameterIndex",void 0),wa(this,"vertexIndex",void 0),wa(this,"translationScale",void 0),wa(this,"angleScale",void 0),wa(this,"weight",void 0),wa(this,"type",void 0),wa(this,"reflect",void 0),wa(this,"valueBelowMinimum",void 0),wa(this,"valueExceededMaximum",void 0),wa(this,"getValue",void 0),wa(this,"getScale",void 0),this.destination=new Ca,this.translationScale=new Tt(0,0)},Ia=function e(){ka(this,e),wa(this,"subRigCount",void 0),wa(this,"settings",void 0),wa(this,"inputs",void 0),wa(this,"outputs",void 0),wa(this,"particles",void 0),wa(this,"gravity",void 0),wa(this,"wind",void 0),wa(this,"fps",void 0),this.settings=new r,this.inputs=new r,this.outputs=new r,this.particles=new r,this.gravity=new Tt(0,0),this.wind=new Tt(0,0),this.fps=0};function Ea(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}!function(e){e.CubismPhysicsInput=Ba,e.CubismPhysicsNormalization=xa,e.CubismPhysicsOutput=ja,e.CubismPhysicsParameter=Ca,e.CubismPhysicsParticle=Ma,e.CubismPhysicsRig=Ia,e.CubismPhysicsSource=va,e.CubismPhysicsSubRig=Pa,e.CubismPhysicsTargetType=ma,e.PhysicsJsonEffectiveForces=Aa}(Sa||(Sa={}));var Ra,Va="Position",Fa="Angle",Da="Type",Ta="Meta",La="EffectiveForces",Oa="Gravity",za="Wind",Ga="PhysicsSettings",Na="Normalization",Ua="Minimum",qa="Maximum",Za="Default",Xa="Reflect",Ya="Weight",Wa="Input",Ha="Output",Ka="Vertices",Ja=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"_json",void 0),this._json=se.create(t,i)}var t,i,a;return t=e,(i=[{key:"release",value:function(){se.delete(this._json)}},{key:"getGravity",value:function(){var e=new Tt(0,0);return e.x=this._json.getRoot().getValueByString(Ta).getValueByString(La).getValueByString(Oa).getValueByString("X").toFloat(),e.y=this._json.getRoot().getValueByString(Ta).getValueByString(La).getValueByString(Oa).getValueByString("Y").toFloat(),e}},{key:"getWind",value:function(){var e=new Tt(0,0);return e.x=this._json.getRoot().getValueByString(Ta).getValueByString(La).getValueByString(za).getValueByString("X").toFloat(),e.y=this._json.getRoot().getValueByString(Ta).getValueByString(La).getValueByString(za).getValueByString("Y").toFloat(),e}},{key:"getFps",value:function(){return this._json.getRoot().getValueByString(Ta).getValueByString("Fps").toFloat(0)}},{key:"getSubRigCount",value:function(){return this._json.getRoot().getValueByString(Ta).getValueByString("PhysicsSettingCount").toInt()}},{key:"getTotalInputCount",value:function(){return this._json.getRoot().getValueByString(Ta).getValueByString("TotalInputCount").toInt()}},{key:"getTotalOutputCount",value:function(){return this._json.getRoot().getValueByString(Ta).getValueByString("TotalOutputCount").toInt()}},{key:"getVertexCount",value:function(){return this._json.getRoot().getValueByString(Ta).getValueByString("VertexCount").toInt()}},{key:"getNormalizationPositionMinimumValue",value:function(e){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Na).getValueByString(Va).getValueByString(Ua).toFloat()}},{key:"getNormalizationPositionMaximumValue",value:function(e){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Na).getValueByString(Va).getValueByString(qa).toFloat()}},{key:"getNormalizationPositionDefaultValue",value:function(e){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Na).getValueByString(Va).getValueByString(Za).toFloat()}},{key:"getNormalizationAngleMinimumValue",value:function(e){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Na).getValueByString(Fa).getValueByString(Ua).toFloat()}},{key:"getNormalizationAngleMaximumValue",value:function(e){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Na).getValueByString(Fa).getValueByString(qa).toFloat()}},{key:"getNormalizationAngleDefaultValue",value:function(e){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Na).getValueByString(Fa).getValueByString(Za).toFloat()}},{key:"getInputCount",value:function(e){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Wa).getVector().getSize()}},{key:"getInputWeight",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Wa).getValueByIndex(t).getValueByString(Ya).toFloat()}},{key:"getInputReflect",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Wa).getValueByIndex(t).getValueByString(Xa).toBoolean()}},{key:"getInputType",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Wa).getValueByIndex(t).getValueByString(Da).getRawString()}},{key:"getInputSourceId",value:function(e,t){return Pe.getIdManager().getId(this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Wa).getValueByIndex(t).getValueByString("Source").getValueByString("Id").getRawString())}},{key:"getOutputCount",value:function(e){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ha).getVector().getSize()}},{key:"getOutputVertexIndex",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ha).getValueByIndex(t).getValueByString("VertexIndex").toInt()}},{key:"getOutputAngleScale",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ha).getValueByIndex(t).getValueByString("Scale").toFloat()}},{key:"getOutputWeight",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ha).getValueByIndex(t).getValueByString(Ya).toFloat()}},{key:"getOutputDestinationId",value:function(e,t){return Pe.getIdManager().getId(this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ha).getValueByIndex(t).getValueByString("Destination").getValueByString("Id").getRawString())}},{key:"getOutputType",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ha).getValueByIndex(t).getValueByString(Da).getRawString()}},{key:"getOutputReflect",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ha).getValueByIndex(t).getValueByString(Xa).toBoolean()}},{key:"getParticleCount",value:function(e){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ka).getVector().getSize()}},{key:"getParticleMobility",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ka).getValueByIndex(t).getValueByString("Mobility").toFloat()}},{key:"getParticleDelay",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ka).getValueByIndex(t).getValueByString("Delay").toFloat()}},{key:"getParticleAcceleration",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ka).getValueByIndex(t).getValueByString("Acceleration").toFloat()}},{key:"getParticleRadius",value:function(e,t){return this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ka).getValueByIndex(t).getValueByString("Radius").toFloat()}},{key:"getParticlePosition",value:function(e,t){var i=new Tt(0,0);return i.x=this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ka).getValueByIndex(t).getValueByString(Va).getValueByString("X").toFloat(),i.y=this._json.getRoot().getValueByString(Ga).getValueByIndex(e).getValueByString(Ka).getValueByIndex(t).getValueByString(Va).getValueByString("Y").toFloat(),i}}])&&Ea(t.prototype,i),a&&Ea(t,a),e}();function Qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function er(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismPhysicsJson=Ja}(Ra||(Ra={}));var tr,ir="Angle",ar=function(){function e(){Qa(this,e),er(this,"_physicsRig",void 0),er(this,"_options",void 0),er(this,"_currentRigOutputs",void 0),er(this,"_previousRigOutputs",void 0),er(this,"_currentRemainTime",void 0),er(this,"_parameterCaches",void 0),er(this,"_parameterInputCaches",void 0),this._physicsRig=null,this._options=new rr,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0,this._currentRigOutputs=new r,this._previousRigOutputs=new r,this._currentRemainTime=0,this._parameterCaches=null,this._parameterInputCaches=null}var t,i,a;return t=e,a=[{key:"create",value:function(t,i){var a=new e;return a.parse(t,i),a._physicsRig.gravity.y=0,a}},{key:"delete",value:function(e){null!=e&&(e.release(),e=null)}}],(i=[{key:"parse",value:function(e,t){this._physicsRig=new Ia;var i=new Ja(e,t);this._physicsRig.gravity=i.getGravity(),this._physicsRig.wind=i.getWind(),this._physicsRig.subRigCount=i.getSubRigCount(),this._physicsRig.fps=i.getFps(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,Pa,!0),this._physicsRig.inputs.updateSize(i.getTotalInputCount(),Ba,!0),this._physicsRig.outputs.updateSize(i.getTotalOutputCount(),ja,!0),this._physicsRig.particles.updateSize(i.getVertexCount(),Ma,!0),this._currentRigOutputs.clear(),this._previousRigOutputs.clear();for(var a=0,r=0,n=0,o=0;o<this._physicsRig.settings.getSize();++o){this._physicsRig.settings.at(o).normalizationPosition.minimum=i.getNormalizationPositionMinimumValue(o),this._physicsRig.settings.at(o).normalizationPosition.maximum=i.getNormalizationPositionMaximumValue(o),this._physicsRig.settings.at(o).normalizationPosition.defalut=i.getNormalizationPositionDefaultValue(o),this._physicsRig.settings.at(o).normalizationAngle.minimum=i.getNormalizationAngleMinimumValue(o),this._physicsRig.settings.at(o).normalizationAngle.maximum=i.getNormalizationAngleMaximumValue(o),this._physicsRig.settings.at(o).normalizationAngle.defalut=i.getNormalizationAngleDefaultValue(o),this._physicsRig.settings.at(o).inputCount=i.getInputCount(o),this._physicsRig.settings.at(o).baseInputIndex=a;for(var s=0;s<this._physicsRig.settings.at(o).inputCount;++s)this._physicsRig.inputs.at(a+s).sourceParameterIndex=-1,this._physicsRig.inputs.at(a+s).weight=i.getInputWeight(o,s),this._physicsRig.inputs.at(a+s).reflect=i.getInputReflect(o,s),"X"==i.getInputType(o,s)?(this._physicsRig.inputs.at(a+s).type=va.CubismPhysicsSource_X,this._physicsRig.inputs.at(a+s).getNormalizedParameterValue=or):"Y"==i.getInputType(o,s)?(this._physicsRig.inputs.at(a+s).type=va.CubismPhysicsSource_Y,this._physicsRig.inputs.at(a+s).getNormalizedParameterValue=sr):i.getInputType(o,s)==ir&&(this._physicsRig.inputs.at(a+s).type=va.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(a+s).getNormalizedParameterValue=cr),this._physicsRig.inputs.at(a+s).source.targetType=ma.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(a+s).source.id=i.getInputSourceId(o,s);a+=this._physicsRig.settings.at(o).inputCount,this._physicsRig.settings.at(o).outputCount=i.getOutputCount(o),this._physicsRig.settings.at(o).baseOutputIndex=r;var c=new nr;c.outputs.resize(this._physicsRig.settings.at(o).outputCount);var l=new nr;l.outputs.resize(this._physicsRig.settings.at(o).outputCount);for(var u=0;u<this._physicsRig.settings.at(o).outputCount;++u)c.outputs.set(u,0),l.outputs.set(u,0),this._physicsRig.outputs.at(r+u).destinationParameterIndex=-1,this._physicsRig.outputs.at(r+u).vertexIndex=i.getOutputVertexIndex(o,u),this._physicsRig.outputs.at(r+u).angleScale=i.getOutputAngleScale(o,u),this._physicsRig.outputs.at(r+u).weight=i.getOutputWeight(o,u),this._physicsRig.outputs.at(r+u).destination.targetType=ma.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(r+u).destination.id=i.getOutputDestinationId(o,u),"X"==i.getOutputType(o,u)?(this._physicsRig.outputs.at(r+u).type=va.CubismPhysicsSource_X,this._physicsRig.outputs.at(r+u).getValue=lr,this._physicsRig.outputs.at(r+u).getScale=dr):"Y"==i.getOutputType(o,u)?(this._physicsRig.outputs.at(r+u).type=va.CubismPhysicsSource_Y,this._physicsRig.outputs.at(r+u).getValue=ur,this._physicsRig.outputs.at(r+u).getScale=gr):i.getOutputType(o,u)==ir&&(this._physicsRig.outputs.at(r+u).type=va.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(r+u).getValue=fr,this._physicsRig.outputs.at(r+u).getScale=br),this._physicsRig.outputs.at(r+u).reflect=i.getOutputReflect(o,u);this._currentRigOutputs.pushBack(c),this._previousRigOutputs.pushBack(l),r+=this._physicsRig.settings.at(o).outputCount,this._physicsRig.settings.at(o).particleCount=i.getParticleCount(o),this._physicsRig.settings.at(o).baseParticleIndex=n;for(var f=0;f<this._physicsRig.settings.at(o).particleCount;++f)this._physicsRig.particles.at(n+f).mobility=i.getParticleMobility(o,f),this._physicsRig.particles.at(n+f).delay=i.getParticleDelay(o,f),this._physicsRig.particles.at(n+f).acceleration=i.getParticleAcceleration(o,f),this._physicsRig.particles.at(n+f).radius=i.getParticleRadius(o,f),this._physicsRig.particles.at(n+f).position=i.getParticlePosition(o,f);n+=this._physicsRig.settings.at(o).particleCount}this.initialize(),i.release(),i=void 0,i=null}},{key:"stabilization",value:function(e){var t,i,a,r,n,o,s,c,l,u,f,h,d,g,b,m,_=new Tt;f=e.getModel().parameters.values,h=e.getModel().parameters.maximumValues,d=e.getModel().parameters.minimumValues,g=e.getModel().parameters.defaultValues,(null!==(b=null===(t=this._parameterCaches)||void 0===t?void 0:t.length)&&void 0!==b?b:0)<e.getParameterCount()&&(this._parameterCaches=new Float32Array(e.getParameterCount())),(null!==(m=null===(i=this._parameterInputCaches)||void 0===i?void 0:i.length)&&void 0!==m?m:0)<e.getParameterCount()&&(this._parameterInputCaches=new Float32Array(e.getParameterCount()));for(var v=0;v<e.getParameterCount();++v)this._parameterCaches[v]=f[v],this._parameterInputCaches[v]=f[v];for(var p=0;p<this._physicsRig.subRigCount;++p){a={angle:0},_.x=0,_.y=0,s=this._physicsRig.settings.at(p),c=this._physicsRig.inputs.get(s.baseInputIndex),l=this._physicsRig.outputs.get(s.baseOutputIndex),u=this._physicsRig.particles.get(s.baseParticleIndex);for(var y=0;y<s.inputCount;++y)r=c[y].weight/100,-1==c[y].sourceParameterIndex&&(c[y].sourceParameterIndex=e.getParameterIndex(c[y].source.id)),c[y].getNormalizedParameterValue(_,a,f[c[y].sourceParameterIndex],d[c[y].sourceParameterIndex],h[c[y].sourceParameterIndex],g[c[y].sourceParameterIndex],s.normalizationPosition,s.normalizationAngle,c[y].reflect,r),this._parameterCaches[c[y].sourceParameterIndex]=f[c[y].sourceParameterIndex];n=Ut.degreesToRadian(-a.angle),_.x=_.x*Ut.cos(n)-_.y*Ut.sin(n),_.y=_.x*Ut.sin(n)+_.y*Ut.cos(n),_r(u,s.particleCount,_,a.angle,this._options.wind,.001*s.normalizationPosition.maximum);for(var k=0;k<s.outputCount;++k){var w=l[k].vertexIndex;if(-1==l[k].destinationParameterIndex&&(l[k].destinationParameterIndex=e.getParameterIndex(l[k].destination.id)),!(w<1||w>=s.particleCount)){var S=new Tt;S=u[w].position.substract(u[w-1].position),o=l[k].getValue(S,u,w,l[k].reflect,this._options.gravity),this._currentRigOutputs.at(p).outputs.set(k,o),this._previousRigOutputs.at(p).outputs.set(k,o);var A=l[k].destinationParameterIndex,C=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(f.subarray(A))):f.slice(A);vr(C,d[A],h[A],o,l[k]);for(var x=A,M=0;x<this._parameterCaches.length;x++,M++)f[x]=this._parameterCaches[x]=C[M]}}}}},{key:"evaluate",value:function(e,t){var i,a,r,n,o,s,c,l,u,f,h=new Tt;if(!(0>=t)){var d,g,b,m,_,v,p;if(this._currentRemainTime+=t,this._currentRemainTime>5&&(this._currentRemainTime=0),d=e.getModel().parameters.values,g=e.getModel().parameters.maximumValues,b=e.getModel().parameters.minimumValues,m=e.getModel().parameters.defaultValues,(null!==(v=null===(i=this._parameterCaches)||void 0===i?void 0:i.length)&&void 0!==v?v:0)<e.getParameterCount()&&(this._parameterCaches=new Float32Array(e.getParameterCount())),(null!==(p=null===(a=this._parameterInputCaches)||void 0===a?void 0:a.length)&&void 0!==p?p:0)<e.getParameterCount()){this._parameterInputCaches=new Float32Array(e.getParameterCount());for(var y=0;y<e.getParameterCount();++y)this._parameterInputCaches[y]=d[y]}for(_=this._physicsRig.fps>0?1/this._physicsRig.fps:t;this._currentRemainTime>=_;){for(var k=0;k<this._physicsRig.subRigCount;++k){c=this._physicsRig.settings.at(k),u=this._physicsRig.outputs.get(c.baseOutputIndex);for(var w=0;w<c.outputCount;++w)this._previousRigOutputs.at(k).outputs.set(w,this._currentRigOutputs.at(k).outputs.at(w))}for(var S=_/this._currentRemainTime,A=0;A<e.getParameterCount();++A)this._parameterCaches[A]=this._parameterInputCaches[A]*(1-S)+d[A]*S,this._parameterInputCaches[A]=this._parameterCaches[A];for(var C=0;C<this._physicsRig.subRigCount;++C){r={angle:0},h.x=0,h.y=0,c=this._physicsRig.settings.at(C),l=this._physicsRig.inputs.get(c.baseInputIndex),u=this._physicsRig.outputs.get(c.baseOutputIndex),f=this._physicsRig.particles.get(c.baseParticleIndex);for(var x=0;x<c.inputCount;++x)n=l[x].weight/100,-1==l[x].sourceParameterIndex&&(l[x].sourceParameterIndex=e.getParameterIndex(l[x].source.id)),l[x].getNormalizedParameterValue(h,r,this._parameterCaches[l[x].sourceParameterIndex],b[l[x].sourceParameterIndex],g[l[x].sourceParameterIndex],m[l[x].sourceParameterIndex],c.normalizationPosition,c.normalizationAngle,l[x].reflect,n);o=Ut.degreesToRadian(-r.angle),h.x=h.x*Ut.cos(o)-h.y*Ut.sin(o),h.y=h.x*Ut.sin(o)+h.y*Ut.cos(o),mr(f,c.particleCount,h,r.angle,this._options.wind,.001*c.normalizationPosition.maximum,_,5);for(var M=0;M<c.outputCount;++M){var P=u[M].vertexIndex;if(-1==u[M].destinationParameterIndex&&(u[M].destinationParameterIndex=e.getParameterIndex(u[M].destination.id)),!(P<1||P>=c.particleCount)){var B=new Tt;B.x=f[P].position.x-f[P-1].position.x,B.y=f[P].position.y-f[P-1].position.y,s=u[M].getValue(B,f,P,u[M].reflect,this._options.gravity),this._currentRigOutputs.at(C).outputs.set(M,s);var j=u[M].destinationParameterIndex,I=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(this._parameterCaches.subarray(j))):this._parameterCaches.slice(j);vr(I,b[j],g[j],s,u[M]);for(var E=j,R=0;E<this._parameterCaches.length;E++,R++)this._parameterCaches[E]=I[R]}}}this._currentRemainTime-=_}var V=this._currentRemainTime/_;this.interpolate(e,V)}}},{key:"interpolate",value:function(e,t){var i,a,r,n,o;r=e.getModel().parameters.values,n=e.getModel().parameters.maximumValues,o=e.getModel().parameters.minimumValues;for(var s=0;s<this._physicsRig.subRigCount;++s){a=this._physicsRig.settings.at(s),i=this._physicsRig.outputs.get(a.baseOutputIndex);for(var c=0;c<a.outputCount;++c)if(-1!=i[c].destinationParameterIndex){var l=i[c].destinationParameterIndex,u=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(r.subarray(l))):r.slice(l);vr(u,o[l],n[l],this._previousRigOutputs.at(s).outputs.at(c)*(1-t)+this._currentRigOutputs.at(s).outputs.at(c)*t,i[c]);for(var f=l,h=0;f<r.length;f++,h++)r[f]=u[h]}}}},{key:"setOptions",value:function(e){this._options=e}},{key:"getOption",value:function(){return this._options}},{key:"release",value:function(){this._physicsRig=void 0,this._physicsRig=null}},{key:"initialize",value:function(){for(var e,t,i,a=0;a<this._physicsRig.subRigCount;++a){t=this._physicsRig.settings.at(a),(e=this._physicsRig.particles.get(t.baseParticleIndex))[0].initialPosition=new Tt(0,0),e[0].lastPosition=new Tt(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new Tt(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new Tt(0,0),e[0].force=new Tt(0,0);for(var r=1;r<t.particleCount;++r)(i=new Tt(0,0)).y=e[r].radius,e[r].initialPosition=new Tt(e[r-1].initialPosition.x+i.x,e[r-1].initialPosition.y+i.y),e[r].position=new Tt(e[r].initialPosition.x,e[r].initialPosition.y),e[r].lastPosition=new Tt(e[r].initialPosition.x,e[r].initialPosition.y),e[r].lastGravity=new Tt(0,-1),e[r].lastGravity.y*=-1,e[r].velocity=new Tt(0,0),e[r].force=new Tt(0,0)}}}])&&$a(t.prototype,i),a&&$a(t,a),e}(),rr=function e(){Qa(this,e),er(this,"gravity",void 0),er(this,"wind",void 0),this.gravity=new Tt(0,0),this.wind=new Tt(0,0)},nr=function e(){Qa(this,e),er(this,"outputs",void 0),this.outputs=new r(0)};function or(e,t,i,a,r,n,o,s,c,l){e.x+=pr(i,a,r,n,o.minimum,o.maximum,o.defalut,c)*l}function sr(e,t,i,a,r,n,o,s,c,l){e.y+=pr(i,a,r,n,o.minimum,o.maximum,o.defalut,c)*l}function cr(e,t,i,a,r,n,o,s,c,l){t.angle+=pr(i,a,r,n,s.minimum,s.maximum,s.defalut,c)*l}function lr(e,t,i,a,r){var n=e.x;return a&&(n*=-1),n}function ur(e,t,i,a,r){var n=e.y;return a&&(n*=-1),n}function fr(e,t,i,a,r){var n;return r=i>=2?t[i-1].position.substract(t[i-2].position):r.multiplyByScaler(-1),n=Ut.directionToRadian(r,e),a&&(n*=-1),n}function hr(e,t){return Ut.min(e,t)+function(e,t){var i=Ut.max(e,t),a=Ut.min(e,t);return Ut.abs(i-a)}(e,t)/2}function dr(e,t){return JSON.parse(JSON.stringify(e.x))}function gr(e,t){return JSON.parse(JSON.stringify(e.y))}function br(e,t){return JSON.parse(JSON.stringify(t))}function mr(e,t,i,a,r,n,o,s){var c,l,u,f,h=new Tt(0,0),d=new Tt(0,0),g=new Tt(0,0),b=new Tt(0,0);e[0].position=new Tt(i.x,i.y),c=Ut.degreesToRadian(a),(f=Ut.radianToDirection(c)).normalize();for(var m=1;m<t;++m)e[m].force=f.multiplyByScaler(e[m].acceleration).add(r),e[m].lastPosition=new Tt(e[m].position.x,e[m].position.y),l=e[m].delay*o*30,h=e[m].position.substract(e[m-1].position),u=Ut.directionToRadian(e[m].lastGravity,f)/s,h.x=Ut.cos(u)*h.x-h.y*Ut.sin(u),h.y=Ut.sin(u)*h.x+h.y*Ut.cos(u),e[m].position=e[m-1].position.add(h),d=e[m].velocity.multiplyByScaler(l),g=e[m].force.multiplyByScaler(l).multiplyByScaler(l),e[m].position=e[m].position.add(d).add(g),(b=e[m].position.substract(e[m-1].position)).normalize(),e[m].position=e[m-1].position.add(b.multiplyByScaler(e[m].radius)),Ut.abs(e[m].position.x)<n&&(e[m].position.x=0),0!=l&&(e[m].velocity=e[m].position.substract(e[m].lastPosition),e[m].velocity=e[m].velocity.divisionByScalar(l),e[m].velocity=e[m].velocity.multiplyByScaler(e[m].mobility)),e[m].force=new Tt(0,0),e[m].lastGravity=new Tt(f.x,f.y)}function _r(e,t,i,a,r,n){var o,s,c=new Tt(0,0);e[0].position=new Tt(i.x,i.y),o=Ut.degreesToRadian(a),(s=Ut.radianToDirection(o)).normalize();for(var l=1;l<t;++l)e[l].force=s.multiplyByScaler(e[l].acceleration).add(r),e[l].lastPosition=new Tt(e[l].position.x,e[l].position.y),e[l].velocity=new Tt(0,0),(c=e[l].force).normalize(),c=c.multiplyByScaler(e[l].radius),e[l].position=e[l-1].position.add(c),Ut.abs(e[l].position.x)<n&&(e[l].position.x=0),e[l].force=new Tt(0,0),e[l].lastGravity=new Tt(s.x,s.y)}function vr(e,t,i,a,r){var n,o;(n=a*r.getScale(r.translationScale,r.angleScale))<t?(n<r.valueBelowMinimum&&(r.valueBelowMinimum=n),n=t):n>i&&(n>r.valueExceededMaximum&&(r.valueExceededMaximum=n),n=i),(o=r.weight/100)>=1||(n=e[0]*(1-o)+n*o),e[0]=n}function pr(e,t,i,a,r,n,o,s){var c=0,l=Ut.max(i,t);l<e&&(e=l);var u=Ut.min(i,t);u>e&&(e=u);var f=Ut.min(r,n),h=Ut.max(r,n),d=o,g=hr(u,l),b=e-g;switch(function(e){var t=0;return e>0?t=1:e<0&&(t=-1),t}(b)){case 1:var m=l-g;0!=m&&(c=b*((h-d)/m),c+=d);break;case-1:var _=u-g;0!=_&&(c=b*((f-d)/_),c+=d);break;case 0:c=d}return s?c:-1*c}function yr(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function kr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismPhysics=ar,e.Options=rr}(tr||(tr={}));var wr,Sr=function(){function e(t,i,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),kr(this,"x",void 0),kr(this,"y",void 0),kr(this,"width",void 0),kr(this,"height",void 0),this.x=t,this.y=i,this.width=a,this.height=r}var t,i,a;return t=e,(i=[{key:"getCenterX",value:function(){return this.x+.5*this.width}},{key:"getCenterY",value:function(){return this.y+.5*this.height}},{key:"getRight",value:function(){return this.x+this.width}},{key:"getBottom",value:function(){return this.y+this.height}},{key:"setRect",value:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}},{key:"expand",value:function(e,t){this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t}}])&&yr(t.prototype,i),a&&yr(t,a),e}();function Ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xr(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Mr(e,t,i){return t&&xr(e.prototype,t),i&&xr(e,i),e}function Pr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Br(e,t,i){return Br="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jr(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(i||e):r.value}},Br(e,t,i||e)}function jr(e){return jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jr(e)}function Ir(e,t){return!t||"object"!==function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)&&"function"!=typeof t?Ar(e):t}function Er(e,t){return Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Er(e,t)}function Rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=jr(e);if(t){var r=jr(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return Ir(this,i)}}!function(e){e.csmRect=Sr}(wr||(wr={}));var Vr,Fr,Dr,Tr,Lr,Or=function(){function e(){Cr(this,e),Pr(this,"_currentMaskRenderTexture",void 0),Pr(this,"_maskRenderTextures",void 0),Pr(this,"_maskColorBuffers",void 0),Pr(this,"_currentFrameNo",void 0),Pr(this,"_channelColors",void 0),Pr(this,"_maskTexture",void 0),Pr(this,"_clippingContextListForMask",void 0),Pr(this,"_clippingContextListForDraw",void 0),Pr(this,"_clippingMaskBufferSize",void 0),Pr(this,"_renderTextureCount",void 0),Pr(this,"_tmpMatrix",void 0),Pr(this,"_tmpMatrixForMask",void 0),Pr(this,"_tmpMatrixForDraw",void 0),Pr(this,"_tmpBoundsOnModel",void 0),Pr(this,"_clearedFrameBufferflags",void 0),Pr(this,"gl",void 0),this._currentMaskRenderTexture=null,this._maskColorBuffers=null,this._currentFrameNo=0,this._renderTextureCount=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new r,this._clippingContextListForDraw=new r,this._channelColors=new r,this._tmpBoundsOnModel=new Sr,this._tmpMatrix=new p,this._tmpMatrixForMask=new p,this._tmpMatrixForDraw=new p,this._maskTexture=null;var t=new M;t.R=1,t.G=0,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new M).R=0,t.G=1,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new M).R=0,t.G=0,t.B=1,t.A=0,this._channelColors.pushBack(t),(t=new M).R=0,t.G=0,t.B=0,t.A=1,this._channelColors.pushBack(t)}return Mr(e,[{key:"getChannelFlagAsColor",value:function(e){return this._channelColors.at(e)}},{key:"getMaskRenderTexture",value:function(){if(this._maskTexture&&null!=this._maskTexture.textures)this._maskTexture.frameNo=this._currentFrameNo;else{null!=this._maskRenderTextures&&this._maskRenderTextures.clear(),this._maskRenderTextures=new r,null!=this._maskColorBuffers&&this._maskColorBuffers.clear(),this._maskColorBuffers=new r;for(var e=this._clippingMaskBufferSize,t=0;t<this._renderTextureCount;t++)this._maskColorBuffers.pushBack(this.gl.createTexture()),this.gl.bindTexture(this.gl.TEXTURE_2D,this._maskColorBuffers.at(t)),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this._maskRenderTextures.pushBack(this.gl.createFramebuffer()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTextures.at(t)),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._maskColorBuffers.at(t),0);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Dr),this._maskTexture=new zr(this._currentFrameNo,this._maskRenderTextures)}return this._maskTexture.textures}},{key:"setGL",value:function(e){this.gl=e}},{key:"calcClippedDrawTotalBounds",value:function(e,t){for(var i=Number.MAX_VALUE,a=Number.MAX_VALUE,r=Number.MIN_VALUE,n=Number.MIN_VALUE,o=t._clippedDrawableIndexList.length,s=0;s<o;s++){for(var c=t._clippedDrawableIndexList[s],l=e.getDrawableVertexCount(c),u=e.getDrawableVertices(c),f=Number.MAX_VALUE,h=Number.MAX_VALUE,d=-Number.MAX_VALUE,g=-Number.MAX_VALUE,b=l*Ae.vertexStep,m=Ae.vertexOffset;m<b;m+=Ae.vertexStep){var _=u[m],v=u[m+1];_<f&&(f=_),_>d&&(d=_),v<h&&(h=v),v>g&&(g=v)}if(f!=Number.MAX_VALUE)if(f<i&&(i=f),h<a&&(a=h),d>r&&(r=d),g>n&&(n=g),i==Number.MAX_VALUE)t._allClippedDrawRect.x=0,t._allClippedDrawRect.y=0,t._allClippedDrawRect.width=0,t._allClippedDrawRect.height=0,t._isUsing=!1;else{t._isUsing=!0;var p=r-i,y=n-a;t._allClippedDrawRect.x=i,t._allClippedDrawRect.y=a,t._allClippedDrawRect.width=p,t._allClippedDrawRect.height=y}}}},{key:"release",value:function(){for(var e=0;e<this._clippingContextListForMask.getSize();e++)this._clippingContextListForMask.at(e)&&(this._clippingContextListForMask.at(e).release(),this._clippingContextListForMask.set(e,void 0)),this._clippingContextListForMask.set(e,null);this._clippingContextListForMask=null;for(var t=0;t<this._clippingContextListForDraw.getSize();t++)this._clippingContextListForDraw.set(t,null);if(this._clippingContextListForDraw=null,this._maskTexture){for(var i=0;i<this._maskTexture.textures.getSize();i++)this.gl.deleteFramebuffer(this._maskTexture.textures.at(i));this._maskTexture.textures.clear(),this._maskTexture.textures=null,this._maskTexture=null}for(var a=0;a<this._channelColors.getSize();a++)this._channelColors.set(a,null);if(this._channelColors=null,null!=this._maskColorBuffers){for(var r=0;r<this._maskColorBuffers.getSize();r++)this.gl.deleteTexture(this._maskColorBuffers.at(r));this._maskColorBuffers.clear()}this._maskColorBuffers=null,null!=this._maskRenderTextures&&this._maskRenderTextures.clear(),this._maskRenderTextures=null,null!=this._clearedFrameBufferflags&&this._clearedFrameBufferflags.clear(),this._clearedFrameBufferflags=null}},{key:"initialize",value:function(e,t,i,a,n){n%1!=0&&(I("The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer."),n=~~n),n<1&&I("The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1."),this._renderTextureCount=n<1?1:n,this._clearedFrameBufferflags=new r(this._renderTextureCount);for(var o=0;o<t;o++)if(a[o]<=0)this._clippingContextListForDraw.pushBack(null);else{var s=this.findSameClip(i[o],a[o]);null==s&&(s=new Gr(this,i[o],a[o]),this._clippingContextListForMask.pushBack(s)),s.addClippedDrawable(o),this._clippingContextListForDraw.pushBack(s)}}},{key:"setupClippingContext",value:function(e,t){this._currentFrameNo++;for(var i=0,a=0;a<this._clippingContextListForMask.getSize();a++){var n=this._clippingContextListForMask.at(a);this.calcClippedDrawTotalBounds(e,n),n._isUsing&&i++}if(i>0){this.setupLayoutBounds(t.isUsingHighPrecisionMask()?0:i),t.isUsingHighPrecisionMask()||(this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._currentMaskRenderTexture=this.getMaskRenderTexture().at(0),t.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),this._clearedFrameBufferflags.getSize()!=this._renderTextureCount&&(this._clearedFrameBufferflags.clear(),this._clearedFrameBufferflags=new r(this._renderTextureCount));for(var o=0;o<this._clearedFrameBufferflags.getSize();o++)this._clearedFrameBufferflags.set(o,!1);for(var s=0;s<this._clippingContextListForMask.getSize();s++){var c=this._clippingContextListForMask.at(s),l=c._allClippedDrawRect,u=c._layoutBounds,f=.05,h=0,d=0,g=this.getMaskRenderTexture().at(c._bufferIndex);if(this._currentMaskRenderTexture==g||t.isUsingHighPrecisionMask()||(this._currentMaskRenderTexture=g,t.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),t.isUsingHighPrecisionMask()){var b=e.getPixelsPerUnit(),m=c.getClippingManager()._clippingMaskBufferSize,_=u.width*m,v=u.height*m;this._tmpBoundsOnModel.setRect(l),this._tmpBoundsOnModel.width*b>_?(this._tmpBoundsOnModel.expand(l.width*f,0),h=u.width/this._tmpBoundsOnModel.width):h=b/_,this._tmpBoundsOnModel.height*b>v?(this._tmpBoundsOnModel.expand(0,l.height*f),d=u.height/this._tmpBoundsOnModel.height):d=b/v}else this._tmpBoundsOnModel.setRect(l),this._tmpBoundsOnModel.expand(l.width*f,l.height*f),h=u.width/this._tmpBoundsOnModel.width,d=u.height/this._tmpBoundsOnModel.height;if(this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(u.x,u.y),this._tmpMatrix.scaleRelative(h,d),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(u.x,u.y),this._tmpMatrix.scaleRelative(h,d),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),c._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),c._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray()),!t.isUsingHighPrecisionMask())for(var p=c._clippingIdCount,y=0;y<p;y++){var k=c._clippingIdList[y];e.getDrawableDynamicFlagVertexPositionsDidChange(k)&&(t.setIsCulling(0!=e.getDrawableCulling(k)),this._clearedFrameBufferflags.at(c._bufferIndex)||(this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this._clearedFrameBufferflags.set(c._bufferIndex,!0)),t.setClippingContextBufferForMask(c),t.drawMesh(e.getDrawableTextureIndex(k),e.getDrawableVertexIndexCount(k),e.getDrawableVertexCount(k),e.getDrawableVertexIndices(k),e.getDrawableVertices(k),e.getDrawableVertexUvs(k),e.getMultiplyColor(k),e.getScreenColor(k),e.getDrawableOpacity(k),S.CubismBlendMode_Normal,!1))}}t.isUsingHighPrecisionMask()||(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Dr),t.setClippingContextBufferForMask(null),this.gl.viewport(Fr[0],Fr[1],Fr[2],Fr[3]))}}},{key:"findSameClip",value:function(e,t){for(var i=0;i<this._clippingContextListForMask.getSize();i++){var a=this._clippingContextListForMask.at(i),r=a._clippingIdCount;if(r==t){for(var n=0,o=0;o<r;o++)for(var s=a._clippingIdList[o],c=0;c<r;c++)if(e[c]==s){n++;break}if(n==r)return a}}return null}},{key:"setupLayoutBounds",value:function(e){var t=this._renderTextureCount<=1?36:32*this._renderTextureCount;if(e<=0||e>t){e>t&&E("not supported mask count : {0}\n[Details] render texture count : {1}, mask count : {2}",e-t,this._renderTextureCount,e);for(var i=0;i<this._clippingContextListForMask.getSize();i++){var a=this._clippingContextListForMask.at(i);a._layoutChannelNo=0,a._layoutBounds.x=0,a._layoutBounds.y=0,a._layoutBounds.width=1,a._layoutBounds.height=1,a._bufferIndex=0}}else{var r=this._renderTextureCount<=1?9:8,n=e/this._renderTextureCount,o=e%this._renderTextureCount;o=~~o;var s=(n=~~n)/4,c=n%4;s=~~s,c=~~c;for(var l=0,u=0;u<this._renderTextureCount;u++)for(var f=0;f<4;f++){var h=s+(f<c?1:0);if(h<r&&f==(c+1>=4?0:c+1)&&(h+=u<o?1:0),0==h);else if(1==h){var d=this._clippingContextListForMask.at(l++);d._layoutChannelNo=f,d._layoutBounds.x=0,d._layoutBounds.y=0,d._layoutBounds.width=1,d._layoutBounds.height=1,d._bufferIndex=u}else if(2==h)for(var g=0;g<h;g++){var b=g%2;b=~~b;var m=this._clippingContextListForMask.at(l++);m._layoutChannelNo=f,m._layoutBounds.x=.5*b,m._layoutBounds.y=0,m._layoutBounds.width=.5,m._layoutBounds.height=1,m._bufferIndex=u}else if(h<=4)for(var _=0;_<h;_++){var v=_%2,p=_/2;v=~~v,p=~~p;var y=this._clippingContextListForMask.at(l++);y._layoutChannelNo=f,y._layoutBounds.x=.5*v,y._layoutBounds.y=.5*p,y._layoutBounds.width=.5,y._layoutBounds.height=.5,y._bufferIndex=u}else if(h<=r)for(var k=0;k<h;k++){var w=k%3,S=k/3;w=~~w,S=~~S;var A=this._clippingContextListForMask.at(l++);A._layoutChannelNo=f,A._layoutBounds.x=w/3,A._layoutBounds.y=S/3,A._layoutBounds.width=1/3,A._layoutBounds.height=1/3,A._bufferIndex=u}else{E("not supported mask count : {0}\n[Details] render texture count : {1}, mask count : {2}",e-t,this._renderTextureCount,e);for(var C=0;C<h;C++){var x=this._clippingContextListForMask.at(l++);x._layoutChannelNo=0,x._layoutBounds.x=0,x._layoutBounds.y=0,x._layoutBounds.width=1,x._layoutBounds.height=1,x._bufferIndex=0}}}}}},{key:"getColorBuffer",value:function(){return this._maskColorBuffers}},{key:"getClippingContextListForDraw",value:function(){return this._clippingContextListForDraw}},{key:"getClippingMaskCount",value:function(){return this._clippingContextListForMask.getSize()}},{key:"setClippingMaskBufferSize",value:function(e){this._clippingMaskBufferSize=e}},{key:"getClippingMaskBufferSize",value:function(){return this._clippingMaskBufferSize}},{key:"getRenderTextureCount",value:function(){return this._renderTextureCount}}]),e}(),zr=function e(t,i){Cr(this,e),Pr(this,"frameNo",void 0),Pr(this,"textures",void 0),this.frameNo=t,this.textures=i},Gr=function(){function e(t,i,a){Cr(this,e),Pr(this,"_isUsing",void 0),Pr(this,"_clippingIdList",void 0),Pr(this,"_clippingIdCount",void 0),Pr(this,"_layoutChannelNo",void 0),Pr(this,"_layoutBounds",void 0),Pr(this,"_allClippedDrawRect",void 0),Pr(this,"_matrixForMask",void 0),Pr(this,"_matrixForDraw",void 0),Pr(this,"_clippedDrawableIndexList",void 0),Pr(this,"_bufferIndex",void 0),Pr(this,"_owner",void 0),this._owner=t,this._clippingIdList=i,this._clippingIdCount=a,this._allClippedDrawRect=new Sr,this._layoutBounds=new Sr,this._clippedDrawableIndexList=[],this._matrixForMask=new p,this._matrixForDraw=new p,this._bufferIndex=0}return Mr(e,[{key:"release",value:function(){null!=this._layoutBounds&&(this._layoutBounds=null),null!=this._allClippedDrawRect&&(this._allClippedDrawRect=null),null!=this._clippedDrawableIndexList&&(this._clippedDrawableIndexList=null)}},{key:"addClippedDrawable",value:function(e){this._clippedDrawableIndexList.push(e)}},{key:"getClippingManager",value:function(){return this._owner}},{key:"setGl",value:function(e){this._owner.setGL(e)}}]),e}(),Nr=function(){function e(){Cr(this,e),Pr(this,"_lastArrayBufferBinding",void 0),Pr(this,"_lastElementArrayBufferBinding",void 0),Pr(this,"_lastProgram",void 0),Pr(this,"_lastActiveTexture",void 0),Pr(this,"_lastTexture0Binding2D",void 0),Pr(this,"_lastTexture1Binding2D",void 0),Pr(this,"_lastVertexAttribArrayEnabled",void 0),Pr(this,"_lastScissorTest",void 0),Pr(this,"_lastBlend",void 0),Pr(this,"_lastStencilTest",void 0),Pr(this,"_lastDepthTest",void 0),Pr(this,"_lastCullFace",void 0),Pr(this,"_lastFrontFace",void 0),Pr(this,"_lastColorMask",void 0),Pr(this,"_lastBlending",void 0),Pr(this,"_lastFBO",void 0),Pr(this,"_lastViewport",void 0),Pr(this,"gl",void 0),this._lastVertexAttribArrayEnabled=new Array(4),this._lastColorMask=new Array(4),this._lastBlending=new Array(4),this._lastViewport=new Array(4)}return Mr(e,[{key:"setGlEnable",value:function(e,t){t?this.gl.enable(e):this.gl.disable(e)}},{key:"setGlEnableVertexAttribArray",value:function(e,t){t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e)}},{key:"save",value:function(){null!=this.gl?(this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING),this._lastElementArrayBufferBinding=this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING),this._lastProgram=this.gl.getParameter(this.gl.CURRENT_PROGRAM),this._lastActiveTexture=this.gl.getParameter(this.gl.ACTIVE_TEXTURE),this.gl.activeTexture(this.gl.TEXTURE1),this._lastTexture1Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this.gl.activeTexture(this.gl.TEXTURE0),this._lastTexture0Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._lastVertexAttribArrayEnabled[0]=this.gl.getVertexAttrib(0,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[1]=this.gl.getVertexAttrib(1,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[2]=this.gl.getVertexAttrib(2,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[3]=this.gl.getVertexAttrib(3,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastScissorTest=this.gl.isEnabled(this.gl.SCISSOR_TEST),this._lastStencilTest=this.gl.isEnabled(this.gl.STENCIL_TEST),this._lastDepthTest=this.gl.isEnabled(this.gl.DEPTH_TEST),this._lastCullFace=this.gl.isEnabled(this.gl.CULL_FACE),this._lastBlend=this.gl.isEnabled(this.gl.BLEND),this._lastFrontFace=this.gl.getParameter(this.gl.FRONT_FACE),this._lastColorMask=this.gl.getParameter(this.gl.COLOR_WRITEMASK),this._lastBlending[0]=this.gl.getParameter(this.gl.BLEND_SRC_RGB),this._lastBlending[1]=this.gl.getParameter(this.gl.BLEND_DST_RGB),this._lastBlending[2]=this.gl.getParameter(this.gl.BLEND_SRC_ALPHA),this._lastBlending[3]=this.gl.getParameter(this.gl.BLEND_DST_ALPHA),this._lastFBO=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this._lastViewport=this.gl.getParameter(this.gl.VIEWPORT)):E("'gl' is null. WebGLRenderingContext is required.\nPlease call 'CubimRenderer_WebGL.startUp' function.")}},{key:"restore",value:function(){null!=this.gl?(this.gl.useProgram(this._lastProgram),this.setGlEnableVertexAttribArray(0,this._lastVertexAttribArrayEnabled[0]),this.setGlEnableVertexAttribArray(1,this._lastVertexAttribArrayEnabled[1]),this.setGlEnableVertexAttribArray(2,this._lastVertexAttribArrayEnabled[2]),this.setGlEnableVertexAttribArray(3,this._lastVertexAttribArrayEnabled[3]),this.setGlEnable(this.gl.SCISSOR_TEST,this._lastScissorTest),this.setGlEnable(this.gl.STENCIL_TEST,this._lastStencilTest),this.setGlEnable(this.gl.DEPTH_TEST,this._lastDepthTest),this.setGlEnable(this.gl.CULL_FACE,this._lastCullFace),this.setGlEnable(this.gl.BLEND,this._lastBlend),this.gl.frontFace(this._lastFrontFace),this.gl.colorMask(this._lastColorMask[0],this._lastColorMask[1],this._lastColorMask[2],this._lastColorMask[3]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._lastArrayBufferBinding),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._lastElementArrayBufferBinding),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture1Binding2D),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture0Binding2D),this.gl.activeTexture(this._lastActiveTexture),this.gl.blendFuncSeparate(this._lastBlending[0],this._lastBlending[1],this._lastBlending[2],this._lastBlending[3])):E("'gl' is null. WebGLRenderingContext is required.\nPlease call 'CubimRenderer_WebGL.startUp' function.")}},{key:"setGl",value:function(e){this.gl=e}}]),e}(),Ur=function(){function e(){Cr(this,e),Pr(this,"_shaderSets",void 0),Pr(this,"gl",void 0),this._shaderSets=new r}return Mr(e,[{key:"release",value:function(){this.releaseShaderProgram()}},{key:"setupShaderProgram",value:function(e,t,i,a,r,n,o,s,c,l,u,f,h,d,g){var b,m,_,v;if(h||E("NoPremultipliedAlpha is not allowed"),0==this._shaderSets.getSize()&&this.generateShaders(),null!=e.getClippingContextBufferForMask()){var p=this._shaderSets.at(Tr.ShaderNames_SetupMask);this.gl.useProgram(p.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(p.samplerTexture0Location,0),null==o.vertex&&(o.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(p.attributePositionLocation),this.gl.vertexAttribPointer(p.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==o.uv&&(o.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(p.attributeTexCoordLocation),this.gl.vertexAttribPointer(p.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);var y=e.getClippingContextBufferForMask()._layoutChannelNo,k=e.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(y);this.gl.uniform4f(p.uniformChannelFlagLocation,k.R,k.G,k.B,k.A),this.gl.uniformMatrix4fv(p.uniformClipMatrixLocation,!1,e.getClippingContextBufferForMask()._matrixForMask.getArray());var w=e.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(p.uniformBaseColorLocation,2*w.x-1,2*w.y-1,2*w.getRight()-1,2*w.getBottom()-1),this.gl.uniform4f(p.uniformMultiplyColorLocation,u.R,u.G,u.B,u.A),this.gl.uniform4f(p.uniformScreenColorLocation,f.R,f.G,f.B,f.A),b=this.gl.ZERO,m=this.gl.ONE_MINUS_SRC_COLOR,_=this.gl.ZERO,v=this.gl.ONE_MINUS_SRC_ALPHA}else{var A=null!=e.getClippingContextBufferForDraw(),C=A?g?2:1:0,x=new qr;switch(c){case S.CubismBlendMode_Normal:default:x=this._shaderSets.at(Tr.ShaderNames_NormalPremultipliedAlpha+C),b=this.gl.ONE,m=this.gl.ONE_MINUS_SRC_ALPHA,_=this.gl.ONE,v=this.gl.ONE_MINUS_SRC_ALPHA;break;case S.CubismBlendMode_Additive:x=this._shaderSets.at(Tr.ShaderNames_AddPremultipliedAlpha+C),b=this.gl.ONE,m=this.gl.ONE,_=this.gl.ZERO,v=this.gl.ONE;break;case S.CubismBlendMode_Multiplicative:x=this._shaderSets.at(Tr.ShaderNames_MultPremultipliedAlpha+C),b=this.gl.DST_COLOR,m=this.gl.ONE_MINUS_SRC_ALPHA,_=this.gl.ZERO,v=this.gl.ONE}if(this.gl.useProgram(x.shaderProgram),null==o.vertex&&(o.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(x.attributePositionLocation),this.gl.vertexAttribPointer(x.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==o.uv&&(o.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(x.attributeTexCoordLocation),this.gl.vertexAttribPointer(x.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),A){this.gl.activeTexture(this.gl.TEXTURE1);var M=e.getClippingContextBufferForDraw().getClippingManager().getColorBuffer().at(e.getClippingContextBufferForDraw()._bufferIndex);this.gl.bindTexture(this.gl.TEXTURE_2D,M),this.gl.uniform1i(x.samplerTexture1Location,1),this.gl.uniformMatrix4fv(x.uniformClipMatrixLocation,!1,e.getClippingContextBufferForDraw()._matrixForDraw.getArray());var P=e.getClippingContextBufferForDraw()._layoutChannelNo,B=e.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(P);this.gl.uniform4f(x.uniformChannelFlagLocation,B.R,B.G,B.B,B.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(x.samplerTexture0Location,0),this.gl.uniformMatrix4fv(x.uniformMatrixLocation,!1,d.getArray()),this.gl.uniform4f(x.uniformBaseColorLocation,l.R,l.G,l.B,l.A),this.gl.uniform4f(x.uniformMultiplyColorLocation,u.R,u.G,u.B,u.A),this.gl.uniform4f(x.uniformScreenColorLocation,f.R,f.G,f.B,f.A)}null==o.index&&(o.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,o.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,r,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(b,m,_,v)}},{key:"releaseShaderProgram",value:function(){for(var e=0;e<this._shaderSets.getSize();e++)this.gl.deleteProgram(this._shaderSets.at(e).shaderProgram),this._shaderSets.at(e).shaderProgram=0,this._shaderSets.set(e,void 0),this._shaderSets.set(e,null)}},{key:"generateShaders",value:function(){for(var e=0;e<10;e++)this._shaderSets.pushBack(new qr);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(Xr,Yr),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(Wr,Kr),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(Hr,Jr),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(Hr,Qr),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(0).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_multiplyColor"),this._shaderSets.at(0).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_screenColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(1).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_multiplyColor"),this._shaderSets.at(1).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_screenColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(2).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_multiplyColor"),this._shaderSets.at(2).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_screenColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(3).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_multiplyColor"),this._shaderSets.at(3).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_screenColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(4).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_multiplyColor"),this._shaderSets.at(4).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_screenColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(5).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_multiplyColor"),this._shaderSets.at(5).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_screenColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(6).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_multiplyColor"),this._shaderSets.at(6).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_screenColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(7).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_multiplyColor"),this._shaderSets.at(7).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_screenColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(8).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_multiplyColor"),this._shaderSets.at(8).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_screenColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor"),this._shaderSets.at(9).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_multiplyColor"),this._shaderSets.at(9).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_screenColor")}},{key:"loadShaderProgram",value:function(e,t){var i=this.gl.createProgram(),a=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!a)return E("Vertex shader compile error!"),0;var r=this.compileShaderSource(this.gl.FRAGMENT_SHADER,t);return r?(this.gl.attachShader(i,a),this.gl.attachShader(i,r),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.gl.deleteShader(a),this.gl.deleteShader(r),i):(E("Failed to link program: {0}",i),this.gl.deleteShader(a),a=0,this.gl.deleteShader(r),r=0,i&&(this.gl.deleteProgram(i),i=0),0)):(E("Vertex shader compile error!"),0)}},{key:"compileShaderSource",value:function(e,t){var i=t,a=this.gl.createShader(e);if(this.gl.shaderSource(a,i),this.gl.compileShader(a),!a){var r=this.gl.getShaderInfoLog(a);E("Shader compile log: {0} ",r)}return this.gl.getShaderParameter(a,this.gl.COMPILE_STATUS)?a:(this.gl.deleteShader(a),null)}},{key:"setGl",value:function(e){this.gl=e}}],[{key:"getInstance",value:function(){return null==Vr?Vr=new e:Vr}},{key:"deleteInstance",value:function(){Vr&&(Vr.release(),Vr=null)}}]),e}(),qr=function e(){Cr(this,e),Pr(this,"shaderProgram",void 0),Pr(this,"attributePositionLocation",void 0),Pr(this,"attributeTexCoordLocation",void 0),Pr(this,"uniformMatrixLocation",void 0),Pr(this,"uniformClipMatrixLocation",void 0),Pr(this,"samplerTexture0Location",void 0),Pr(this,"samplerTexture1Location",void 0),Pr(this,"uniformBaseColorLocation",void 0),Pr(this,"uniformChannelFlagLocation",void 0),Pr(this,"uniformMultiplyColorLocation",void 0),Pr(this,"uniformScreenColorLocation",void 0)};(Lr=Tr||(Tr={}))[Lr.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",Lr[Lr.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",Lr[Lr.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",Lr[Lr.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",Lr[Lr.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",Lr[Lr.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",Lr[Lr.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",Lr[Lr.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",Lr[Lr.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",Lr[Lr.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted";var Zr,Xr="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Yr="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",Wr="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Hr="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Kr="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 color = texColor * u_baseColor;   gl_FragColor = vec4(color.rgb, color.a);}",Jr="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",Qr="precision mediump float;varying vec2      v_texCoord;varying vec4      v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4      u_channelFlag;uniform vec4      u_baseColor;uniform vec4      u_multiplyColor;uniform vec4      u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * (1.0 - maskVal);   gl_FragColor = col_formask;}",$r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(i,e);var t=Rr(i);function i(){var e;return Cr(this,i),Pr(Ar(e=t.call(this)),"_textures",void 0),Pr(Ar(e),"_sortedDrawableIndexList",void 0),Pr(Ar(e),"_clippingManager",void 0),Pr(Ar(e),"_clippingContextBufferForMask",void 0),Pr(Ar(e),"_clippingContextBufferForDraw",void 0),Pr(Ar(e),"_rendererProfile",void 0),Pr(Ar(e),"firstDraw",void 0),Pr(Ar(e),"_bufferData",void 0),Pr(Ar(e),"_extension",void 0),Pr(Ar(e),"gl",void 0),e._clippingContextBufferForMask=null,e._clippingContextBufferForDraw=null,e._rendererProfile=new Nr,e.firstDraw=!0,e._textures=new N,e._sortedDrawableIndexList=new r,e._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},e._textures.prepareCapacity(32,!0),e}return Mr(i,[{key:"initialize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.isUsingMasking()&&(this._clippingManager=new Or,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts(),t)),this._sortedDrawableIndexList.resize(e.getDrawableCount(),0),Br(jr(i.prototype),"initialize",this).call(this,e)}},{key:"bindTexture",value:function(e,t){this._textures.setValue(e,t)}},{key:"getBindedTextures",value:function(){return this._textures}},{key:"setClippingMaskBufferSize",value:function(e){if(this._model.isUsingMasking()){var t=this._clippingManager.getRenderTextureCount();this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new Or,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts(),t)}}},{key:"getClippingMaskBufferSize",value:function(){return this._model.isUsingMasking()?this._clippingManager.getClippingMaskBufferSize():-1}},{key:"getRenderTextureCount",value:function(){return this._model.isUsingMasking()?this._clippingManager.getRenderTextureCount():-1}},{key:"release",value:function(){this._clippingManager&&(this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null),null!=this.gl&&(this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null)}},{key:"doDrawModel",value:function(){if(null!=this.gl){null!=this._clippingManager&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();for(var e=this.getModel().getDrawableCount(),t=this.getModel().getDrawableRenderOrders(),i=0;i<e;++i){var a=t[i];this._sortedDrawableIndexList.set(a,i)}for(var r=0;r<e;++r){var n=this._sortedDrawableIndexList.at(r);if(this.getModel().getDrawableDynamicFlagIsVisible(n)){var o=null!=this._clippingManager?this._clippingManager.getClippingContextListForDraw().at(n):null;if(null!=o&&this.isUsingHighPrecisionMask()){o._isUsing&&(this.gl.viewport(0,0,this._clippingManager.getClippingMaskBufferSize(),this._clippingManager.getClippingMaskBufferSize()),this.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,o.getClippingManager().getMaskRenderTexture().at(o._bufferIndex)),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT));for(var s=o._clippingIdCount,c=0;c<s;c++){var l=o._clippingIdList[c];this._model.getDrawableDynamicFlagVertexPositionsDidChange(l)&&(this.setIsCulling(0!=this._model.getDrawableCulling(l)),this.setClippingContextBufferForMask(o),this.drawMesh(this.getModel().getDrawableTextureIndex(l),this.getModel().getDrawableVertexIndexCount(l),this.getModel().getDrawableVertexCount(l),this.getModel().getDrawableVertexIndices(l),this.getModel().getDrawableVertices(l),this.getModel().getDrawableVertexUvs(l),this.getModel().getMultiplyColor(l),this.getModel().getScreenColor(l),this.getModel().getDrawableOpacity(l),S.CubismBlendMode_Normal,!1))}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Dr),this.setClippingContextBufferForMask(null),this.gl.viewport(Fr[0],Fr[1],Fr[2],Fr[3]),this.preDraw()}this.setClippingContextBufferForDraw(o),this.setIsCulling(this.getModel().getDrawableCulling(n)),this.drawMesh(this.getModel().getDrawableTextureIndex(n),this.getModel().getDrawableVertexIndexCount(n),this.getModel().getDrawableVertexCount(n),this.getModel().getDrawableVertexIndices(n),this.getModel().getDrawableVertices(n),this.getModel().getDrawableVertexUvs(n),this.getModel().getMultiplyColor(n),this.getModel().getScreenColor(n),this.getModel().getDrawableOpacity(n),this.getModel().getDrawableBlendMode(n),this.getModel().getDrawableInvertedMaskBit(n))}}}else E("'gl' is null. WebGLRenderingContext is required.\nPlease call 'CubimRenderer_WebGL.startUp' function.")}},{key:"drawMesh",value:function(e,t,i,a,r,n,o,s,c,l,u){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);var f,h=this.getModelColor();null==this.getClippingContextBufferForMask()&&(h.A*=c,this.isPremultipliedAlpha()&&(h.R*=h.A,h.G*=h.A,h.B*=h.A)),f=null!=this._textures.getValue(e)?this._textures.getValue(e):null,Ur.getInstance().setupShaderProgram(this,f,i,r,a,n,this._bufferData,c,l,h,o,s,this.isPremultipliedAlpha(),this.getMvpMatrix(),u),this.gl.drawElements(this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}},{key:"saveProfile",value:function(){this._rendererProfile.save()}},{key:"restoreProfile",value:function(){this._rendererProfile.restore()}},{key:"setRenderState",value:function(e,t){Dr=e,Fr=t}},{key:"preDraw",value:function(){if(this.firstDraw&&(this.firstDraw=!1),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.getAnisotropy()>0&&this._extension)for(var e=0;e<this._textures.getSize();++e)this.gl.bindTexture(this.gl.TEXTURE_2D,this._textures.getValue(e)),this.gl.texParameterf(this.gl.TEXTURE_2D,this._extension.TEXTURE_MAX_ANISOTROPY_EXT,this.getAnisotropy())}},{key:"setClippingContextBufferForMask",value:function(e){this._clippingContextBufferForMask=e}},{key:"getClippingContextBufferForMask",value:function(){return this._clippingContextBufferForMask}},{key:"setClippingContextBufferForDraw",value:function(e){this._clippingContextBufferForDraw=e}},{key:"getClippingContextBufferForDraw",value:function(){return this._clippingContextBufferForDraw}},{key:"startUp",value:function(e){this.gl=e,this._clippingManager&&this._clippingManager.setGL(e),Ur.getInstance().setGl(e),this._rendererProfile.setGl(e),this._extension=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}}],[{key:"doStaticRelease",value:function(){Ur.deleteInstance()}}]),i}(C);function en(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function an(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}C.staticRelease=function(){$r.doStaticRelease()},function(e){e.CubismClippingContext=Gr,e.CubismClippingManager_WebGL=Or,e.CubismRenderTextureResource=zr,e.CubismRenderer_WebGL=$r,e.CubismShaderSet=qr,e.CubismShader_WebGL=Ur,e.ShaderNames=Tr}(Zr||(Zr={}));var rn,nn=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new M;en(this,e),an(this,"isOverwritten",void 0),an(this,"Color",void 0),this.isOverwritten=t,this.Color=i},on=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new M;en(this,e),an(this,"isOverwritten",void 0),an(this,"Color",void 0),this.isOverwritten=t,this.Color=i},sn=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];en(this,e),an(this,"isOverwritten",void 0),an(this,"isCulling",void 0),this.isOverwritten=t,this.isCulling=i},cn=function(){function e(t){en(this,e),an(this,"_notExistPartOpacities",void 0),an(this,"_notExistPartId",void 0),an(this,"_notExistParameterValues",void 0),an(this,"_notExistParameterId",void 0),an(this,"_savedParameters",void 0),an(this,"_isOverwrittenModelMultiplyColors",void 0),an(this,"_isOverwrittenModelScreenColors",void 0),an(this,"_userMultiplyColors",void 0),an(this,"_userScreenColors",void 0),an(this,"_userPartScreenColors",void 0),an(this,"_userPartMultiplyColors",void 0),an(this,"_partChildDrawables",void 0),an(this,"_model",void 0),an(this,"_parameterValues",void 0),an(this,"_parameterMaximumValues",void 0),an(this,"_parameterMinimumValues",void 0),an(this,"_partOpacities",void 0),an(this,"_modelOpacity",void 0),an(this,"_parameterIds",void 0),an(this,"_partIds",void 0),an(this,"_drawableIds",void 0),an(this,"_isOverwrittenCullings",void 0),an(this,"_userCullings",void 0),this._model=t,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new r,this._parameterIds=new r,this._drawableIds=new r,this._partIds=new r,this._isOverwrittenModelMultiplyColors=!1,this._isOverwrittenModelScreenColors=!1,this._isOverwrittenCullings=!1,this._modelOpacity=1,this._userMultiplyColors=new r,this._userScreenColors=new r,this._userCullings=new r,this._userPartMultiplyColors=new r,this._userPartScreenColors=new r,this._partChildDrawables=new r,this._notExistPartId=new N,this._notExistParameterId=new N,this._notExistParameterValues=new N,this._notExistPartOpacities=new N}var t,i,a;return t=e,i=[{key:"update",value:function(){this._model.update(),this._model.drawables.resetDynamicFlags()}},{key:"getPixelsPerUnit",value:function(){return null==this._model?0:this._model.canvasinfo.PixelsPerUnit}},{key:"getCanvasWidth",value:function(){return null==this._model?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}},{key:"getCanvasHeight",value:function(){return null==this._model?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}},{key:"saveParameters",value:function(){for(var e=this._model.parameters.count,t=this._savedParameters.getSize(),i=0;i<e;++i)i<t?this._savedParameters.set(i,this._parameterValues[i]):this._savedParameters.pushBack(this._parameterValues[i])}},{key:"getMultiplyColor",value:function(e){return this.getOverwriteFlagForModelMultiplyColors()||this.getOverwriteFlagForDrawableMultiplyColors(e)?this._userMultiplyColors.at(e).Color:this.getDrawableMultiplyColor(e)}},{key:"getScreenColor",value:function(e){return this.getOverwriteFlagForModelScreenColors()||this.getOverwriteFlagForDrawableScreenColors(e)?this._userScreenColors.at(e).Color:this.getDrawableScreenColor(e)}},{key:"setMultiplyColorByTextureColor",value:function(e,t){this.setMultiplyColorByRGBA(e,t.R,t.G,t.B,t.A)}},{key:"setMultiplyColorByRGBA",value:function(e,t,i,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this._userMultiplyColors.at(e).Color.R=t,this._userMultiplyColors.at(e).Color.G=i,this._userMultiplyColors.at(e).Color.B=a,this._userMultiplyColors.at(e).Color.A=r}},{key:"setScreenColorByTextureColor",value:function(e,t){this.setScreenColorByRGBA(e,t.R,t.G,t.B,t.A)}},{key:"setScreenColorByRGBA",value:function(e,t,i,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this._userScreenColors.at(e).Color.R=t,this._userScreenColors.at(e).Color.G=i,this._userScreenColors.at(e).Color.B=a,this._userScreenColors.at(e).Color.A=r}},{key:"getPartMultiplyColor",value:function(e){return this._userPartMultiplyColors.at(e).Color}},{key:"getPartScreenColor",value:function(e){return this._userPartScreenColors.at(e).Color}},{key:"setPartColor",value:function(e,t,i,a,r,n,o){if(n.at(e).Color.R=t,n.at(e).Color.G=i,n.at(e).Color.B=a,n.at(e).Color.A=r,n.at(e).isOverwritten)for(var s=0;s<this._partChildDrawables.at(e).getSize();++s){var c=this._partChildDrawables.at(e).at(s);o.at(c).Color.R=t,o.at(c).Color.G=i,o.at(c).Color.B=a,o.at(c).Color.A=r}}},{key:"setPartMultiplyColorByTextureColor",value:function(e,t){this.setPartMultiplyColorByRGBA(e,t.R,t.G,t.B,t.A)}},{key:"setPartMultiplyColorByRGBA",value:function(e,t,i,a,r){this.setPartColor(e,t,i,a,r,this._userPartMultiplyColors,this._userMultiplyColors)}},{key:"setPartScreenColorByTextureColor",value:function(e,t){this.setPartScreenColorByRGBA(e,t.R,t.G,t.B,t.A)}},{key:"setPartScreenColorByRGBA",value:function(e,t,i,a,r){this.setPartColor(e,t,i,a,r,this._userPartScreenColors,this._userScreenColors)}},{key:"getOverwriteFlagForModelMultiplyColors",value:function(){return this._isOverwrittenModelMultiplyColors}},{key:"getOverwriteFlagForModelScreenColors",value:function(){return this._isOverwrittenModelScreenColors}},{key:"setOverwriteFlagForModelMultiplyColors",value:function(e){this._isOverwrittenModelMultiplyColors=e}},{key:"setOverwriteFlagForModelScreenColors",value:function(e){this._isOverwrittenModelScreenColors=e}},{key:"getOverwriteFlagForDrawableMultiplyColors",value:function(e){return this._userMultiplyColors.at(e).isOverwritten}},{key:"getOverwriteFlagForDrawableScreenColors",value:function(e){return this._userScreenColors.at(e).isOverwritten}},{key:"setOverwriteFlagForDrawableMultiplyColors",value:function(e,t){this._userMultiplyColors.at(e).isOverwritten=t}},{key:"setOverwriteFlagForDrawableScreenColors",value:function(e,t){this._userScreenColors.at(e).isOverwritten=t}},{key:"getOverwriteColorForPartMultiplyColors",value:function(e){return this._userPartMultiplyColors.at(e).isOverwritten}},{key:"getOverwriteColorForPartScreenColors",value:function(e){return this._userPartScreenColors.at(e).isOverwritten}},{key:"setOverwriteColorForPartColors",value:function(e,t,i,a){i.at(e).isOverwritten=t;for(var r=0;r<this._partChildDrawables.at(e).getSize();++r){var n=this._partChildDrawables.at(e).at(r);a.at(n).isOverwritten=t,t&&(a.at(n).Color.R=i.at(e).Color.R,a.at(n).Color.G=i.at(e).Color.G,a.at(n).Color.B=i.at(e).Color.B,a.at(n).Color.A=i.at(e).Color.A)}}},{key:"setOverwriteColorForPartMultiplyColors",value:function(e,t){this._userPartMultiplyColors.at(e).isOverwritten=t,this.setOverwriteColorForPartColors(e,t,this._userPartMultiplyColors,this._userMultiplyColors)}},{key:"setOverwriteColorForPartScreenColors",value:function(e,t){this._userPartScreenColors.at(e).isOverwritten=t,this.setOverwriteColorForPartColors(e,t,this._userPartScreenColors,this._userScreenColors)}},{key:"getDrawableCulling",value:function(e){if(this.getOverwriteFlagForModelCullings()||this.getOverwriteFlagForDrawableCullings(e))return this._userCullings.at(e).isCulling;var t=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(t[e])}},{key:"setDrawableCulling",value:function(e,t){this._userCullings.at(e).isCulling=t}},{key:"getOverwriteFlagForModelCullings",value:function(){return this._isOverwrittenCullings}},{key:"setOverwriteFlagForModelCullings",value:function(e){this._isOverwrittenCullings=e}},{key:"getOverwriteFlagForDrawableCullings",value:function(e){return this._userCullings.at(e).isOverwritten}},{key:"setOverwriteFlagForDrawableCullings",value:function(e,t){this._userCullings.at(e).isOverwritten=t}},{key:"getModelOapcity",value:function(){return this._modelOpacity}},{key:"setModelOapcity",value:function(e){this._modelOpacity=e}},{key:"getModel",value:function(){return this._model}},{key:"getPartIndex",value:function(e){var t,i=this._model.parts.count;for(t=0;t<i;++t)if(e==this._partIds.at(t))return t;return this._notExistPartId.isExist(e)?this._notExistPartId.getValue(e):(t=i+this._notExistPartId.getSize(),this._notExistPartId.setValue(e,t),this._notExistPartOpacities.appendKey(t),t)}},{key:"getPartId",value:function(e){var t=this._model.parts.ids[e];return Pe.getIdManager().getId(t)}},{key:"getPartCount",value:function(){return this._model.parts.count}},{key:"setPartOpacityByIndex",value:function(e,t){this._notExistPartOpacities.isExist(e)?this._notExistPartOpacities.setValue(e,t):(V(0<=e&&e<this.getPartCount()),this._partOpacities[e]=t)}},{key:"setPartOpacityById",value:function(e,t){var i=this.getPartIndex(e);i<0||this.setPartOpacityByIndex(i,t)}},{key:"getPartOpacityByIndex",value:function(e){return this._notExistPartOpacities.isExist(e)?this._notExistPartOpacities.getValue(e):(V(0<=e&&e<this.getPartCount()),this._partOpacities[e])}},{key:"getPartOpacityById",value:function(e){var t=this.getPartIndex(e);return t<0?0:this.getPartOpacityByIndex(t)}},{key:"getParameterIndex",value:function(e){var t,i=this._model.parameters.count;for(t=0;t<i;++t)if(e==this._parameterIds.at(t))return t;return this._notExistParameterId.isExist(e)?this._notExistParameterId.getValue(e):(t=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(e,t),this._notExistParameterValues.appendKey(t),t)}},{key:"getParameterCount",value:function(){return this._model.parameters.count}},{key:"getParameterType",value:function(e){return this._model.parameters.types[e]}},{key:"getParameterMaximumValue",value:function(e){return this._model.parameters.maximumValues[e]}},{key:"getParameterMinimumValue",value:function(e){return this._model.parameters.minimumValues[e]}},{key:"getParameterDefaultValue",value:function(e){return this._model.parameters.defaultValues[e]}},{key:"getParameterValueByIndex",value:function(e){return this._notExistParameterValues.isExist(e)?this._notExistParameterValues.getValue(e):(V(0<=e&&e<this.getParameterCount()),this._parameterValues[e])}},{key:"getParameterValueById",value:function(e){var t=this.getParameterIndex(e);return this.getParameterValueByIndex(t)}},{key:"setParameterValueByIndex",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._notExistParameterValues.isExist(e)?this._notExistParameterValues.setValue(e,1==i?t:this._notExistParameterValues.getValue(e)*(1-i)+t*i):(V(0<=e&&e<this.getParameterCount()),this._model.parameters.maximumValues[e]<t&&(t=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>t&&(t=this._model.parameters.minimumValues[e]),this._parameterValues[e]=1==i?t:this._parameterValues[e]=this._parameterValues[e]*(1-i)+t*i)}},{key:"setParameterValueById",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=this.getParameterIndex(e);this.setParameterValueByIndex(a,t,i)}},{key:"addParameterValueByIndex",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+t*i)}},{key:"addParameterValueById",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=this.getParameterIndex(e);this.addParameterValueByIndex(a,t,i)}},{key:"multiplyParameterValueById",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=this.getParameterIndex(e);this.multiplyParameterValueByIndex(a,t,i)}},{key:"multiplyParameterValueByIndex",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(t-1)*i))}},{key:"getDrawableIndex",value:function(e){for(var t=this._model.drawables.count,i=0;i<t;++i)if(this._drawableIds.at(i)==e)return i;return-1}},{key:"getDrawableCount",value:function(){return this._model.drawables.count}},{key:"getDrawableId",value:function(e){var t=this._model.drawables.ids;return Pe.getIdManager().getId(t[e])}},{key:"getDrawableRenderOrders",value:function(){return this._model.drawables.renderOrders}},{key:"getDrawableTextureIndices",value:function(e){return this.getDrawableTextureIndex(e)}},{key:"getDrawableTextureIndex",value:function(e){return this._model.drawables.textureIndices[e]}},{key:"getDrawableDynamicFlagVertexPositionsDidChange",value:function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(t[e])}},{key:"getDrawableVertexIndexCount",value:function(e){return this._model.drawables.indexCounts[e]}},{key:"getDrawableVertexCount",value:function(e){return this._model.drawables.vertexCounts[e]}},{key:"getDrawableVertices",value:function(e){return this.getDrawableVertexPositions(e)}},{key:"getDrawableVertexIndices",value:function(e){return this._model.drawables.indices[e]}},{key:"getDrawableVertexPositions",value:function(e){return this._model.drawables.vertexPositions[e]}},{key:"getDrawableVertexUvs",value:function(e){return this._model.drawables.vertexUvs[e]}},{key:"getDrawableOpacity",value:function(e){return this._model.drawables.opacities[e]}},{key:"getDrawableMultiplyColor",value:function(e){var t=this._model.drawables.multiplyColors,i=4*e,a=new M;return a.R=t[i],a.G=t[i+1],a.B=t[i+2],a.A=t[i+3],a}},{key:"getDrawableScreenColor",value:function(e){var t=this._model.drawables.screenColors,i=4*e,a=new M;return a.R=t[i],a.G=t[i+1],a.B=t[i+2],a.A=t[i+3],a}},{key:"getDrawableParentPartIndex",value:function(e){return this._model.drawables.parentPartIndices[e]}},{key:"getDrawableBlendMode",value:function(e){var t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(t[e])?S.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(t[e])?S.CubismBlendMode_Multiplicative:S.CubismBlendMode_Normal}},{key:"getDrawableInvertedMaskBit",value:function(e){var t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(t[e])}},{key:"getDrawableMasks",value:function(){return this._model.drawables.masks}},{key:"getDrawableMaskCounts",value:function(){return this._model.drawables.maskCounts}},{key:"isUsingMasking",value:function(){for(var e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}},{key:"getDrawableDynamicFlagIsVisible",value:function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(t[e])}},{key:"getDrawableDynamicFlagVisibilityDidChange",value:function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(t[e])}},{key:"getDrawableDynamicFlagOpacityDidChange",value:function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(t[e])}},{key:"getDrawableDynamicFlagRenderOrderDidChange",value:function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(t[e])}},{key:"getDrawableDynamicFlagBlendColorDidChange",value:function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(t[e])}},{key:"loadParameters",value:function(){var e=this._model.parameters.count,t=this._savedParameters.getSize();e>t&&(e=t);for(var i=0;i<e;++i)this._parameterValues[i]=this._savedParameters.at(i)}},{key:"initialize",value:function(){V(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;var e=this._model.parameters.ids,t=this._model.parameters.count;this._parameterIds.prepareCapacity(t);for(var i=0;i<t;++i)this._parameterIds.pushBack(Pe.getIdManager().getId(e[i]));var a=this._model.parts.count,n=this._model.parts.ids;this._partIds.prepareCapacity(a);for(var o=0;o<a;++o)this._partIds.pushBack(Pe.getIdManager().getId(n[o]));this._userPartMultiplyColors.prepareCapacity(a),this._userPartScreenColors.prepareCapacity(a),this._partChildDrawables.prepareCapacity(a);var s=this._model.drawables.ids,c=this._model.drawables.count;this._userMultiplyColors.prepareCapacity(c),this._userScreenColors.prepareCapacity(c),this._userCullings.prepareCapacity(c);for(var l=new sn(!1,!1),u=0;u<a;++u){var f=new M(1,1,1,1),h=new M(0,0,0,1),d=new on(!1,f),g=new on(!1,h);this._userPartMultiplyColors.pushBack(d),this._userPartScreenColors.pushBack(g),this._partChildDrawables.pushBack(new r),this._partChildDrawables.at(u).prepareCapacity(c)}for(var b=0;b<c;++b){var m=new M(1,1,1,1),_=new M(0,0,0,1),v=new nn(!1,m),p=new nn(!1,_);this._drawableIds.pushBack(Pe.getIdManager().getId(s[b])),this._userMultiplyColors.pushBack(v),this._userScreenColors.pushBack(p),this._userCullings.pushBack(l);var y=this.getDrawableParentPartIndex(b);y>=0&&this._partChildDrawables.at(y).pushBack(b)}}},{key:"release",value:function(){this._model.release(),this._model=null}}],i&&tn(t.prototype,i),a&&tn(t,a),e}();function ln(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function un(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismModel=cn}(rn||(rn={}));var fn,hn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),un(this,"_moc",void 0),un(this,"_modelCount",void 0),un(this,"_mocVersion",void 0),this._moc=t,this._modelCount=0,this._mocVersion=0}var t,i,a;return t=e,a=[{key:"create",value:function(t,i){var a=null;if(i&&!this.hasMocConsistency(t))return E("Inconsistent MOC3."),a;var r=Live2DCubismCore.Moc.fromArrayBuffer(t);return r&&((a=new e(r))._mocVersion=Live2DCubismCore.Version.csmGetMocVersion(r,t)),a}},{key:"delete",value:function(e){e._moc._release(),e._moc=null,e=null}},{key:"hasMocConsistency",value:function(e){return 1===Live2DCubismCore.Moc.prototype.hasMocConsistency(e)}}],(i=[{key:"createModel",value:function(){var e=null,t=Live2DCubismCore.Model.fromMoc(this._moc);return t&&((e=new cn(t)).initialize(),++this._modelCount),e}},{key:"deleteModel",value:function(e){null!=e&&(e.release(),e=null,--this._modelCount)}},{key:"release",value:function(){V(0==this._modelCount),this._moc._release(),this._moc=null}},{key:"getLatestMocVersion",value:function(){return Live2DCubismCore.Version.csmGetLatestMocVersion()}},{key:"getMocVersion",value:function(){return this._mocVersion}}])&&ln(t.prototype,i),a&&ln(t,a),e}();function dn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}!function(e){e.CubismMoc=hn}(fn||(fn={}));var gn,bn="Meta",mn="UserData",_n=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"_json",void 0),this._json=se.create(t,i)}var t,i,a;return t=e,(i=[{key:"release",value:function(){se.delete(this._json)}},{key:"getUserDataCount",value:function(){return this._json.getRoot().getValueByString(bn).getValueByString("UserDataCount").toInt()}},{key:"getTotalUserDataSize",value:function(){return this._json.getRoot().getValueByString(bn).getValueByString("TotalUserDataSize").toInt()}},{key:"getUserDataTargetType",value:function(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString("Target").getRawString()}},{key:"getUserDataId",value:function(e){return Pe.getIdManager().getId(this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString("Id").getRawString())}},{key:"getUserDataValue",value:function(e){return this._json.getRoot().getValueByString(mn).getValueByIndex(e).getValueByString("Value").getRawString()}}])&&dn(t.prototype,i),a&&dn(t,a),e}();function vn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function yn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismModelUserDataJson=_n}(gn||(gn={}));var kn,wn=function e(){vn(this,e),yn(this,"targetType",void 0),yn(this,"targetId",void 0),yn(this,"value",void 0)},Sn=function(){function e(){vn(this,e),yn(this,"_userDataNodes",void 0),yn(this,"_artMeshUserDataNode",void 0),this._userDataNodes=new r,this._artMeshUserDataNode=new r}var t,i,a;return t=e,a=[{key:"create",value:function(t,i){var a=new e;return a.parseUserData(t,i),a}},{key:"delete",value:function(e){null!=e&&(e.release(),e=null)}}],(i=[{key:"getArtMeshUserDatas",value:function(){return this._artMeshUserDataNode}},{key:"parseUserData",value:function(e,t){for(var i=new _n(e,t),a=Pe.getIdManager().getId("ArtMesh"),r=i.getUserDataCount(),n=0;n<r;n++){var o=new wn;o.targetId=i.getUserDataId(n),o.targetType=Pe.getIdManager().getId(i.getUserDataTargetType(n)),o.value=new l(i.getUserDataValue(n)),this._userDataNodes.pushBack(o),o.targetType==a&&this._artMeshUserDataNode.pushBack(o)}i.release(),i=void 0}},{key:"release",value:function(){for(var e=0;e<this._userDataNodes.getSize();++e)this._userDataNodes.set(e,null);this._userDataNodes=null}}])&&pn(t.prototype,i),a&&pn(t,a),e}();function An(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Cn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismModelUserData=Sn,e.CubismModelUserDataNode=wn}(kn||(kn={}));var xn,Mn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Cn(this,"loadMotion",(function(e,t,i,a){return Ji.create(e,t,a)})),Cn(this,"_moc",void 0),Cn(this,"_model",void 0),Cn(this,"_motionManager",void 0),Cn(this,"_expressionManager",void 0),Cn(this,"_eyeBlink",void 0),Cn(this,"_breath",void 0),Cn(this,"_modelMatrix",void 0),Cn(this,"_pose",void 0),Cn(this,"_dragManager",void 0),Cn(this,"_physics",void 0),Cn(this,"_modelUserData",void 0),Cn(this,"_initialized",void 0),Cn(this,"_updating",void 0),Cn(this,"_opacity",void 0),Cn(this,"_lipsync",void 0),Cn(this,"_lastLipSyncValue",void 0),Cn(this,"_dragX",void 0),Cn(this,"_dragY",void 0),Cn(this,"_accelerationX",void 0),Cn(this,"_accelerationY",void 0),Cn(this,"_accelerationZ",void 0),Cn(this,"_mocConsistency",void 0),Cn(this,"_debugMode",void 0),Cn(this,"_renderer",void 0),this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._mocConsistency=!1,this._debugMode=!1,this._renderer=null,this._motionManager=new ya,this._motionManager.setEventCallback(e.cubismDefaultMotionEventCallback,this),this._expressionManager=new ya,this._dragManager=new Yt}var t,i,a;return t=e,i=[{key:"isInitialized",value:function(){return this._initialized}},{key:"setInitialized",value:function(e){this._initialized=e}},{key:"isUpdating",value:function(){return this._updating}},{key:"setUpdating",value:function(e){this._updating=e}},{key:"setDragging",value:function(e,t){this._dragManager.set(e,t)}},{key:"setAcceleration",value:function(e,t,i){this._accelerationX=e,this._accelerationY=t,this._accelerationZ=i}},{key:"getModelMatrix",value:function(){return this._modelMatrix}},{key:"setOpacity",value:function(e){this._opacity=e}},{key:"getOpacity",value:function(){return this._opacity}},{key:"loadModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._moc=hn.create(e,t),null!=this._moc?(this._model=this._moc.createModel(),null!=this._model?(this._model.saveParameters(),this._modelMatrix=new Rt(this._model.getCanvasWidth(),this._model.getCanvasHeight())):E("Failed to CreateModel().")):E("Failed to CubismMoc.create().")}},{key:"loadExpression",value:function(e,t,i){return ui.create(e,t)}},{key:"loadPose",value:function(e,t){this._pose=St.create(e,t)}},{key:"loadUserData",value:function(e,t){this._modelUserData=Sn.create(e,t)}},{key:"loadPhysics",value:function(e,t){this._physics=ar.create(e,t)}},{key:"isHit",value:function(e,t,i){var a=this._model.getDrawableIndex(e);if(a<0)return!1;for(var r=this._model.getDrawableVertexCount(a),n=this._model.getDrawableVertices(a),o=n[0],s=n[0],c=n[1],l=n[1],u=1;u<r;++u){var f=n[Ae.vertexOffset+u*Ae.vertexStep],h=n[Ae.vertexOffset+u*Ae.vertexStep+1];f<o&&(o=f),f>s&&(s=f),h<c&&(c=h),h>l&&(l=h)}var d=this._modelMatrix.invertTransformX(t),g=this._modelMatrix.invertTransformY(i);return o<=d&&d<=s&&c<=g&&g<=l}},{key:"getModel",value:function(){return this._model}},{key:"getRenderer",value:function(){return this._renderer}},{key:"createRenderer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._renderer&&this.deleteRenderer(),this._renderer=new $r,this._renderer.initialize(this._model,e)}},{key:"deleteRenderer",value:function(){null!=this._renderer&&(this._renderer.release(),this._renderer=null)}},{key:"motionEventFired",value:function(e){j("{0}",e.s)}},{key:"release",value:function(){null!=this._motionManager&&(this._motionManager.release(),this._motionManager=null),null!=this._expressionManager&&(this._expressionManager.release(),this._expressionManager=null),null!=this._moc&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,St.delete(this._pose),bt.delete(this._eyeBlink),ct.delete(this._breath),this._dragManager=null,ar.delete(this._physics),Sn.delete(this._modelUserData),this.deleteRenderer()}}],a=[{key:"cubismDefaultMotionEventCallback",value:function(e,t,i){null!=i&&i.motionEventFired(t)}}],i&&An(t.prototype,i),a&&An(t,a),e}();function Pn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Bn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismUserModel=Mn}(xn||(xn={}));var jn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,a;return t=e,a=[{key:"loadFileAsBytes",value:function(e,t){fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return t(e,e.byteLength)}))}},{key:"getDeltaTime",value:function(){return this.s_deltaTime}},{key:"updateTime",value:function(){this.s_currentFrame=Date.now(),this.s_deltaTime=(this.s_currentFrame-this.s_lastFrame)/1e3,this.s_lastFrame=this.s_currentFrame}},{key:"printMessage",value:function(e){console.log(e)}}],(i=null)&&Pn(t.prototype,i),a&&Pn(t,a),e}();function In(e,t,i,a,r,n,o){try{var s=e[n](o),c=s.value}catch(e){return void i(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function En(e){return function(){var t=this,i=arguments;return new Promise((function(a,r){var n=e.apply(t,i);function o(e){In(n,a,r,o,s,"next",e)}function s(e){In(n,a,r,o,s,"throw",e)}o(void 0)}))}}function Rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Fn(e,t,i){return t&&Vn(e.prototype,t),i&&Vn(e,i),e}function Dn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Tn(e,t){var i,a,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,a&&(r=2&n[0]?a.return:n[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,n[1])).done)return r;switch(a=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,a=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){o.label=n[1];break}if(6===n[0]&&o.label<r[1]){o.label=r[1],r=n;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(n);break}r[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(e){n=[6,e],a=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}}Bn(jn,"lastUpdate",Date.now()),Bn(jn,"s_currentFrame",0),Bn(jn,"s_lastFrame",0),Bn(jn,"s_deltaTime",0);var Ln,On=null,zn=function(){function e(){var t=this;Rn(this,e),Dn(this,"_pcmData",void 0),Dn(this,"_userTimeSeconds",void 0),Dn(this,"_lastRms",void 0),Dn(this,"_sampleOffset",void 0),Dn(this,"_wavFileInfo",void 0),Dn(this,"_byteReader",void 0),Dn(this,"_loadFiletoBytes",(function(e,i){t._byteReader._fileByte=e,t._byteReader._fileDataView=new DataView(t._byteReader._fileByte),t._byteReader._fileSize=i})),this._pcmData=null,this._userTimeSeconds=0,this._lastRms=0,this._sampleOffset=0,this._wavFileInfo=new Gn,this._byteReader=new Nn}return Fn(e,[{key:"update",value:function(e){var t,i;if(null==this._pcmData||this._sampleOffset>=this._wavFileInfo._samplesPerChannel)return this._lastRms=0,!1;this._userTimeSeconds+=e,(t=Math.floor(this._userTimeSeconds*this._wavFileInfo._samplingRate))>this._wavFileInfo._samplesPerChannel&&(t=this._wavFileInfo._samplesPerChannel),i=0;for(var a=0;a<this._wavFileInfo._numberOfChannels;a++)for(var r=this._sampleOffset;r<t;r++){var n=this._pcmData[a][r];i+=n*n}return i=Math.sqrt(i/(this._wavFileInfo._numberOfChannels*(t-this._sampleOffset))),this._lastRms=i,this._sampleOffset=t,!0}},{key:"start",value:function(e){this._sampleOffset=0,this._userTimeSeconds=0,this._lastRms=0,this.loadWavFile(e)}},{key:"getRms",value:function(){return this._lastRms}},{key:"loadWavFile",value:function(e){var t=!1;null!=this._pcmData&&this.releasePcmData();var i,a=(i=En((function(){return Tn(this,(function(t){return[2,fetch(e).then((function(e){return e.arrayBuffer()}))]}))})),function(){return i.apply(this,arguments)}),r=this;En((function(){var i,n,o,s,c,l;return Tn(this,(function(u){switch(u.label){case 0:return i=r._byteReader,[4,a()];case 1:if(i._fileByte=u.sent(),r._byteReader._fileDataView=new DataView(r._byteReader._fileByte),r._byteReader._fileSize=r._byteReader._fileByte.byteLength,r._byteReader._readOffset=0,null==r._byteReader._fileByte||r._byteReader._fileSize<4)return[2,!1];r._wavFileInfo._fileName=e;try{if(!r._byteReader.getCheckSignature("RIFF"))throw t=!1,new Error('Cannot find Signeture "RIFF".');if(r._byteReader.get32LittleEndian(),!r._byteReader.getCheckSignature("WAVE"))throw t=!1,new Error('Cannot find Signeture "WAVE".');if(!r._byteReader.getCheckSignature("fmt "))throw t=!1,new Error('Cannot find Signeture "fmt".');if(n=r._byteReader.get32LittleEndian(),1!=r._byteReader.get16LittleEndian())throw t=!1,new Error("File is not linear PCM.");for(r._wavFileInfo._numberOfChannels=r._byteReader.get16LittleEndian(),r._wavFileInfo._samplingRate=r._byteReader.get32LittleEndian(),r._byteReader.get32LittleEndian(),r._byteReader.get16LittleEndian(),r._wavFileInfo._bitsPerSample=r._byteReader.get16LittleEndian(),n>16&&(r._byteReader._readOffset+=n-16);!r._byteReader.getCheckSignature("data")&&r._byteReader._readOffset<r._byteReader._fileSize;)r._byteReader._readOffset+=r._byteReader.get32LittleEndian()+4;if(r._byteReader._readOffset>=r._byteReader._fileSize)throw t=!1,new Error('Cannot find "data" Chunk.');for(o=r._byteReader.get32LittleEndian(),r._wavFileInfo._samplesPerChannel=8*o/(r._wavFileInfo._bitsPerSample*r._wavFileInfo._numberOfChannels),r._pcmData=new Array(r._wavFileInfo._numberOfChannels),s=0;s<r._wavFileInfo._numberOfChannels;s++)r._pcmData[s]=new Float32Array(r._wavFileInfo._samplesPerChannel);for(c=0;c<r._wavFileInfo._samplesPerChannel;c++)for(l=0;l<r._wavFileInfo._numberOfChannels;l++)r._pcmData[l][c]=r.getPcmSample();t=!0}catch(e){console.log(e)}return[2]}}))}))();return t}},{key:"getPcmSample",value:function(){var e;switch(this._wavFileInfo._bitsPerSample){case 8:e=this._byteReader.get8()-128,e<<=24;break;case 16:e=this._byteReader.get16LittleEndian()<<16;break;case 24:e=this._byteReader.get24LittleEndian()<<8;break;default:e=0}return e/2147483647}},{key:"releasePcmData",value:function(){for(var e=0;e<this._wavFileInfo._numberOfChannels;e++)delete this._pcmData[e];delete this._pcmData,this._pcmData=null}}],[{key:"getInstance",value:function(){return null==On&&(On=new e),On}},{key:"releaseInstance",value:function(){null!=On&&(On=void 0),On=null}}]),e}(),Gn=function e(){Rn(this,e),Dn(this,"_fileName",void 0),Dn(this,"_numberOfChannels",void 0),Dn(this,"_bitsPerSample",void 0),Dn(this,"_samplingRate",void 0),Dn(this,"_samplesPerChannel",void 0),this._fileName="",this._numberOfChannels=0,this._bitsPerSample=0,this._samplingRate=0,this._samplesPerChannel=0},Nn=function(){function e(){Rn(this,e),Dn(this,"_fileByte",void 0),Dn(this,"_fileDataView",void 0),Dn(this,"_fileSize",void 0),Dn(this,"_readOffset",void 0),this._fileByte=null,this._fileDataView=null,this._fileSize=0,this._readOffset=0}return Fn(e,[{key:"get8",value:function(){var e=this._fileDataView.getUint8(this._readOffset);return this._readOffset++,e}},{key:"get16LittleEndian",value:function(){var e=this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=2,e}},{key:"get24LittleEndian",value:function(){var e=this._fileDataView.getUint8(this._readOffset+2)<<16|this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=3,e}},{key:"get32LittleEndian",value:function(){var e=this._fileDataView.getUint8(this._readOffset+3)<<24|this._fileDataView.getUint8(this._readOffset+2)<<16|this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=4,e}},{key:"getCheckSignature",value:function(e){var t=new Uint8Array(4),i=(new TextEncoder).encode(e);if(4!=e.length)return!1;for(var a=0;a<4;a++)t[a]=this.get8();return t[0]==i[0]&&t[1]==i[1]&&t[2]==i[2]&&t[3]==i[3]}}]),e}();function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e,t,i,a,r,n,o){try{var s=e[n](o),c=s.value}catch(e){return void i(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function Xn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Yn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Wn(e){return Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wn(e)}function Hn(e,t){return!t||"object"!==function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)&&"function"!=typeof t?qn(e):t}function Kn(e,t){return Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kn(e,t)}function Jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a,r,n=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return n}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Un(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=Wn(e);if(t){var r=Wn(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return Hn(this,i)}}function $n(e,t){var i,a,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,a&&(r=2&n[0]?a.return:n[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,n[1])).done)return r;switch(a=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,a=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){o.label=n[1];break}if(6===n[0]&&o.label<r[1]){o.label=r[1],r=n;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(n);break}r[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(e){n=[6,e],a=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}}!function(e){e[e.LoadAssets=0]="LoadAssets",e[e.LoadModel=1]="LoadModel",e[e.WaitLoadModel=2]="WaitLoadModel",e[e.LoadExpression=3]="LoadExpression",e[e.WaitLoadExpression=4]="WaitLoadExpression",e[e.LoadPhysics=5]="LoadPhysics",e[e.WaitLoadPhysics=6]="WaitLoadPhysics",e[e.LoadPose=7]="LoadPose",e[e.WaitLoadPose=8]="WaitLoadPose",e[e.SetupEyeBlink=9]="SetupEyeBlink",e[e.SetupBreath=10]="SetupBreath",e[e.LoadUserData=11]="LoadUserData",e[e.WaitLoadUserData=12]="WaitLoadUserData",e[e.SetupEyeBlinkIds=13]="SetupEyeBlinkIds",e[e.SetupLipSyncIds=14]="SetupLipSyncIds",e[e.SetupLayout=15]="SetupLayout",e[e.LoadMotion=16]="LoadMotion",e[e.WaitLoadMotion=17]="WaitLoadMotion",e[e.CompleteInitialize=18]="CompleteInitialize",e[e.CompleteSetupModel=19]="CompleteSetupModel",e[e.LoadTexture=20]="LoadTexture",e[e.WaitLoadTexture=21]="WaitLoadTexture",e[e.CompleteSetup=22]="CompleteSetup"}(Ln||(Ln={}));var eo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(o,e);var t,i,a,n=Qn(o);function o(e,t,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Yn(qn(s=n.call(this)),"canvas",void 0),Yn(qn(s),"gl",void 0),Yn(qn(s),"frameBuffer",void 0),Yn(qn(s),"textureManager",void 0),Yn(qn(s),"inModelName",void 0),Yn(qn(s),"_modelSetting",void 0),Yn(qn(s),"_modelHomeDir",void 0),Yn(qn(s),"_userTimeSeconds",void 0),Yn(qn(s),"_eyeBlinkIds",void 0),Yn(qn(s),"_lipSyncIds",void 0),Yn(qn(s),"_motions",void 0),Yn(qn(s),"_expressions",void 0),Yn(qn(s),"_hitArea",void 0),Yn(qn(s),"_userArea",void 0),Yn(qn(s),"_idParamAngleX",void 0),Yn(qn(s),"_idParamAngleY",void 0),Yn(qn(s),"_idParamAngleZ",void 0),Yn(qn(s),"_idParamEyeBallX",void 0),Yn(qn(s),"_idParamEyeBallY",void 0),Yn(qn(s),"_idParamBodyAngleX",void 0),Yn(qn(s),"_idParamMouthOpenY",void 0),Yn(qn(s),"_idParamTail",void 0),Yn(qn(s),"_idParam2",void 0),Yn(qn(s),"_state",void 0),Yn(qn(s),"_expressionCount",void 0),Yn(qn(s),"_textureCount",void 0),Yn(qn(s),"_motionCount",void 0),Yn(qn(s),"_allMotionCount",void 0),Yn(qn(s),"_wavFileHandler",void 0),Yn(qn(s),"_consistency",void 0),s.canvas=e,s.gl=t,s.frameBuffer=i,s.textureManager=a,s.inModelName=Ee,s._modelSetting=null,s._modelHomeDir=null,s._userTimeSeconds=0,s._eyeBlinkIds=new r,s._lipSyncIds=new r,s._motions=new N,s._expressions=new N,s._hitArea=new r,s._userArea=new r,s._idParamAngleX=Pe.getIdManager().getId(Fe.ParamAngleX),s._idParamAngleY=Pe.getIdManager().getId(Fe.ParamAngleY),s._idParamAngleZ=Pe.getIdManager().getId(Fe.ParamAngleZ),s._idParamEyeBallX=Pe.getIdManager().getId(Fe.ParamEyeBallX),s._idParamEyeBallY=Pe.getIdManager().getId(Fe.ParamEyeBallY),s._idParamBodyAngleX=Pe.getIdManager().getId(Fe.ParamBodyAngleX),s._idParamMouthOpenY=Pe.getIdManager().getId(Fe.ParamMouthOpenY),s._idParamTail=Pe.getIdManager().getId("ParamTail"),s._idParam2=Pe.getIdManager().getId("Param2"),s._mocConsistency=!0,s._state=Ln.LoadAssets,s._expressionCount=0,s._textureCount=0,s._motionCount=0,s._allMotionCount=0,s._wavFileHandler=new zn,s._consistency=!1,s}return t=o,i=[{key:"loadAssets",value:function(e,t){var i=this;this._modelHomeDir=e,fetch("".concat(this._modelHomeDir).concat(t)).then((function(e){return e.arrayBuffer()})).then((function(e){var t=new at(e,e.byteLength);i._state=Ln.LoadModel,i.setupModel(t)}))}},{key:"setupModel",value:function(e){var t=this;if(this._updating=!0,this._initialized=!1,this._modelSetting=e,""!=this._modelSetting.getModelFileName()){var i=this._modelSetting.getModelFileName();fetch("".concat(this._modelHomeDir).concat(i)).then((function(e){return e.arrayBuffer()})).then((function(e){t.loadModel(e,t._mocConsistency),t._state=Ln.LoadExpression,a()})),this._state=Ln.WaitLoadModel}else jn.printMessage("Model data does not exist.");var a=function(){if(t._modelSetting.getExpressionCount()>0){for(var e=function(e){var a=t._modelSetting.getExpressionName(e),r=t._modelSetting.getExpressionFileName(e);fetch("".concat(t._modelHomeDir).concat(r)).then((function(e){return e.arrayBuffer()})).then((function(e){var r=t.loadExpression(e,e.byteLength,a);null!=t._expressions.getValue(a)&&(Jt.delete(t._expressions.getValue(a)),t._expressions.setValue(a,null)),t._expressions.setValue(a,r),t._expressionCount++,t._expressionCount>=i&&(t._state=Ln.LoadPhysics,n())}))},i=t._modelSetting.getExpressionCount(),a=0;a<i;a++)e(a);t._state=Ln.WaitLoadExpression}else t._state=Ln.LoadPhysics,n()},n=function(){if(""!=t._modelSetting.getPhysicsFileName()){var e=t._modelSetting.getPhysicsFileName();fetch("".concat(t._modelHomeDir).concat(e)).then((function(e){return e.arrayBuffer()})).then((function(e){t.loadPhysics(e,e.byteLength),t._state=Ln.LoadPose,o()})),t._state=Ln.WaitLoadPhysics}else t._state=Ln.LoadPose,o()},o=function(){if(""!=t._modelSetting.getPoseFileName()){var e=t._modelSetting.getPoseFileName();fetch("".concat(t._modelHomeDir).concat(e)).then((function(e){return e.arrayBuffer()})).then((function(e){t.loadPose(e,e.byteLength),t._state=Ln.SetupEyeBlink,s()})),t._state=Ln.WaitLoadPose}else t._state=Ln.SetupEyeBlink,s()},s=function(){t._modelSetting.getEyeBlinkParameterCount()>0&&(t._eyeBlink=bt.create(t._modelSetting),t._state=Ln.SetupBreath),c()},c=function(){t._breath=ct.create();var e=new r;e.pushBack(new lt(t._idParamAngleX,0,15,6.5345,.5)),e.pushBack(new lt(t._idParamAngleY,0,8,3.5345,.5)),e.pushBack(new lt(t._idParamAngleZ,0,10,5.5345,.5)),e.pushBack(new lt(t._idParamBodyAngleX,0,4,15.5345,.5)),e.pushBack(new lt(Pe.getIdManager().getId(Fe.ParamBreath),.5,.5,3.2345,1)),t._breath.setParameters(e),t._state=Ln.LoadUserData,l()},l=function(){if(""!=t._modelSetting.getUserDataFile()){var e=t._modelSetting.getUserDataFile();fetch("".concat(t._modelHomeDir).concat(e)).then((function(e){return e.arrayBuffer()})).then((function(e){t.loadUserData(e,e.byteLength),t._state=Ln.SetupEyeBlinkIds,u()})),t._state=Ln.WaitLoadUserData}else t._state=Ln.SetupEyeBlinkIds,u()},u=function(){for(var e=t._modelSetting.getEyeBlinkParameterCount(),i=0;i<e;++i)t._eyeBlinkIds.pushBack(t._modelSetting.getEyeBlinkParameterId(i));t._state=Ln.SetupLipSyncIds,f()},f=function(){for(var e=t._modelSetting.getLipSyncParameterCount(),i=0;i<e;++i)t._lipSyncIds.pushBack(t._modelSetting.getLipSyncParameterId(i));t._state=Ln.SetupLayout,h()},h=function(){var e=new N;null!=t._modelSetting&&null!=t._modelMatrix?(t._modelSetting.getLayoutMap(e),t._modelMatrix.setupFromLayout(e),t._state=Ln.LoadMotion,d()):E("Failed to setupLayout().")},d=function(){t._state=Ln.WaitLoadMotion,t._model.saveParameters(),t._allMotionCount=0,t._motionCount=0;for(var e=[],i=t._modelSetting.getMotionGroupCount(),a=0;a<i;a++)e[a]=t._modelSetting.getMotionGroupName(a),t._allMotionCount+=t._modelSetting.getMotionCount(e[a]);for(var r=0;r<i;r++)t.preLoadMotionGroup(e[r]);0==i&&(t._state=Ln.LoadTexture,t._motionManager.stopAllMotions(),t._updating=!1,t._initialized=!0,t.createRenderer(),t.setupTextures(),t.getRenderer().startUp(t.gl))}}},{key:"setupTextures",value:function(){var e=this;if(this._state==Ln.LoadTexture){for(var t=this,i=function(i){if(""==t._modelSetting.getTextureFileName(i))return console.log("getTextureFileName null"),"continue";var r=t._modelSetting.getTextureFileName(i);r=t._modelHomeDir+r,t.textureManager.createTextureFromPngFile(r,!0,(function(t){e.getRenderer().bindTexture(i,t.id),e._textureCount++,e._textureCount>=a&&(e._state=Ln.CompleteSetup)})),t.getRenderer().setIsPremultipliedAlpha(!0)},a=this._modelSetting.getTextureCount(),r=0;r<a;r++)i(r);this._state=Ln.WaitLoadTexture}}},{key:"reloadRenderer",value:function(){this.deleteRenderer(),this.createRenderer(),this.setupTextures()}},{key:"update",value:function(){if(this._state==Ln.CompleteSetup){var e=jn.getDeltaTime();this._userTimeSeconds+=e,this._dragManager.update(e),this._dragX=this._dragManager.getX(),this._dragY=this._dragManager.getY();var t=!1;if(this._model.loadParameters(),this._motionManager.isFinished()?this.startRandomMotion("Idle",1):t=this._motionManager.updateMotion(this._model,e),this._model.saveParameters(),t||null!=this._eyeBlink&&this._eyeBlink.updateParameters(this._model,e),null!=this._expressionManager&&this._expressionManager.updateMotion(this._model,e),this._model.addParameterValueById(this._idParamAngleX,30*this._dragX),this._model.addParameterValueById(this._idParamAngleY,30*this._dragY),this._model.addParameterValueById(this._idParamAngleZ,this._dragX*this._dragY*-30),this._model.addParameterValueById(this._idParamBodyAngleX,10*this._dragX),this._model.addParameterValueById(this._idParamEyeBallX,this._dragX),this._model.addParameterValueById(this._idParamEyeBallY,this._dragY),null!=this._breath&&this._breath.updateParameters(this._model,e),null!=this._physics&&this._physics.evaluate(this._model,e),this._lipsync){var i;this._wavFileHandler.update(e),i=this._wavFileHandler.getRms();for(var a=0;a<this._lipSyncIds.getSize();++a)this._model.addParameterValueById(this._lipSyncIds.at(a),i,.8)}null!=this._pose&&this._pose.updateParameters(this._model,e);var r=!0,n=!1,o=void 0;try{for(var s,c=Object.entries(Ie[this.inModelName].customParams)[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=Jn(s.value,2),u=l[0],f=l[1];this._model.setParameterValueById(this[u],f)}}catch(e){n=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}this._model.update()}}},{key:"startMotion",value:function(e,t,i,a){var r=this;if(3==i)this._motionManager.setReservePriority(i);else if(!this._motionManager.reserveMotion(i))return this._debugMode&&jn.printMessage("[APP]can't start motion."),oa;var n=this._modelSetting.getMotionFileName(e,t),o="".concat(e,"_").concat(t),s=this._motions.getValue(o),c=!1;null==s?fetch("".concat(this._modelHomeDir).concat(n)).then((function(e){return e.arrayBuffer()})).then((function(i){s=r.loadMotion(i,i.byteLength,null,a);var n=r._modelSetting.getMotionFadeInTimeValue(e,t);n>=0&&s.setFadeInTime(n),(n=r._modelSetting.getMotionFadeOutTimeValue(e,t))>=0&&s.setFadeOutTime(n),s.setEffectIds(r._eyeBlinkIds,r._lipSyncIds),c=!0})):s.setFinishedMotionHandler(a);var l=this._modelSetting.getMotionSoundFileName(e,t);if(0!=l.localeCompare("")){var u=l;u=this._modelHomeDir+u,this._wavFileHandler.start(u)}return this._debugMode&&jn.printMessage("[APP]start motion: [".concat(e,"_").concat(t)),this._motionManager.startMotionPriority(s,c,i)}},{key:"startRandomMotion",value:function(e,t,i){if(0==this._modelSetting.getMotionCount(e))return oa;var a=Math.floor(Math.random()*this._modelSetting.getMotionCount(e));return this.startMotion(e,a,t,i)}},{key:"setExpression",value:function(e){var t=this._expressions.getValue(e);this._debugMode&&jn.printMessage("[APP]expression: [".concat(e,"]")),null!=t?this._expressionManager.startMotionPriority(t,!1,3):this._debugMode&&jn.printMessage("[APP]expression[".concat(e,"] is null"))}},{key:"setRandomExpression",value:function(){if(0!=this._expressions.getSize())for(var e=Math.floor(Math.random()*this._expressions.getSize()),t=0;t<this._expressions.getSize();t++)if(t==e){var i=this._expressions._keyValues[t].first;return void this.setExpression(i)}}},{key:"motionEventFired",value:function(e){j("{0} is fired on LAppModel!!",e.s)}},{key:"hitTest",value:function(e,t,i){if(this._opacity<1)return!1;for(var a=this._modelSetting.getHitAreasCount(),r=0;r<a;r++)if(this._modelSetting.getHitAreaName(r)==e){var n=this._modelSetting.getHitAreaId(r);return this.isHit(n,t,i)}return!1}},{key:"preLoadMotionGroup",value:function(e){for(var t=this,i=function(i){var r=t._modelSetting.getMotionFileName(e,i),n="".concat(e,"_").concat(i);t._debugMode&&jn.printMessage("[APP]load motion: ".concat(r," => [").concat(n,"]")),fetch("".concat(t._modelHomeDir).concat(r)).then((function(e){return e.arrayBuffer()})).then((function(t){var r=a.loadMotion(t,t.byteLength,n),o=a._modelSetting.getMotionFadeInTimeValue(e,i);o>=0&&r.setFadeInTime(o),(o=a._modelSetting.getMotionFadeOutTimeValue(e,i))>=0&&r.setFadeOutTime(o),r.setEffectIds(a._eyeBlinkIds,a._lipSyncIds),null!=a._motions.getValue(n)&&Jt.delete(a._motions.getValue(n)),a._motions.setValue(n,r),a._motionCount++,a._motionCount>=a._allMotionCount&&(a._state=Ln.LoadTexture,a._motionManager.stopAllMotions(),a._updating=!1,a._initialized=!0,a.createRenderer(),a.setupTextures(),a.getRenderer().startUp(a.gl))}))},a=this,r=0;r<this._modelSetting.getMotionCount(e);r++)i(r)}},{key:"releaseMotions",value:function(){this._motions.clear()}},{key:"releaseExpressions",value:function(){this._expressions.clear()}},{key:"doDraw",value:function(){if(null!=this._model){var e=[0,0,this.canvas.width,this.canvas.height];this.getRenderer().setRenderState(this.frameBuffer,e),this.getRenderer().drawModel()}}},{key:"draw",value:function(e){null!=this._model&&this._state==Ln.CompleteSetup&&(e.multiplyByMatrix(this._modelMatrix),this.getRenderer().setMvpMatrix(e),this.doDraw())}},{key:"hasMocConsistencyFromFile",value:function(){var e,t=this;return(e=function(){var e,i;return $n(this,(function(a){switch(a.label){case 0:return V(t._modelSetting.getModelFileName().localeCompare("")),""==t._modelSetting.getModelFileName()?[3,3]:(e=t._modelSetting.getModelFileName(),[4,fetch("".concat(t._modelHomeDir).concat(e))]);case 1:return[4,a.sent().arrayBuffer()];case 2:return i=a.sent(),t._consistency=hn.hasMocConsistency(i),t._consistency?j("Consistent MOC3."):j("Inconsistent MOC3."),[2,t._consistency];case 3:jn.printMessage("Model data does not exist."),a.label=4;case 4:return[2]}}))},function(){var t=this,i=arguments;return new Promise((function(a,r){var n=e.apply(t,i);function o(e){Zn(n,a,r,o,s,"next",e)}function s(e){Zn(n,a,r,o,s,"throw",e)}o(void 0)}))})()}}],i&&Xn(t.prototype,i),a&&Xn(t,a),o}(Mn);function to(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function io(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ao=null,ro=function(){function e(t,i,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),io(this,"canvas",void 0),io(this,"gl",void 0),io(this,"frameBuffer",void 0),io(this,"textureManager",void 0),io(this,"inModelName",void 0),io(this,"_viewMatrix",void 0),io(this,"_models",void 0),io(this,"_sceneIndex",void 0),io(this,"_finishedMotion",(function(e){jn.printMessage("Motion Finished:"),console.log(e)})),this.canvas=t,this.gl=i,this.frameBuffer=a,this.textureManager=n,this._viewMatrix=new p,this._models=new r,this._sceneIndex=0,this.inModelName=Ee,this.initScene()}var t,i,a;return t=e,a=[{key:"getInstance",value:function(t,i,a,r){return null==ao&&(ao=new e(t,i,a,r)),ao}},{key:"releaseInstance",value:function(){null!=ao&&(ao=void 0),ao=null}}],(i=[{key:"getModel",value:function(e){return e<this._models.getSize()?this._models.at(e):null}},{key:"releaseAllModel",value:function(){for(var e=0;e<this._models.getSize();e++)this._models.at(e).release(),this._models.set(e,null);this._models.clear()}},{key:"onDrag",value:function(e,t){for(var i=0;i<this._models.getSize();i++){var a=this.getModel(i);a&&a.setDragging(e,t)}}},{key:"onTap",value:function(e,t){jn.printMessage("[APP]tap point: {x: ".concat(e.toFixed(2)," y: ").concat(t.toFixed(2),"}"));for(var i=0;i<this._models.getSize();i++)this._models.at(i).hitTest(Re,e,t)?(jn.printMessage("[APP]hit area: [".concat(Re,"]")),this._models.at(i).setRandomExpression()):this._models.at(i).hitTest(Ve,e,t)&&(jn.printMessage("[APP]hit area: [".concat(Ve,"]")),this._models.at(i).startRandomMotion("TapBody",2,this._finishedMotion))}},{key:"onUpdate",value:function(){for(var e=this.canvas,t=e.width,i=e.height,a=this._models.getSize(),r=0;r<a;++r){var n=new p,o=this.getModel(r);o.getModel()&&(o.getModel().getCanvasWidth()>1&&t<i?(o.getModelMatrix().setWidth(2),n.scale(1,t/i)):n.scale(i/t,1),null!=this._viewMatrix&&n.multiplyByMatrix(this._viewMatrix)),n.translateY(Ie[this.inModelName].translateY),o.update(),o.draw(n)}}},{key:"initScene",value:function(){this.releaseAllModel(),this._models.pushBack(new eo(this.canvas,this.gl,this.frameBuffer,this.textureManager)),this._models.at(0).loadAssets(Ie[this.inModelName].basePath,Ie[this.inModelName].modelFileName)}},{key:"setViewMatrix",value:function(e){for(var t=0;t<16;t++)this._viewMatrix.getArray()[t]=e.getArray()[t]}}])&&to(t.prototype,i),a&&to(t,a),e}();function no(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function so(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function co(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var lo=function(){function e(t){no(this,e),so(this,"gl",void 0),so(this,"_textures",void 0),this.gl=t,this._textures=new r}var t,i,a;return t=e,(i=[{key:"release",value:function(){for(var e=this._textures.begin();e.notEqual(this._textures.end());e.preIncrement())this.gl.deleteTexture(e.ptr().id);this._textures=null}},{key:"createTextureFromPngFile",value:function(e,t,i){for(var a=function(a){if(a.ptr().fileName==e&&a.ptr().usePremultply==t)return a.ptr().img=new Image,a.ptr().img.onload=function(){return i(a.ptr())},a.ptr().img.src=e,{v:void 0}},r=this,n=this._textures.begin();n.notEqual(this._textures.end());n.preIncrement()){var o=a(n);if("object"===co(o))return o.v}var s=new Image;s.crossOrigin="Anonymous",s.onload=function(){var a=r.gl.createTexture();r.gl.bindTexture(r.gl.TEXTURE_2D,a),r.gl.texParameteri(r.gl.TEXTURE_2D,r.gl.TEXTURE_MIN_FILTER,r.gl.LINEAR_MIPMAP_LINEAR),r.gl.texParameteri(r.gl.TEXTURE_2D,r.gl.TEXTURE_MAG_FILTER,r.gl.LINEAR),t&&r.gl.pixelStorei(r.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),r.gl.texImage2D(r.gl.TEXTURE_2D,0,r.gl.RGBA,r.gl.RGBA,r.gl.UNSIGNED_BYTE,s),r.gl.generateMipmap(r.gl.TEXTURE_2D),r.gl.bindTexture(r.gl.TEXTURE_2D,null);var n=new uo;null!=n&&(n.fileName=e,n.width=s.width,n.height=s.height,n.id=a,n.img=s,n.usePremultply=t,r._textures.pushBack(n)),i(n)},s.src=e}},{key:"releaseTextures",value:function(){for(var e=0;e<this._textures.getSize();e++)this._textures.set(e,null);this._textures.clear()}},{key:"releaseTextureByTexture",value:function(e){for(var t=0;t<this._textures.getSize();t++)if(this._textures.at(t).id==e){this._textures.set(t,null),this._textures.remove(t);break}}},{key:"releaseTextureByFilePath",value:function(e){for(var t=0;t<this._textures.getSize();t++)if(this._textures.at(t).fileName==e){this._textures.set(t,null),this._textures.remove(t);break}}}])&&oo(t.prototype,i),a&&oo(t,a),e}(),uo=function e(){no(this,e),so(this,"img",void 0),so(this,"id",null),so(this,"width",0),so(this,"height",0),so(this,"usePremultply",void 0),so(this,"fileName",void 0)};function fo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ho(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function go(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function bo(e){return bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bo(e)}function mo(e,t){return!t||"object"!==function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)&&"function"!=typeof t?fo(e):t}function _o(e,t){return _o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_o(e,t)}function vo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=bo(e);if(t){var r=bo(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return mo(this,i)}}var po,yo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_o(e,t)}(n,e);var t,i,a,r=vo(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),go(fo(e=r.call(this)),"_screenLeft",void 0),go(fo(e),"_screenRight",void 0),go(fo(e),"_screenTop",void 0),go(fo(e),"_screenBottom",void 0),go(fo(e),"_maxLeft",void 0),go(fo(e),"_maxRight",void 0),go(fo(e),"_maxTop",void 0),go(fo(e),"_maxBottom",void 0),go(fo(e),"_maxScale",void 0),go(fo(e),"_minScale",void 0),e._screenLeft=0,e._screenRight=0,e._screenTop=0,e._screenBottom=0,e._maxLeft=0,e._maxRight=0,e._maxTop=0,e._maxBottom=0,e._maxScale=0,e._minScale=0,e}return t=n,(i=[{key:"adjustTranslate",value:function(e,t){this._tr[0]*this._maxLeft+(this._tr[12]+e)>this._screenLeft&&(e=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]),this._tr[0]*this._maxRight+(this._tr[12]+e)<this._screenRight&&(e=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]),this._tr[5]*this._maxTop+(this._tr[13]+t)<this._screenTop&&(t=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]),this._tr[5]*this._maxBottom+(this._tr[13]+t)>this._screenBottom&&(t=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]);var i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1]);p.multiply(i,this._tr,this._tr)}},{key:"adjustScale",value:function(e,t,i){var a=this.getMaxScale(),r=this.getMinScale(),n=i*this._tr[0];n<r?this._tr[0]>0&&(i=r/this._tr[0]):n>a&&this._tr[0]>0&&(i=a/this._tr[0]);var o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1]),s=new Float32Array([i,0,0,0,0,i,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-e,-t,0,1]);p.multiply(c,this._tr,this._tr),p.multiply(s,this._tr,this._tr),p.multiply(o,this._tr,this._tr)}},{key:"setScreenRect",value:function(e,t,i,a){this._screenLeft=e,this._screenRight=t,this._screenBottom=i,this._screenTop=a}},{key:"setMaxScreenRect",value:function(e,t,i,a){this._maxLeft=e,this._maxRight=t,this._maxTop=a,this._maxBottom=i}},{key:"setMaxScale",value:function(e){this._maxScale=e}},{key:"setMinScale",value:function(e){this._minScale=e}},{key:"getMaxScale",value:function(){return this._maxScale}},{key:"getMinScale",value:function(){return this._minScale}},{key:"isMaxScale",value:function(){return this.getScaleX()>=this._maxScale}},{key:"isMinScale",value:function(){return this.getScaleX()<=this._minScale}},{key:"getScreenLeft",value:function(){return this._screenLeft}},{key:"getScreenRight",value:function(){return this._screenRight}},{key:"getScreenBottom",value:function(){return this._screenBottom}},{key:"getScreenTop",value:function(){return this._screenTop}},{key:"getMaxLeft",value:function(){return this._maxLeft}},{key:"getMaxRight",value:function(){return this._maxRight}},{key:"getMaxBottom",value:function(){return this._maxBottom}},{key:"getMaxTop",value:function(){return this._maxTop}}])&&ho(t.prototype,i),a&&ho(t,a),n}(p);function ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wo(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function So(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.CubismViewMatrix=yo}(po||(po={}));var Ao=function(){function e(t,i,a,r,n,o,s,c){ko(this,e),So(this,"canvas",void 0),So(this,"gl",void 0),So(this,"_img",void 0),So(this,"_texture",void 0),So(this,"_vertexBuffer",void 0),So(this,"_uvBuffer",void 0),So(this,"_indexBuffer",void 0),So(this,"_rect",void 0),So(this,"_positionLocation",void 0),So(this,"_uvLocation",void 0),So(this,"_textureLocation",void 0),So(this,"_positionArray",void 0),So(this,"_uvArray",void 0),So(this,"_indexArray",void 0),So(this,"_firstDraw",void 0),this.canvas=t,this.gl=i,this._rect=new Co,this._rect.left=a-.5*n,this._rect.right=a+.5*n,this._rect.up=r+.5*o,this._rect.down=r-.5*o,this._img=s,this._texture=c,this._vertexBuffer=null,this._uvBuffer=null,this._indexBuffer=null,this._positionLocation=null,this._uvLocation=null,this._textureLocation=null,this._positionArray=null,this._uvArray=null,this._indexArray=null,this._firstDraw=!0}var t,i,a;return t=e,(i=[{key:"setBlur",value:function(e){var t=document.createElement("canvas");t.width=this._img.naturalWidth,t.height=this._img.naturalHeight;var i=t.getContext("2d");0!==e&&(i.filter="blur(".concat(e,"px)")),i.drawImage(this._img,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,this._texture),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,t.width,t.height,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i.getImageData(0,0,t.width,t.height).data),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"release",value:function(){this._rect=null,this.gl.deleteTexture(this._texture),this._texture=null,this.gl.deleteBuffer(this._uvBuffer),this._uvBuffer=null,this.gl.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null,this.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null}},{key:"getTexture",value:function(){return this._texture}},{key:"render",value:function(e){if(null!=this._texture){if(this._firstDraw){this._positionLocation=this.gl.getAttribLocation(e,"position"),this.gl.enableVertexAttribArray(this._positionLocation),this._uvLocation=this.gl.getAttribLocation(e,"uv"),this.gl.enableVertexAttribArray(this._uvLocation),this._textureLocation=this.gl.getUniformLocation(e,"texture"),this.gl.uniform1i(this._textureLocation,0),this._uvArray=new Float32Array([1,0,0,0,0,1,1,1]),this._uvBuffer=this.gl.createBuffer();var t=this.canvas.width,i=this.canvas.height;this._positionArray=new Float32Array([(this._rect.right-.5*t)/(.5*t),(this._rect.up-.5*i)/(.5*i),(this._rect.left-.5*t)/(.5*t),(this._rect.up-.5*i)/(.5*i),(this._rect.left-.5*t)/(.5*t),(this._rect.down-.5*i)/(.5*i),(this._rect.right-.5*t)/(.5*t),(this._rect.down-.5*i)/(.5*i)]),this._vertexBuffer=this.gl.createBuffer(),this._indexArray=new Uint16Array([0,1,2,3,2,0]),this._indexBuffer=this.gl.createBuffer(),this._firstDraw=!1}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._uvBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this._uvArray,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this._uvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this._positionArray,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this._positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._indexBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this._indexArray,this.gl.DYNAMIC_DRAW),this.gl.bindTexture(this.gl.TEXTURE_2D,this._texture),this.gl.drawElements(this.gl.TRIANGLES,this._indexArray.length,this.gl.UNSIGNED_SHORT,0)}}},{key:"isHit",value:function(e,t){var i=this.canvas.height-t;return e>=this._rect.left&&e<=this._rect.right&&i<=this._rect.up&&i>=this._rect.down}}])&&wo(t.prototype,i),a&&wo(t,a),e}(),Co=function e(){ko(this,e),So(this,"left",void 0),So(this,"right",void 0),So(this,"up",void 0),So(this,"down",void 0)};function xo(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Mo(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Po=function(){function e(t,i,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Mo(this,"canvas",void 0),Mo(this,"gl",void 0),Mo(this,"frameBuffer",void 0),Mo(this,"textureManager",void 0),Mo(this,"inModelName",void 0),Mo(this,"_deviceToScreen",void 0),Mo(this,"_viewMatrix",void 0),Mo(this,"_programId",void 0),Mo(this,"_back",void 0),Mo(this,"_changeModel",void 0),Mo(this,"_isClick",void 0),this.canvas=t,this.gl=i,this.frameBuffer=a,this.textureManager=r,this.inModelName=Ee,this._programId=null,this._back=null,this._deviceToScreen=new p,this._viewMatrix=new yo}var t,i,a;return t=e,(i=[{key:"changeModel",value:function(e){this.inModelName=e,this._viewMatrix.scale(Ie[this.inModelName].viewScale,Ie[this.inModelName].viewScale),this.initModelSprite()}},{key:"initialize",value:function(){var e=this.canvas,t=e.width,i=e.height,a=t/i,r=-a,n=a;if(this._viewMatrix.setScreenRect(r,n,-1,1),this._viewMatrix.scale(Ie[this.inModelName].viewScale,Ie[this.inModelName].viewScale),this._deviceToScreen.loadIdentity(),t>i){var o=Math.abs(n-r);this._deviceToScreen.scaleRelative(o/t,-o/t)}else{var s=Math.abs(2);this._deviceToScreen.scaleRelative(s/i,-s/i)}this._deviceToScreen.translateRelative(.5*-t,.5*-i),this._viewMatrix.setMaxScale(9),this._viewMatrix.setMinScale(.8),this._viewMatrix.setMaxScreenRect(-2,2,-2,2)}},{key:"release",value:function(){var e;this._viewMatrix=null,this._deviceToScreen=null,null===(e=this._back)||void 0===e||e.release(),this._back=null,this.gl.deleteProgram(this._programId),this._programId=null}},{key:"render",value:function(){this.gl.useProgram(this._programId),this._back&&this._back.render(this._programId),this.gl.flush();var e=ro.getInstance(this.canvas,this.gl,this.frameBuffer,this.textureManager);e.setViewMatrix(this._viewMatrix),e.onUpdate()}},{key:"initModelSprite",value:function(){var e=this,t=this.canvas.width,i=this.canvas.height,a=this.inModelName;Ie[this.inModelName].back?this.textureManager.createTextureFromPngFile(Ie[this.inModelName].basePath+Ie[this.inModelName].back,!0,(function(r){if(a===e.inModelName){var n=.5*t,o=.5*i,s=t,c=t*(r.width/r.height);e._back=new Ao(e.canvas,e.gl,n,o,s,c,r.img,r.id)}})):this._back=null}},{key:"initializeSprite",value:function(){this.canvas.width,this.canvas.height,this.initModelSprite(),null==this._programId&&(this._programId=function(e){var t=e.createShader(e.VERTEX_SHADER);if(null==t)throw new Error("failed to create vertexShader");e.shaderSource(t,"precision mediump float;attribute vec3 position;attribute vec2 uv;varying vec2 vuv;void main(void){   gl_Position = vec4(position, 1.0);   vuv = uv;}"),e.compileShader(t);var i=e.createShader(e.FRAGMENT_SHADER);if(null==i)throw new Error("failed to create fragmentShader");e.shaderSource(i,"precision mediump float;varying vec2 vuv;uniform sampler2D texture;void main(void){   gl_FragColor = texture2D(texture, vuv);}"),e.compileShader(i);var a=e.createProgram();return e.attachShader(a,t),e.attachShader(a,i),e.deleteShader(t),e.deleteShader(i),e.linkProgram(a),e.useProgram(a),a}(this.gl))}},{key:"transformViewX",value:function(e){var t=this._deviceToScreen.transformX(e);return this._viewMatrix.invertTransformX(t)}},{key:"transformViewY",value:function(e){var t=this._deviceToScreen.transformY(e);return this._viewMatrix.invertTransformY(t)}},{key:"transformScreenX",value:function(e){return this._deviceToScreen.transformX(e)}},{key:"transformScreenY",value:function(e){return this._deviceToScreen.transformY(e)}}])&&xo(t.prototype,i),a&&xo(t,a),e}();function Bo(e,t,i,a,r,n,o){try{var s=e[n](o),c=s.value}catch(e){return void i(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function jo(e){return function(){var t=this,i=arguments;return new Promise((function(a,r){var n=e.apply(t,i);function o(e){Bo(n,a,r,o,s,"next",e)}function s(e){Bo(n,a,r,o,s,"throw",e)}o(void 0)}))}}function Io(e,t){var i,a,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,a&&(r=2&n[0]?a.return:n[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,n[1])).done)return r;switch(a=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,a=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){o.label=n[1];break}if(6===n[0]&&o.label<r[1]){o.label=r[1],r=n;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(n);break}r[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(e){n=[6,e],a=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}}jo((function(){return Io(this,(function(e){return window.WL2D_CORE_LOADED=function(){!function(){var e=document.createElement("canvas");e.width=640,e.height=480,window.WL2D_ACTIVE=window.WL2D_ACTIVE||!1,window.WL2D_CANVAS&&(e=window.WL2D_CANVAS);var t=window.WL2D_GL?window.WL2D_GL:e.getContext("webgl"),i=t.getParameter(t.FRAMEBUFFER_BINDING);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA);var a=new lo(t),r=new Po(e,t,i,a);r.initialize(),Pe.startUp(new Be),Pe.initialize();var n=ro.getInstance(e,t,i,a);jn.updateTime(),r.initializeSprite();var o=0,s=function(e){n.inModelName=e,n.initScene();for(var t=0;t<n._models.getSize();t++)n._models.at(t).inModelName=e;r.changeModel(e)};window.WL2D_CHANGE_MODEL=s;var c,l=new Promise((function(e){if(r._back)e();else var t=setInterval((function(){r._back&&(clearInterval(t),e())}),70)})),u=(c=jo((function(e){return Io(this,(function(t){switch(t.label){case 0:return[4,l];case 1:return t.sent(),r._back.setBlur(e),[2]}}))})),function(e){return c.apply(this,arguments)});window.WL2D_SET_BLUR=u;var f=function(){++o%2==0&&window.WL2D_ACTIVE&&(jn.updateTime(),t.clearColor(.95,.83,.95,1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.clearDepth(1),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),r.render()),requestAnimationFrame(f)};f(),window.WL2D_CALLBACK&&window.WL2D_CALLBACK({inModelNames:Object.keys(Ie),changeModel:s,setBlur:u})}()},document.body.appendChild(document.createElement("script")).textContent='/**\n * Live2D Cubism Core\n * (C) 2019 Live2D Inc. All rights reserved.\n *\n * This file is licensed pursuant to the license agreement below.\n * This file corresponds to the "Redistributable Code" in the agreement.\n * https://www.live2d.com/eula/live2d-proprietary-software-license-agreement_en.html\n */\nvar Live2DCubismCore;!function(Live2DCubismCore){var _scriptDir,_csm=function(){function _csm(){}return _csm.getVersion=function(){return _em.ccall("csmGetVersion","number",[],[])},_csm.getLatestMocVersion=function(){return _em.ccall("csmGetLatestMocVersion","number",[],[])},_csm.getMocVersion=function(moc,mocSize){return _em.ccall("csmGetMocVersion","number",["number","number"],[moc,mocSize])},_csm.getSizeofModel=function(moc){return _em.ccall("csmGetSizeofModel","number",["number"],[moc])},_csm.reviveMocInPlace=function(memory,mocSize){return _em.ccall("csmReviveMocInPlace","number",["number","number"],[memory,mocSize])},_csm.initializeModelInPlace=function(moc,memory,modelSize){return _em.ccall("csmInitializeModelInPlace","number",["number","number","number"],[moc,memory,modelSize])},_csm.hasMocConsistency=function(memory,mocSize){return _em.ccall("csmHasMocConsistency","number",["number","number"],[memory,mocSize])},_csm.getParameterCount=function(model){return _em.ccall("csmGetParameterCount","number",["number"],[model])},_csm.getParameterIds=function(model){return _em.ccall("csmGetParameterIds","number",["number"],[model])},_csm.getParameterMinimumValues=function(model){return _em.ccall("csmGetParameterMinimumValues","number",["number"],[model])},_csm.getParameterTypes=function(model){return _em.ccall("csmGetParameterTypes","number",["number"],[model])},_csm.getParameterMaximumValues=function(model){return _em.ccall("csmGetParameterMaximumValues","number",["number"],[model])},_csm.getParameterDefaultValues=function(model){return _em.ccall("csmGetParameterDefaultValues","number",["number"],[model])},_csm.getParameterValues=function(model){return _em.ccall("csmGetParameterValues","number",["number"],[model])},_csm.getParameterKeyCounts=function(model){return _em.ccall("csmGetParameterKeyCounts","number",["number"],[model])},_csm.getParameterKeyValues=function(model){return _em.ccall("csmGetParameterKeyValues","number",["number"],[model])},_csm.getPartCount=function(model){return _em.ccall("csmGetPartCount","number",["number"],[model])},_csm.getPartIds=function(model){return _em.ccall("csmGetPartIds","number",["number"],[model])},_csm.getPartOpacities=function(model){return _em.ccall("csmGetPartOpacities","number",["number"],[model])},_csm.getPartParentPartIndices=function(model){return _em.ccall("csmGetPartParentPartIndices","number",["number"],[model])},_csm.getDrawableCount=function(model){return _em.ccall("csmGetDrawableCount","number",["number"],[model])},_csm.getDrawableIds=function(model){return _em.ccall("csmGetDrawableIds","number",["number"],[model])},_csm.getDrawableConstantFlags=function(model){return _em.ccall("csmGetDrawableConstantFlags","number",["number"],[model])},_csm.getDrawableDynamicFlags=function(model){return _em.ccall("csmGetDrawableDynamicFlags","number",["number"],[model])},_csm.getDrawableTextureIndices=function(model){return _em.ccall("csmGetDrawableTextureIndices","number",["number"],[model])},_csm.getDrawableDrawOrders=function(model){return _em.ccall("csmGetDrawableDrawOrders","number",["number"],[model])},_csm.getDrawableRenderOrders=function(model){return _em.ccall("csmGetDrawableRenderOrders","number",["number"],[model])},_csm.getDrawableOpacities=function(model){return _em.ccall("csmGetDrawableOpacities","number",["number"],[model])},_csm.getDrawableMaskCounts=function(model){return _em.ccall("csmGetDrawableMaskCounts","number",["number"],[model])},_csm.getDrawableMasks=function(model){return _em.ccall("csmGetDrawableMasks","number",["number"],[model])},_csm.getDrawableVertexCounts=function(model){return _em.ccall("csmGetDrawableVertexCounts","number",["number"],[model])},_csm.getDrawableVertexPositions=function(model){return _em.ccall("csmGetDrawableVertexPositions","number",["number"],[model])},_csm.getDrawableVertexUvs=function(model){return _em.ccall("csmGetDrawableVertexUvs","number",["number"],[model])},_csm.getDrawableIndexCounts=function(model){return _em.ccall("csmGetDrawableIndexCounts","number",["number"],[model])},_csm.getDrawableIndices=function(model){return _em.ccall("csmGetDrawableIndices","number",["number"],[model])},_csm.getDrawableMultiplyColors=function(model){return _em.ccall("csmGetDrawableMultiplyColors","number",["number"],[model])},_csm.getDrawableScreenColors=function(model){return _em.ccall("csmGetDrawableScreenColors","number",["number"],[model])},_csm.getDrawableParentPartIndices=function(model){return _em.ccall("csmGetDrawableParentPartIndices","number",["number"],[model])},_csm.mallocMoc=function(mocSize){return _em.ccall("csmMallocMoc","number",["number"],[mocSize])},_csm.mallocModelAndInitialize=function(moc){return _em.ccall("csmMallocModelAndInitialize","number",["number"],[moc])},_csm.malloc=function(size){return _em.ccall("csmMalloc","number",["number"],[size])},_csm.setLogFunction=function(handler){_em.ccall("csmSetLogFunction",null,["number"],[handler])},_csm.updateModel=function(model){_em.ccall("csmUpdateModel",null,["number"],[model])},_csm.readCanvasInfo=function(model,outSizeInPixels,outOriginInPixels,outPixelsPerUnit){_em.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[model,outSizeInPixels,outOriginInPixels,outPixelsPerUnit])},_csm.resetDrawableDynamicFlags=function(model){_em.ccall("csmResetDrawableDynamicFlags",null,["number"],[model])},_csm.free=function(memory){_em.ccall("csmFree",null,["number"],[memory])},_csm.initializeAmountOfMemory=function(size){_em.ccall("csmInitializeAmountOfMemory",null,["number"],[size])},_csm}(),Version=(Live2DCubismCore.AlignofMoc=64,Live2DCubismCore.AlignofModel=16,Live2DCubismCore.MocVersion_Unknown=0,Live2DCubismCore.MocVersion_30=1,Live2DCubismCore.MocVersion_33=2,Live2DCubismCore.MocVersion_40=3,Live2DCubismCore.MocVersion_42=4,Live2DCubismCore.ParameterType_Normal=0,Live2DCubismCore.ParameterType_BlendShape=1,function(){function Version(){}return Version.csmGetVersion=function(){return _csm.getVersion()},Version.csmGetLatestMocVersion=function(){return _csm.getLatestMocVersion()},Version.csmGetMocVersion=function(moc,mocBytes){return _csm.getMocVersion(moc._ptr,mocBytes.byteLength)},Version}()),Version=(Live2DCubismCore.Version=Version,function(){function Logging(){}return Logging.csmSetLogFunction=function(handler){Logging.logFunction=handler;handler=_em.addFunction(Logging.wrapLogFunction,"vi");_csm.setLogFunction(handler)},Logging.csmGetLogFunction=function(){return Logging.logFunction},Logging.wrapLogFunction=function(messagePtr){messagePtr=_em.UTF8ToString(messagePtr);Logging.logFunction(messagePtr)},Logging}()),Version=(Live2DCubismCore.Logging=Version,function(){function Moc(mocBytes){var memory=_csm.mallocMoc(mocBytes.byteLength);memory&&(new Uint8Array(_em.HEAPU8.buffer,memory,mocBytes.byteLength).set(new Uint8Array(mocBytes)),this._ptr=_csm.reviveMocInPlace(memory,mocBytes.byteLength),this._ptr||_csm.free(memory))}return Moc.prototype.hasMocConsistency=function(mocBytes){var memory=_csm.mallocMoc(mocBytes.byteLength);if(memory)return new Uint8Array(_em.HEAPU8.buffer,memory,mocBytes.byteLength).set(new Uint8Array(mocBytes)),mocBytes=_csm.hasMocConsistency(memory,mocBytes.byteLength),_csm.free(memory),mocBytes},Moc.fromArrayBuffer=function(buffer){if(!buffer)return null;buffer=new Moc(buffer);return buffer._ptr?buffer:null},Moc.prototype._release=function(){_csm.free(this._ptr),this._ptr=0},Moc}()),Version=(Live2DCubismCore.Moc=Version,function(){function Model(moc){this._ptr=_csm.mallocModelAndInitialize(moc._ptr),this._ptr&&(this.parameters=new Parameters(this._ptr),this.parts=new Parts(this._ptr),this.drawables=new Drawables(this._ptr),this.canvasinfo=new CanvasInfo(this._ptr))}return Model.fromMoc=function(moc){moc=new Model(moc);return moc._ptr?moc:null},Model.prototype.update=function(){_csm.updateModel(this._ptr)},Model.prototype.release=function(){_csm.free(this._ptr),this._ptr=0},Model}()),CanvasInfo=(Live2DCubismCore.Model=Version,function(modelPtr){var _canvasSize_data,_canvasSize_dataPtr,_canvasSize_nDataBytes,_canvasOrigin_dataPtr,_canvasOrigin_nDataBytes,_canvasPPU_nDataBytes,_canvasPPU_dataPtr;modelPtr&&(_canvasSize_nDataBytes=(_canvasSize_data=new Float32Array(2)).length*_canvasSize_data.BYTES_PER_ELEMENT,_canvasSize_dataPtr=_csm.malloc(_canvasSize_nDataBytes),(_canvasSize_dataPtr=new Uint8Array(_em.HEAPU8.buffer,_canvasSize_dataPtr,_canvasSize_nDataBytes)).set(new Uint8Array(_canvasSize_data.buffer)),_canvasOrigin_nDataBytes=(_canvasSize_nDataBytes=new Float32Array(2)).length*_canvasSize_nDataBytes.BYTES_PER_ELEMENT,_canvasOrigin_dataPtr=_csm.malloc(_canvasOrigin_nDataBytes),(_canvasOrigin_dataPtr=new Uint8Array(_em.HEAPU8.buffer,_canvasOrigin_dataPtr,_canvasOrigin_nDataBytes)).set(new Uint8Array(_canvasSize_nDataBytes.buffer)),_canvasPPU_nDataBytes=(_canvasOrigin_nDataBytes=new Float32Array(1)).length*_canvasOrigin_nDataBytes.BYTES_PER_ELEMENT,_canvasPPU_dataPtr=_csm.malloc(_canvasPPU_nDataBytes),(_canvasPPU_dataPtr=new Uint8Array(_em.HEAPU8.buffer,_canvasPPU_dataPtr,_canvasPPU_nDataBytes)).set(new Uint8Array(_canvasOrigin_nDataBytes.buffer)),_csm.readCanvasInfo(modelPtr,_canvasSize_dataPtr.byteOffset,_canvasOrigin_dataPtr.byteOffset,_canvasPPU_dataPtr.byteOffset),_canvasSize_data=new Float32Array(_canvasSize_dataPtr.buffer,_canvasSize_dataPtr.byteOffset,_canvasSize_dataPtr.length),_canvasSize_nDataBytes=new Float32Array(_canvasOrigin_dataPtr.buffer,_canvasOrigin_dataPtr.byteOffset,_canvasOrigin_dataPtr.length),_canvasOrigin_nDataBytes=new Float32Array(_canvasPPU_dataPtr.buffer,_canvasPPU_dataPtr.byteOffset,_canvasPPU_dataPtr.length),this.CanvasWidth=_canvasSize_data[0],this.CanvasHeight=_canvasSize_data[1],this.CanvasOriginX=_canvasSize_nDataBytes[0],this.CanvasOriginY=_canvasSize_nDataBytes[1],this.PixelsPerUnit=_canvasOrigin_nDataBytes[0],_csm.free(_canvasSize_dataPtr.byteOffset),_csm.free(_canvasOrigin_dataPtr.byteOffset),_csm.free(_canvasPPU_dataPtr.byteOffset))}),Parameters=(Live2DCubismCore.CanvasInfo=CanvasInfo,function(modelPtr){this.count=_csm.getParameterCount(modelPtr),length=_csm.getParameterCount(modelPtr),this.ids=new Array(length);for(var length,length2,_ids=new Uint32Array(_em.HEAPU32.buffer,_csm.getParameterIds(modelPtr),length),i=0;i<_ids.length;i++)this.ids[i]=_em.UTF8ToString(_ids[i]);length=_csm.getParameterCount(modelPtr),this.minimumValues=new Float32Array(_em.HEAPF32.buffer,_csm.getParameterMinimumValues(modelPtr),length),length=_csm.getParameterCount(modelPtr),this.types=new Int32Array(_em.HEAP32.buffer,_csm.getParameterTypes(modelPtr),length),length=_csm.getParameterCount(modelPtr),this.maximumValues=new Float32Array(_em.HEAPF32.buffer,_csm.getParameterMaximumValues(modelPtr),length),length=_csm.getParameterCount(modelPtr),this.defaultValues=new Float32Array(_em.HEAPF32.buffer,_csm.getParameterDefaultValues(modelPtr),length),length=_csm.getParameterCount(modelPtr),this.values=new Float32Array(_em.HEAPF32.buffer,_csm.getParameterValues(modelPtr),length),length=_csm.getParameterCount(modelPtr),this.keyCounts=new Int32Array(_em.HEAP32.buffer,_csm.getParameterKeyCounts(modelPtr),length),length=_csm.getParameterCount(modelPtr),length2=new Int32Array(_em.HEAP32.buffer,_csm.getParameterKeyCounts(modelPtr),length),this.keyValues=new Array(length);for(var _keyValues=new Uint32Array(_em.HEAPU32.buffer,_csm.getParameterKeyValues(modelPtr),length),i=0;i<_keyValues.length;i++)this.keyValues[i]=new Float32Array(_em.HEAPF32.buffer,_keyValues[i],length2[i])}),Parts=(Live2DCubismCore.Parameters=Parameters,function(modelPtr){this.count=_csm.getPartCount(modelPtr),length=_csm.getPartCount(modelPtr),this.ids=new Array(length);for(var length,_ids=new Uint32Array(_em.HEAPU32.buffer,_csm.getPartIds(modelPtr),length),i=0;i<_ids.length;i++)this.ids[i]=_em.UTF8ToString(_ids[i]);length=_csm.getPartCount(modelPtr),this.opacities=new Float32Array(_em.HEAPF32.buffer,_csm.getPartOpacities(modelPtr),length),length=_csm.getPartCount(modelPtr),this.parentIndices=new Int32Array(_em.HEAP32.buffer,_csm.getPartParentPartIndices(modelPtr),length)}),Drawables=(Live2DCubismCore.Parts=Parts,function(){function Drawables(modelPtr){this._modelPtr=modelPtr;for(var length,length2=null,_ids=(this.count=_csm.getDrawableCount(modelPtr),length=_csm.getDrawableCount(modelPtr),this.ids=new Array(length),new Uint32Array(_em.HEAPU32.buffer,_csm.getDrawableIds(modelPtr),length)),i=0;i<_ids.length;i++)this.ids[i]=_em.UTF8ToString(_ids[i]);length=_csm.getDrawableCount(modelPtr),this.constantFlags=new Uint8Array(_em.HEAPU8.buffer,_csm.getDrawableConstantFlags(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.dynamicFlags=new Uint8Array(_em.HEAPU8.buffer,_csm.getDrawableDynamicFlags(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.textureIndices=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableTextureIndices(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.drawOrders=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableDrawOrders(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.renderOrders=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableRenderOrders(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.opacities=new Float32Array(_em.HEAPF32.buffer,_csm.getDrawableOpacities(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.maskCounts=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableMaskCounts(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.vertexCounts=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableVertexCounts(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.indexCounts=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableIndexCounts(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.multiplyColors=new Float32Array(_em.HEAPF32.buffer,_csm.getDrawableMultiplyColors(modelPtr),4*length),length=_csm.getDrawableCount(modelPtr),this.screenColors=new Float32Array(_em.HEAPF32.buffer,_csm.getDrawableScreenColors(modelPtr),4*length),length=_csm.getDrawableCount(modelPtr),this.parentPartIndices=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableParentPartIndices(modelPtr),length),length=_csm.getDrawableCount(modelPtr),length2=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableMaskCounts(modelPtr),length),this.masks=new Array(length);for(var _masks=new Uint32Array(_em.HEAPU32.buffer,_csm.getDrawableMasks(modelPtr),length),i=0;i<_masks.length;i++)this.masks[i]=new Int32Array(_em.HEAP32.buffer,_masks[i],length2[i]);length=_csm.getDrawableCount(modelPtr),length2=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableVertexCounts(modelPtr),length),this.vertexPositions=new Array(length);for(var _vertexPositions=new Uint32Array(_em.HEAPU32.buffer,_csm.getDrawableVertexPositions(modelPtr),length),i=0;i<_vertexPositions.length;i++)this.vertexPositions[i]=new Float32Array(_em.HEAPF32.buffer,_vertexPositions[i],2*length2[i]);length=_csm.getDrawableCount(modelPtr),length2=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableVertexCounts(modelPtr),length),this.vertexUvs=new Array(length);for(var _vertexUvs=new Uint32Array(_em.HEAPU32.buffer,_csm.getDrawableVertexUvs(modelPtr),length),i=0;i<_vertexUvs.length;i++)this.vertexUvs[i]=new Float32Array(_em.HEAPF32.buffer,_vertexUvs[i],2*length2[i]);length=_csm.getDrawableCount(modelPtr),length2=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableIndexCounts(modelPtr),length),this.indices=new Array(length);for(var _indices=new Uint32Array(_em.HEAPU32.buffer,_csm.getDrawableIndices(modelPtr),length),i=0;i<_indices.length;i++)this.indices[i]=new Uint16Array(_em.HEAPU16.buffer,_indices[i],length2[i])}return Drawables.prototype.resetDynamicFlags=function(){_csm.resetDrawableDynamicFlags(this._modelPtr)},Drawables}()),Version=(Live2DCubismCore.Drawables=Drawables,function(){function Utils(){}return Utils.hasBlendAdditiveBit=function(bitfield){return 1==(1&bitfield)},Utils.hasBlendMultiplicativeBit=function(bitfield){return 2==(2&bitfield)},Utils.hasIsDoubleSidedBit=function(bitfield){return 4==(4&bitfield)},Utils.hasIsInvertedMaskBit=function(bitfield){return 8==(8&bitfield)},Utils.hasIsVisibleBit=function(bitfield){return 1==(1&bitfield)},Utils.hasVisibilityDidChangeBit=function(bitfield){return 2==(2&bitfield)},Utils.hasOpacityDidChangeBit=function(bitfield){return 4==(4&bitfield)},Utils.hasDrawOrderDidChangeBit=function(bitfield){return 8==(8&bitfield)},Utils.hasRenderOrderDidChangeBit=function(bitfield){return 16==(16&bitfield)},Utils.hasVertexPositionsDidChangeBit=function(bitfield){return 32==(32&bitfield)},Utils.hasBlendColorDidChangeBit=function(bitfield){return 64==(64&bitfield)},Utils}()),Version=(Live2DCubismCore.Utils=Version,function(){function Memory(){}return Memory.initializeAmountOfMemory=function(size){16777216<size&&_csm.initializeAmountOfMemory(size)},Memory}()),_em_module=(Live2DCubismCore.Memory=Version,_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(_em_module){_em_module=_em_module||{};var b,m,e={};for(m in b=b||(void 0!==_em_module?_em_module:{}))b.hasOwnProperty(m)&&(e[m]=b[m]);var w,z,A,v,x,r=!1,n="object"==typeof window,q="function"==typeof importScripts,r="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&!n&&!q,t=!n&&!r&&!q,u="",G=(r?(u=__dirname+"/",v=function(a,c){var d=B(a);return d||(z=z||require("fs"),a=(A=A||require("path")).normalize(a),d=z.readFileSync(a)),c?d:d.toString()},x=function(a){return assert((a=(a=v(a,!0)).buffer?a:new Uint8Array(a)).buffer),a},1<process.argv.length&&process.argv[1].replace(/\\\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(a){throw a}),process.on("unhandledRejection",C),b.inspect=function(){return"[Emscripten Module object]"}):t?("undefined"!=typeof read&&(v=function(a){var c=B(a);return c?D(c):read(a)}),x=function(a){var c;if(!(c=B(a))){if("function"==typeof readbuffer)return new Uint8Array(readbuffer(a));assert("object"==typeof(c=read(a,"binary")))}return c},"undefined"!=typeof print&&((console="undefined"==typeof console?{}:console).log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(n||q)&&(q?u=self.location.href:document.currentScript&&(u=document.currentScript.src),u=0!==(u=_scriptDir||u).indexOf("blob:")?u.substr(0,u.lastIndexOf("/")+1):"",v=function(a){try{var c=new XMLHttpRequest;return c.open("GET",a,!1),c.send(null),c.responseText}catch(d){if(a=B(a))return D(a);throw d}},q&&(x=function(a){try{var c=new XMLHttpRequest;return c.open("GET",a,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}catch(d){if(a=B(a))return a;throw d}}),w=function(a){var c=E,d=F,f=new XMLHttpRequest;f.open("GET",c,!0),f.responseType="arraybuffer",f.onload=function(){var g;200==f.status||0==f.status&&f.response?d(f.response):(g=B(c))?d(g.buffer):a()},f.onerror=a,f.send(null)}),b.print||console.log.bind(console)),H=b.printErr||console.warn.bind(console);for(m in e)e.hasOwnProperty(m)&&(b[m]=e[m]);var e=null,I=Array(1),J=0,K=!1;function assert(a,c){a||C("Assertion failed: "+c)}var buffer,N,M,O,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function ca(a,c,d){var f=c+d;for(d=c;a[d]&&!(f<=d);)++d;if(16<d-c&&a.subarray&&L)return L.decode(a.subarray(c,d));for(f="";c<d;){var h,p,g=a[c++];128&g?(h=63&a[c++],192==(224&g)?f+=String.fromCharCode((31&g)<<6|h):(p=63&a[c++],(g=224==(240&g)?(15&g)<<12|h<<6|p:(7&g)<<18|h<<12|p<<6|63&a[c++])<65536?f+=String.fromCharCode(g):(g-=65536,f+=String.fromCharCode(55296|g>>10,56320|1023&g)))):f+=String.fromCharCode(g)}return f}function da(a,c){return a?ca(M,a,c):""}function ea(a){return 0<a%16777216&&(a+=16777216-a%16777216),a}function fa(a){buffer=a,b.HEAP8=N=new Int8Array(a),b.HEAP16=new Int16Array(a),b.HEAP32=O=new Int32Array(a),b.HEAPU8=M=new Uint8Array(a),b.HEAPU16=new Uint16Array(a),b.HEAPU32=new Uint32Array(a),b.HEAPF32=new Float32Array(a),b.HEAPF64=new Float64Array(a)}function P(a){for(;0<a.length;){var d,c=a.shift();"function"==typeof c?c():"number"==typeof(d=c.C)?void 0===c.w?b.dynCall_v(d):b.dynCall_vi(d,c.w):d(void 0===c.w?null:c.w)}}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),n=b.TOTAL_MEMORY||16777216,n=(buffer=b.buffer||new ArrayBuffer(n)).byteLength,fa(buffer),O[1156]=5247712;var ia=[],ja=[],ka=[],la=[],Q=(Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(a,c){var d=65535&a,f=65535&c;return d*f+((a>>>16)*f+d*(c>>>16)<<16)|0}),Math.clz32||(Math.clz32=function(a){var c=32,d=a>>16;return d&&(c-=16,a=d),(d=a>>8)&&(c-=8,a=d),(d=a>>4)&&(c-=4,a=d),(d=a>>2)&&(c-=2,a=d),a>>1?c-2:c-a}),Math.trunc||(Math.trunc=function(a){return a<0?Math.ceil(a):Math.floor(a)}),0),S=null,T=null;function C(a){throw b.onAbort&&b.onAbort(a),G(a),H(a),K=!0,"abort("+a+"). Build with -s ASSERTIONS=1 for more info."}b.preloadedImages={},b.preloadedAudios={};var E=null,U="data:application/octet-stream;base64,";function na(a){return a.replace(/\\b__Z[\\w\\d_]+/g,function(a){return a==a?a:a+" ["+a+"]"})}function oa(){var a=Error();if(!a.stack){try{throw Error(0)}catch(c){a=c}if(!a.stack)return"(no stack trace available)"}return a.stack.toString()}var V=[null,[],[]];function W(a,c){var d=V[a];0===c||10===c?((1===a?G:H)(ca(d,0)),d.length=0):d.push(c)}function pa(a,c,d,f){try{for(var g=0,h=0;h<d;h++){for(var p=O[c+8*h>>2],k=O[c+(8*h+4)>>2],y=0;y<k;y++)W(a,M[p+y]);g+=k}return O[f>>2]=g,0}catch(R){return"undefined"!=typeof FS&&R instanceof FS.A||C(R),R.B}}function qa(){return N.length}function ra(a){try{var c=new ArrayBuffer(a);if(c.byteLength==a)return new Int8Array(c).set(N),sa(c),fa(c),1}catch(d){}}var ta=!(E="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAALgLAAAABAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAK/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgaW50ZXJwb2xhdGlvbiBmb3IgYmxlbmQgc2hhcGVzLiBDb21iaW5hdGlvbkNvdW50IGlzICVkLgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGlzIG1vYzMgc2l6ZSBpcyBpbnZhbGlkLgoATU9DMwBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogRmlsZVR5cGUgaXMgaW52YWxpZC4KAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGlzIG1vYzMgdmVyIGlzIGludmFsaWQgW3ZlcjolZF0uCgBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogVGhlIENvcmUgdW5zdXBwb3J0IGxhdGVyIHRoYW4gbW9jMyB2ZXI6WyVkXS4gVGhpcyBtb2MzIHZlciBpcyBbJWRdLgoAW0NTTV0gW0VdY3NtSGFzTW9jQ29uc2lzdGVuY3k6IEhlYWRlciBzZWN0aW9uIGlzIGludmFsaWQuCgBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogRGF0YSBzZWN0aW9uIGlzIGludmFsaWQuCgBMaXZlMkQgQ3ViaXNtIFNESyBDb3JlIFZlcnNpb24gJWQuJWQuJWQAW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIENvcnJ1cHRlZCAgbW9jMyBmaWxlLgoAW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIFRoZSBDb3JlIHVuc3VwcG9ydCBsYXRlciB0aGFuIG1vYzMgdmVyOlslZF0uIFRoaXMgbW9jMyB2ZXIgaXMgWyVkXS4KAFtDU01dIFtFXWNzbUdldE1vY1ZlcnNpb24gaXMgZmFpbGVkLiBDb3JydXB0ZWQgbW9jMyBmaWxlLgoAW0NTTV0gW0VdJXM6ICVzCgBjc21HZXRNb2NWZXJzaW9uACJhZGRyZXNzIiBpcyBudWxsLgBjc21IYXNNb2NDb25zaXN0ZW5jeQAiYWRkcmVzcyIgYWxpZ25tZW50IGlzIGludmFsaWQuACJzaXplIiBpcyBpbnZhbGlkLgBjc21SZXZpdmVNb2NJblBsYWNlAGNzbVJlYWRDYW52YXNJbmZvACJtb2RlbCIgaXMgaW52YWxpZC4AIm91dFNpemVJblBpeGVscyIgaXMgbnVsbC4AIm91dE9yaWdpbkluUGl4ZWxzIiBpcyBudWxsLgAib3V0UGl4ZWxzUGVyVW5pdCIgaXMgbnVsbC4AY3NtR2V0U2l6ZW9mTW9kZWwAIm1vYyIgaXMgaW52YWxpZC4AY3NtSW5pdGlhbGl6ZU1vZGVsSW5QbGFjZQAic2l6ZSIgaXMgaW52YWxpZABjc21VcGRhdGVNb2RlbABjc21HZXRQYXJhbWV0ZXJDb3VudABjc21HZXRQYXJhbWV0ZXJJZHMAY3NtR2V0UGFyYW1ldGVyVHlwZXMAY3NtR2V0UGFyYW1ldGVyTWluaW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJNYXhpbXVtVmFsdWVzAGNzbUdldFBhcmFtZXRlckRlZmF1bHRWYWx1ZXMAY3NtR2V0UGFyYW1ldGVyVmFsdWVzAGNzbUdldFBhcnRDb3VudABjc21HZXRQYXJ0SWRzAGNzbUdldFBhcnRPcGFjaXRpZXMAY3NtR2V0UGFydFBhcmVudFBhcnRJbmRpY2VzAGNzbUdldERyYXdhYmxlQ291bnQAY3NtR2V0RHJhd2FibGVJZHMAY3NtR2V0RHJhd2FibGVDb25zdGFudEZsYWdzAGNzbUdldERyYXdhYmxlRHluYW1pY0ZsYWdzAGNzbUdldERyYXdhYmxlVGV4dHVyZUluZGljZXMAY3NtR2V0RHJhd2FibGVEcmF3T3JkZXJzAGNzbUdldERyYXdhYmxlUmVuZGVyT3JkZXJzAGNzbUdldERyYXdhYmxlT3BhY2l0aWVzAGNzbUdldERyYXdhYmxlTWFza0NvdW50cwBjc21HZXREcmF3YWJsZU1hc2tzAGNzbUdldERyYXdhYmxlVmVydGV4Q291bnRzAGNzbUdldERyYXdhYmxlVmVydGV4UG9zaXRpb25zAGNzbUdldERyYXdhYmxlVmVydGV4VXZzAGNzbUdldERyYXdhYmxlSW5kZXhDb3VudHMAY3NtR2V0RHJhd2FibGVJbmRpY2VzAGNzbUdldERyYXdhYmxlTXVsdGlwbHlDb2xvcnMAY3NtR2V0RHJhd2FibGVTY3JlZW5Db2xvcnMAY3NtR2V0RHJhd2FibGVQYXJlbnRQYXJ0SW5kaWNlcwBjc21SZXNldERyYXdhYmxlRHluYW1pY0ZsYWdzAGNzbUdldFBhcmFtZXRlcktleUNvdW50cwBjc21HZXRQYXJhbWV0ZXJLZXlWYWx1ZXMAW0NTTV0gW1ddUm90YXRpb25EZWZvcm1lcjogTm90IGZvdW5kIHRyYW5zZm9ybWVkIERpcmVjdGlvbi4KAFtDU01dIFtFXVVwZGF0ZURlZm9ybWVySGllcmFyY2h5KCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KACVzCgAtKyAgIDBYMHgAKG51bGwpAC0wWCswWCAwWC0weCsweCAweABpbmYASU5GAG5hbgBOQU4ALg==");function D(a){for(var c=[],d=0;d<a.length;d++){var f=a[d];255<f&&(ta&&assert(!1,"Character code "+f+" ("+String.fromCharCode(f)+")  at offset "+d+" not in 0x00-0xFF."),f&=255),c.push(String.fromCharCode(f))}return c.join("")}var ua="function"==typeof atob?atob:function(a){var c="",d=0;a=a.replace(/[^A-Za-z0-9\\+\\/=]/g,"");do{var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++)),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++)),f=f<<2|g>>4,g=(15&g)<<4|h>>2,k=(3&h)<<6|p}while(c+=String.fromCharCode(f),64!==h&&(c+=String.fromCharCode(g)),64!==p&&(c+=String.fromCharCode(k)),d<a.length);return c};function B(a){if(String.prototype.startsWith?a.startsWith(U):0===a.indexOf(U)){if(a=a.slice(U.length),"boolean"==typeof r&&r){try{var c=Buffer.from(a,"base64")}catch(h){c=new Buffer(a,"base64")}var d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)}else try{for(var f=ua(a),g=new Uint8Array(f.length),c=0;c<f.length;++c)g[c]=f.charCodeAt(c);d=g}catch(h){throw Error("Converting base64 string to bytes failed.")}return d}}var F,Ca,Y,q=function(global,env,buffer){var a=new global.Int8Array(buffer),b=new global.Int16Array(buffer),c=new global.Int32Array(buffer),d=new global.Uint8Array(buffer),e=new global.Uint16Array(buffer),f=new global.Float32Array(buffer),g=new global.Float64Array(buffer),h=0|env.v,q=global.Math.floor,r=global.Math.pow,s=global.Math.cos,t=global.Math.sin,u=global.Math.atan2,v=global.Math.imul,w=global.Math.clz32,x=env.a,y=env.b,z=env.c,A=env.d,B=env.e,C=env.f,D=env.g,E=env.h,F=env.i,G=env.j,H=env.k,I=env.l,J=env.m,S=4832;function qa(b,d){b|=0;var G,H,I,J,K,L,M,N,O,P,Q,R,T,U,V,W,X,Y,Z,_,ca,da,ea,fa,ga,ha,ja,ka,la,ma,na,oa,qa,sa,ta,va,wa,xa,ya,za,Aa,Ba,Da,Fa,Ha,La,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,$=0,aa=0,ba=0,ua=0,Ca=0,Ea=0,Ga=0,Ia=0,Ja=0,Ka=0,Ma=0,Na=S,f=S=S+63&-64;if(S=S+624|0,La=f+616|0,_=f+608|0,i=f+600|0,h=f+592|0,Ka=f,(d|=0)>>>0<1280)return ia(0,993,f+576|0),S=Na,(Ma=0)|Ma;if(0|yc(b))return ia(0,1057,f+584|0),S=Na,(Ma=0)|Ma;if(g=255&(f=0|a[(C=b+4|0)>>0]),!(f<<24>>24))return c[h>>2]=g,ia(0,1110,h),S=Na,(Ma=0)|Ma;if(4<(255&f))return c[i>>2]=4,c[i+4>>2]=g,ia(0,1177,i),S=Na,(Ma=0)|Ma;(y=0!=(0|a[(x=b+5|0)>>0]))&&(sb(C,1),tb(b+64|0,4,160)),$c(0|Ka,0,576),pa(b,Ka),F=0|a[C>>0],w=b+d|0,f=128+(z=0|c[Ka>>2])|0;a:do{if(z>>>0<b>>>0|w>>>0<z>>>0||f>>>0<b>>>0|w>>>0<f>>>0||(o=(m=0|c[Ka+4>>2])+64|0,m>>>0<b>>>0|w>>>0<m>>>0)||m>>>0<f>>>0|o>>>0<b>>>0|w>>>0<o>>>0||!(-1<(0|($=0|c[z>>2])))||(p=(n=0|c[Ka+8>>2])+(u=$<<2)|0,n>>>0<b>>>0|w>>>0<n>>>0)||n>>>0<o>>>0|p>>>0<b>>>0|w>>>0<p>>>0||(q=(aa=0|c[(ba=Ka+12|0)>>2])+($<<6)|0,aa>>>0<b>>>0|w>>>0<aa>>>0)||aa>>>0<p>>>0|q>>>0<b>>>0|w>>>0<q>>>0||(r=(j=0|c[(ua=Ka+16|0)>>2])+u|0,j>>>0<b>>>0|w>>>0<j>>>0)||j>>>0<q>>>0|r>>>0<b>>>0|w>>>0<r>>>0||(s=(k=0|c[(Ca=Ka+20|0)>>2])+u|0,k>>>0<b>>>0|w>>>0<k>>>0)||k>>>0<r>>>0|s>>>0<b>>>0|w>>>0<s>>>0||(t=(l=0|c[(Ea=Ka+24|0)>>2])+u|0,l>>>0<b>>>0|w>>>0<l>>>0))Ma=319;else{if(l>>>0<s>>>0|t>>>0<b>>>0|w>>>0<t>>>0){Ma=319;break}if(g=(f=0|c[(Y=Ka+28|0)>>2])+u|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<t>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(o=Ka+32|0)>>2])+u|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(i=(f=0|c[(Z=Ka+36|0)>>2])+u|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if((0|(g=0|c[z+4>>2]))<=-1){Ma=319;break}if(h=(f=0|c[Ka+40>>2])+(d=g<<2)|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(t=Ka+44|0)>>2])+(g<<6)|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(n=Ka+48|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(A=Ka+52|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(u=Ka+56|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(D=Ka+60|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(B=Ka+64|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(p=Ka+68|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(E=Ka+72|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if((0|(f=0|c[z+8>>2]))<=-1){Ma=319;break}if(i=(g=0|c[Ka+76>>2])+(m=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if(g=(f=0|c[(ga=Ka+80|0)>>2])+m|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<i>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(Ja=Ka+84|0)>>2])+m|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(Ga=Ka+92|0)>>2])+m|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(sa=Ka+96|0)>>2])+m|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(i=(f=0|c[(ea=Ka+100|0)>>2])+m|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if((0|(f=0|c[z+12>>2]))<=-1){Ma=319;break}if(h=(g=0|c[Ka+108>>2])+(l=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(ya=Ka+112|0)>>2])+l|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(Ia=Ka+116|0)>>2])+l|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[Ka+124>>2])+l|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if((0|(i=0|c[z+16>>2]))<=-1){Ma=319;break}if(h=(f=0|c[Ka+128>>2])+(k=i<<2)|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[Ka+132>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[Ka+136>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[Ka+140>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(ca=Ka+144|0)>>2])+(i<<6)|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(fa=Ka+148|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(ha=Ka+152|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(Ha=Ka+156|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(xa=Ka+164|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(wa=Ka+168|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(Aa=Ka+172|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(za=Ka+176|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(Ba=Ka+180|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[Ka+184>>2])+i|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(Fa=Ka+188|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(la=Ka+192|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(qa=Ka+196|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(ka=Ka+200|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(va=Ka+204|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(i=(f=0|c[(ta=Ka+208|0)>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if((0|(g=0|c[z+20>>2]))<=-1){Ma=319;break}if(h=(f=0|c[Ka+212>>2])+(j=g<<2)|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(Da=Ka+216|0)>>2])+(g<<6)|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[Ka+220>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[Ka+224>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[Ka+228>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(na=Ka+232|0)>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(ma=Ka+236|0)>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(oa=Ka+244|0)>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(ja=Ka+248|0)>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if((0|(f=0|c[z+24>>2]))<=-1){Ma=319;break}if(i=(g=0|c[Ka+272>>2])+(f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if((0|(f=0|c[z+28>>2]))<=-1){Ma=319;break}if(d=(g=0|c[Ka+276>>2])+(h=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<i>>>0|d>>>0<b>>>0|w>>>0<d>>>0){Ma=319;break}if(i=(f=0|c[(da=Ka+280|0)>>2])+h|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<d>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if((0|(f=0|c[z+32>>2]))<=-1){Ma=319;break}if(h=(g=0|c[Ka+284>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[Ka+288>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[Ka+292>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[Ka+296>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[Ka+300>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(r=Ka+304|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(i=(f=0|c[(X=Ka+308|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if((0|(f=0|c[z+36>>2]))<=-1){Ma=319;break}if(h=(g=0|c[Ka+312>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[Ka+316>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(W=Ka+320|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if((0|(f=0|c[z+40>>2]))<=-1){Ma=319;break}if(i=(g=0|c[Ka+324>>2])+(f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if((0|(f=0|c[z+44>>2]))<=-1){Ma=319;break}if(d=(g=0|c[(V=Ka+336|0)>>2])+(f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<i>>>0|d>>>0<b>>>0|w>>>0<d>>>0){Ma=319;break}if((0|(f=0|c[z+48>>2]))<=-1){Ma=319;break}if(i=(g=0|c[Ka+340>>2])+(h=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<d>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if(d=(f=0|c[(U=Ka+344|0)>>2])+h|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<i>>>0|d>>>0<b>>>0|w>>>0<d>>>0){Ma=319;break}if((0|(f=0|c[z+52>>2]))<=-1){Ma=319;break}if(i=(g=0|c[Ka+328>>2])+(h=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<d>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if(h=(f=0|c[(s=Ka+332|0)>>2])+h|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if((0|(f=0|c[z+56>>2]))<=-1){Ma=319;break}if(i=(g=0|c[Ka+428>>2])+(f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if((0|(f=0|c[z+60>>2]))<=-1){Ma=319;break}if(h=(g=0|c[Ka+432>>2])+(f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if((0|(f=0|c[z+64>>2]))<=-1){Ma=319;break}if(i=(g=0|c[Ka+436>>2])+(f<<1)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if((0|(f=0|c[z+68>>2]))<=-1){Ma=319;break}if(h=(g=0|c[(T=Ka+440|0)>>2])+(f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if((0|(f=0|c[z+72>>2]))<=-1){Ma=319;break}if(i=(g=0|c[Ka+444>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if(g=(f=0|c[(R=Ka+448|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<i>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[Ka+452>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[Ka+456>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[Ka+460>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if((0|(f=0|c[z+76>>2]))<=-1){Ma=319;break}if(i=(g=0|c[Ka+464>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if(g=(f=0|c[(K=Ka+468|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<i>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(Q=Ka+472|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if((0|(g=0|c[z+80>>2]))<=-1){Ma=319;break}if(i=(f=0|c[Ka+476>>2])+(d=g<<2)|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if(g=(f=0|c[(J=Ka+480|0)>>2])+(g<<6)|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<i>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(H=Ka+484|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(I=Ka+488|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(G=Ka+492|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(L=Ka+496|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(O=Ka+500|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if(g=(f=0|c[(P=Ka+504|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(h=(f=0|c[(M=Ka+508|0)>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}if((0|(g=0|c[z+84>>2]))<=-1){Ma=319;break}if(i=(f=0|c[Ka+512>>2])+(g<<2)|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break}if(d=(f=0|c[(N=Ka+516|0)>>2])+(g<<1)|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break}if(f>>>0<i>>>0|d>>>0<b>>>0|w>>>0<d>>>0){Ma=319;break}if((0|(f=0|c[z+88>>2]))<=-1){Ma=319;break}if(h=(g=0|c[Ka+520>>2])+(f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break}if(g>>>0<d>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break}do{if(1<(255&F)){if(g=(f=0|c[Ka+104>>2])+m|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if((255&F)<=3)break;if(h=(f=0|c[Ka+260>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(g=(f=0|c[Ka+264>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(i=(f=0|c[Ka+268>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break a}if(h=(f=0|c[Ka+88>>2])+m|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(g=(f=0|c[Ka+120>>2])+l|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(i=(f=0|c[Ka+160>>2])+k|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break a}if((0|(f=0|c[z+92>>2]))<=-1){Ma=319;break a}if(h=(g=0|c[Ka+524>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(g=(f=0|c[Ka+528>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(i=(f=0|c[Ka+532>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break a}if((0|(f=0|c[z+96>>2]))<=-1){Ma=319;break a}if(h=(g=0|c[Ka+536>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(i=(f=0|c[Ka+540>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break a}if(g=(f=0|c[Ka+544>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<i>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(h=(f=0|c[Ka+240>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(g=(f=0|c[Ka+252>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(i=(f=0|c[Ka+256>>2])+j|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break a}if((0|(f=0|c[z+100>>2]))<=-1){Ma=319;break a}if(h=(g=0|c[Ka+348>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(g=(f=0|c[Ka+352>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(i=(f=0|c[Ka+356>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break a}if((0|(f=0|c[z+104>>2]))<=-1){Ma=319;break a}if(h=(g=0|c[Ka+360>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(g=(f=0|c[Ka+364>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(h=(f=0|c[Ka+368>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(g=(f=0|c[Ka+372>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(i=(f=0|c[Ka+376>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break a}if((0|(f=0|c[z+108>>2]))<=-1){Ma=319;break a}if(h=(g=0|c[Ka+380>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(g=(f=0|c[Ka+384>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(i=(f=0|c[Ka+388>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break a}if((0|(f=0|c[z+112>>2]))<=-1){Ma=319;break a}if(h=(g=0|c[Ka+392>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(g=(f=0|c[Ka+396>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(h=(f=0|c[Ka+400>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if((0|(f=0|c[z+116>>2]))<=-1){Ma=319;break a}if(i=(g=0|c[Ka+404>>2])+(f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(g>>>0<h>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break a}if((0|(f=0|c[z+120>>2]))<=-1){Ma=319;break a}if(h=(g=0|c[Ka+408>>2])+(d=f<<2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(g=(f=0|c[Ka+412>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<h>>>0|g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(i=(f=0|c[Ka+416>>2])+d|0,f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}if(f>>>0<g>>>0|i>>>0<b>>>0|w>>>0<i>>>0){Ma=319;break a}if((0|(f=0|c[z+124>>2]))<=-1){Ma=319;break a}if(h=(g=0|c[Ka+420>>2])+(f<<=2)|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(g>>>0<i>>>0|h>>>0<b>>>0|w>>>0<h>>>0){Ma=319;break a}if(f=(g=0|c[Ka+424>>2])+f|0,g>>>0<b>>>0|w>>>0<g>>>0){Ma=319;break a}if(g>>>0<h>>>0|f>>>0<b>>>0|w>>>0<f>>>0){Ma=319;break a}}}while(0);C=y?(ra(b),aa=(a[x>>0]=0)|c[Ka>>2],F=0|a[C>>0],q=0|c[aa>>2],b=aa,g=0|c[ba>>2],aa):(q=$,g=aa,b=z);b:do{if(0<(0|q)){f=0;do{if(63<(0|Ac(g+(f<<6)|0))>>>0)break b}while((0|(f=f+1|0))<(0|q));f=0|c[ua>>2],g=0|c[(h=b+48|0)>>2],i=0;do{if(ua=0|c[f+(i<<2)>>2],i=i+1|0,(0|ua)<0|(0|g)<=(0|ua))break b}while((0|i)<(0|q));k=0|c[Ca>>2],f=0|c[Ea>>2],g=0|c[b+24>>2],j=0;do{if(0|(i=0|c[f+(j<<2)>>2])){if((0|i)<0|(0|g)<(0|i))break b;if(!(-1<(0|(d=0|c[k+(j<<2)>>2]))&(0|d)<(0|g)))break b;if((Ea=d+i|0)>>>31|(0|g)<(0|Ea)|0)break b}}while((0|(j=j+1|0))<(0|q));f=0|c[Y>>2],g=0;do{if(1<(0|c[f+(g<<2)>>2])>>>0)break b}while((0|(g=g+1|0))<(0|q));f=0|c[o>>2],g=0;do{if(1<(0|c[f+(g<<2)>>2])>>>0)break b}while((0|(g=g+1|0))<(0|q));for(f=0|c[Z>>2],g=0;;){if(Ea=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ea)<-1|(0|q)<=(0|Ea))break b;if((0|q)<=(0|g)){Ma=345;break}}}else h=b+48|0,Ma=345}while(0);c:do{if(345==(0|Ma)){o=0|c[b+4>>2],f=0|c[t>>2];d:do{if(0<(0|o)){g=0;do{if(63<(0|Ac(f+(g<<6)|0))>>>0)break c}while((0|(g=g+1|0))<(0|o));g=0|c[n>>2],l=0|c[h>>2],f=0;do{if(Ea=0|c[g+(f<<2)>>2],f=f+1|0,(0|Ea)<0|(0|l)<=(0|Ea))break c}while((0|f)<(0|o));f=0|c[A>>2],g=0;do{if(1<(0|c[f+(g<<2)>>2])>>>0)break c}while((0|(g=g+1|0))<(0|o));f=0|c[u>>2],g=0;do{if(1<(0|c[f+(g<<2)>>2])>>>0)break c}while((0|(g=g+1|0))<(0|o));f=0|c[D>>2],g=0;do{if(Ea=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ea)<-1|(0|q)<=(0|Ea))break c}while((0|g)<(0|o));f=0|c[B>>2],g=0;do{if(Ea=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ea)<-1|(0|o)<=(0|Ea))break c}while((0|g)<(0|o));k=0|c[p>>2],f=0;do{if(1<(0|c[k+(f<<2)>>2])>>>0)break c}while((0|(f=f+1|0))<(0|o));for(g=0|c[E>>2],f=b+8|0,i=b+12|0,j=0;;){switch(h=0|c[g+(j<<2)>>2],0|c[k+(j<<2)>>2]){case 0:d=f;break;case 1:d=i;break;default:break c}if((0|h)<=-1)break c;if(j=j+1|0,(0|h)>=(0|c[d>>2]))break c;if((0|o)<=(0|j)){w=l;break d}}}else w=0|c[h>>2],f=b+8|0}while(0);if(E=0|c[f>>2],f=0|c[Ka+76>>2],B=0<(0|E)){g=0;do{if(Ea=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ea)<0|(0|w)<=(0|Ea))break c}while((0|g)<(0|E));f=0|c[ga>>2],g=0|c[Ja>>2],h=0|c[(k=b+28|0)>>2],j=0;do{if(0|(i=0|c[g+(j<<2)>>2])){if((0|i)<0|(0|h)<(0|i))break c;if(!(-1<(0|(d=0|c[f+(j<<2)>>2]))&(0|d)<(0|h)))break c;if((Ea=d+i|0)>>>31|(0|h)<(0|Ea)|0)break c}}while((0|(j=j+1|0))<(0|E));for(i=0|c[sa>>2],f=0|c[ea>>2],g=0|c[Ga>>2],h=0;;){if(ua=0|c[i+(h<<2)>>2],Ca=0|c[f+(h<<2)>>2],Ea=0|c[g+(h<<2)>>2],h=h+1|0,!((0|v(Ca+1|0,ua+1|0))==(0|Ea)&0<(0|ua)&0<(0|Ca)&0<(0|Ea)))break c;if((0|E)<=(0|h)){D=k;break}}}else D=b+28|0;if(z=0|c[b+12>>2],f=0|c[Ka+108>>2],y=0<(0|z)){g=0;do{if(Ea=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ea)<0|(0|w)<=(0|Ea))break c}while((0|g)<(0|z));for(f=0|c[ya>>2],g=0|c[Ia>>2],h=0|c[(j=b+32|0)>>2],k=0;;){if(0|(i=0|c[g+(k<<2)>>2])){if((0|i)<0|(0|h)<(0|i))break c;if(!(-1<(0|(d=0|c[f+(k<<2)>>2]))&(0|d)<(0|h)))break c;if((Ea=d+i|0)>>>31|(0|h)<(0|Ea)|0)break c}if((0|z)<=(0|(k=k+1|0))){m=j;break}}}else m=b+32|0;if(p=0|c[(u=b+16|0)>>2],f=0|c[ca>>2],n=0<(0|p)){g=0;do{if(63<(0|Ac(f+(g<<6)|0))>>>0)break c}while((0|(g=g+1|0))<(0|p));f=0|c[fa>>2],g=0;do{if(Ea=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ea)<0|(0|w)<=(0|Ea))break c}while((0|g)<(0|p));f=0|c[ha>>2],g=0|c[Ha>>2],h=0|c[(l=b+36|0)>>2],j=0;do{if(0|(i=0|c[g+(j<<2)>>2])){if((0|i)<0|(0|h)<(0|i))break c;if(!(-1<(0|(d=0|c[f+(j<<2)>>2]))&(0|d)<(0|h)))break c;if((Ea=d+i|0)>>>31|(0|h)<(0|Ea)|0)break c}}while((0|(j=j+1|0))<(0|p));f=0|c[xa>>2],g=0;do{if(1<(0|c[f+(g<<2)>>2])>>>0)break c}while((0|(g=g+1|0))<(0|p));f=0|c[wa>>2],g=0;do{if(1<(0|c[f+(g<<2)>>2])>>>0)break c}while((0|(g=g+1|0))<(0|p));f=0|c[Aa>>2],g=0;do{if(Ea=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ea)<-1|(0|q)<=(0|Ea))break c}while((0|g)<(0|p));f=0|c[za>>2],g=0;do{if(Ea=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ea)<-1|(0|o)<=(0|Ea))break c}while((0|g)<(0|p));f=0|c[Ba>>2],g=0;do{if((0|c[f+(g<<2)>>2])<0)break c}while((0|(g=g+1|0))<(0|p));i=0|c[Fa>>2],f=0;do{if((0|c[i+(f<<2)>>2])<0)break c}while((0|(f=f+1|0))<(0|p));f=0|c[la>>2],g=0|c[b+60>>2],h=0;do{if(Ea=(0|c[f+(h<<2)>>2])+(c[i+(h<<2)>>2]<<1)|0,h=h+1|0,Ea>>>31|(0|g)<(0|Ea)|0)break c}while((0|h)<(0|p));j=0|c[qa>>2],f=0|c[ka>>2],g=0|c[b+64>>2],d=0;do{if(0|(h=0|c[f+(d<<2)>>2])){if((0|h)<0|(0|g)<(0|h))break c;if(!(-1<(0|(i=0|c[j+(d<<2)>>2]))&(0|i)<(0|g)))break c;if((Ea=i+h|0)>>>31|(0|g)<(0|Ea)|0)break c}}while((0|(d=d+1|0))<(0|p));for(j=0|c[va>>2],f=0|c[ta>>2],g=0|c[(k=b+68|0)>>2],d=0;;){if(0|(h=0|c[f+(d<<2)>>2])){if((0|h)<0|(0|g)<(0|h))break c;if(!(-1<(0|(i=0|c[j+(d<<2)>>2]))&(0|i)<(0|g)))break c;if((Ea=i+h|0)>>>31|(0|g)<(0|Ea)|0)break c}if((0|p)<=(0|(d=d+1|0))){x=l;break}}}else x=b+36|0,k=b+68|0;if(A=0|c[b+20>>2],f=0|c[Da>>2],t=0<(0|A)){g=0;do{if(63<(0|Ac(f+(g<<6)|0))>>>0)break c}while((0|(g=g+1|0))<(0|A));f=0|c[na>>2],g=0;do{if(1<(0|c[f+(g<<2)>>2])>>>0)break c}while((0|(g=g+1|0))<(0|A));f=0|c[ma>>2],g=0;do{if((0|c[f+(g<<2)>>2])<0)break c}while((0|(g=g+1|0))<(0|A));for(j=0|c[oa>>2],f=0|c[ja>>2],g=0|c[b+52>>2],d=0;;){if(0|(h=0|c[f+(d<<2)>>2])){if((0|h)<0|(0|g)<(0|h))break c;if(!(-1<(0|(i=0|c[j+(d<<2)>>2]))&(0|i)<(0|g)))break c;if((Ea=i+h|0)>>>31|(0|g)<(0|Ea)|0)break c}if((0|A)<=(0|(d=d+1|0))){l=g;break}}}else l=0|c[b+52>>2];if(h=0|c[Ga>>2],f=0|c[da>>2],i=0|c[b+40>>2],B){g=0;do{if(Ga=(0|c[f+(g<<2)>>2])+(c[h+(g<<2)>>2]<<1)|0,g=g+1|0,Ga>>>31|(0|i)<(0|Ga)|0)break c}while((0|g)<(0|E))}if(h=0|c[m>>2],f=0|c[r>>2],0<(0|h)){g=0;do{if(1<(0|c[f+(g<<2)>>2])>>>0)break c}while((0|(g=g+1|0))<(0|h));f=0|c[X>>2],g=0;do{if(1<(0|c[f+(g<<2)>>2])>>>0)break c}while((0|(g=g+1|0))<(0|h))}if(r=0|c[Fa>>2],g=0|c[W>>2],n){f=0;do{if(Ga=(0|c[g+(f<<2)>>2])+(c[r+(f<<2)>>2]<<1)|0,f=f+1|0,Ga>>>31|(0|i)<(0|Ga)|0)break c}while((0|f)<(0|p))}if(j=0|c[b+44>>2],f=0|c[V>>2],0<(0|j)){g=0;do{if(Ga=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ga)<0|(0|l)<=(0|Ga))break c}while((0|g)<(0|j))}if(d=0|c[Ka+340>>2],f=0|c[U>>2],0<(0|w)){i=0;do{if(0|(g=0|c[f+(i<<2)>>2])){if((0|g)<0|(0|j)<(0|g))break c;if(!(-1<(0|(h=0|c[d+(i<<2)>>2]))&(0|h)<(0|j)))break c;if((Ga=h+g|0)>>>31|(0|j)<(0|Ga)|0)break c}}while((0|(i=i+1|0))<(0|w))}if(d=0|c[Ka+328>>2],f=0|c[s>>2],s=0|c[b+56>>2],0<(0|l)){i=0;do{if(0|(g=0|c[f+(i<<2)>>2])){if((0|g)<0|(0|s)<(0|g))break c;if(!(-1<(0|(h=0|c[d+(i<<2)>>2]))&(0|h)<(0|s)))break c;if((Ga=h+g|0)>>>31|(0|s)<(0|Ga)|0)break c}}while((0|(i=i+1|0))<(0|l))}if(h=0|c[k>>2],f=0|c[T>>2],0<(0|h)){g=0;do{if(Ga=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ga)<-1|(0|p)<=(0|Ga))break c}while((0|g)<(0|h))}if(k=0|c[b+72>>2],d=0|c[Ka+444>>2],f=0|c[R>>2],j=0|c[b+76>>2],0<(0|k)){i=0;do{if(0|(g=0|c[f+(i<<2)>>2])){if((0|g)<0|(0|j)<(0|g))break c;if(!(-1<(0|(h=0|c[d+(i<<2)>>2]))&(0|h)<(0|j)))break c;if((Ga=h+g|0)>>>31|(0|j)<(0|Ga)|0)break c}}while((0|(i=i+1|0))<(0|k))}if(d=0|c[Ka+464>>2],0<(0|j)){f=0;do{if(1<(0|c[d+(f<<2)>>2])>>>0)break c}while((0|(f=f+1|0))<(0|j));f=0|c[K>>2],i=0;do{switch(g=0|c[f+(i<<2)>>2],0|c[d+(i<<2)>>2]){case 0:h=u;break;case 1:h=C;break;default:break c}if((0|g)<=-1)break c;if(i=i+1|0,(0|g)>=(0|c[h>>2]))break c}while((0|i)<(0|j));f=0|c[Q>>2],g=0;do{if(Ga=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ga)<-1|(0|k)<=(0|Ga))break c}while((0|g)<(0|j))}if(q=0|c[b+80>>2],f=0|c[J>>2],0<(0|q)){g=0;do{if(63<(0|Ac(f+(g<<6)|0))>>>0)break c}while((0|(g=g+1|0))<(0|q));f=0|c[H>>2],g=0;do{if(Ga=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ga)<0|(0|w)<=(0|Ga))break c}while((0|g)<(0|q));j=0|c[I>>2],f=0|c[G>>2],g=0|c[b+88>>2],d=0;do{if(0|(h=0|c[f+(d<<2)>>2])){if((0|h)<0|(0|g)<(0|h))break c;if(!(-1<(0|(i=0|c[j+(d<<2)>>2]))&(0|i)<(0|g)))break c;if((Ga=i+h|0)>>>31|(0|g)<(0|Ga)|0)break c}}while((0|(d=d+1|0))<(0|q));p=0|c[L>>2],o=0|c[u>>2],f=0;do{if(Ga=0|c[p+(f<<2)>>2],f=f+1|0,(0|Ga)<0|(0|o)<=(0|Ga))break c}while((0|f)<(0|q));n=0|c[O>>2],f=0;do{if(Ga=0|c[n+(f<<2)>>2],f=f+1|0,(0|Ga)<0|(0|o)<=(0|Ga))break c}while((0|f)<(0|q));m=0|c[P>>2],l=0|c[M>>2],f=0|c[b+84>>2],i=0;do{if(0|(g=0|c[l+(i<<2)>>2])){if((0|g)<0|(0|f)<(0|g))break c;if(!(-1<(0|(h=0|c[m+(i<<2)>>2]))&(0|h)<(0|f)))break c;if((Ga=h+g|0)>>>31|(0|f)<(0|Ga)|0)break c}}while((0|(i=i+1|0))<(0|q));f=0|c[N>>2],j=0;do{if(g=0|c[r+(c[p+(j<<2)>>2]<<2)>>2],h=0|c[r+(c[n+(j<<2)>>2]<<2)>>2],i=0|c[l+(j<<2)>>2],d=f+(c[m+(j<<2)>>2]<<1)|0,0<(0|i)){k=0;do{if(!((0|g)>(0|e[d+(k<<1)>>1])&&(0|h)>(0|e[d+((1|k)<<1)>>1])))break c}while((0|(k=k+2|0))<(0|i))}}while((0|(j=j+1|0))<(0|q))}else o=0|c[u>>2];if((255&F)<=1){f=1;break a}if(f=0|c[Ka+104>>2],B){g=0;do{if(1<(0|c[f+(g<<2)>>2])>>>0)break c}while((0|(g=g+1|0))<(0|E))}if((255&F)<=3){f=1;break a}if(f=0|c[Ka+264>>2],g=0|c[Ka+268>>2],t){d=0;do{if(0|(h=0|c[g+(d<<2)>>2])){if((0|h)<0|(0|s)<(0|h))break c;if(!(-1<(0|(i=0|c[f+(d<<2)>>2]))&(0|i)<(0|s)))break c;if((Ga=i+h|0)>>>31|(0|s)<(0|Ga)|0)break c}}while((0|(d=d+1|0))<(0|A))}if((0|(j=0|c[b+92>>2]))!=(0|c[b+96>>2]))break;if(d=0|c[Ka+88>>2],i=0|c[Ja>>2],B){h=0;do{if(0|(f=0|c[i+(h<<2)>>2])){if((0|f)<0|(0|j)<(0|f))break c;if(!(-1<(0|(g=0|c[d+(h<<2)>>2]))&(0|g)<(0|j)))break c;if((Ja=g+f|0)>>>31|(0|j)<(0|Ja)|0)break c}}while((0|(h=h+1|0))<(0|E))}if(d=0|c[Ka+120>>2],i=0|c[Ia>>2],y){h=0;do{if(0|(f=0|c[i+(h<<2)>>2])){if((0|f)<0|(0|j)<(0|f))break c;if(!(-1<(0|(g=0|c[d+(h<<2)>>2]))&(0|g)<(0|j)))break c;if((Ja=g+f|0)>>>31|(0|j)<(0|Ja)|0)break c}}while((0|(h=h+1|0))<(0|z))}if(d=0|c[Ka+160>>2],f=0|c[Ha>>2],0<(0|o)){i=0;do{if(0|(g=0|c[f+(i<<2)>>2])){if((0|g)<0|(0|j)<(0|g))break c;if(!(-1<(0|(h=0|c[d+(i<<2)>>2]))&(0|h)<(0|j)))break c;if((Ja=h+g|0)>>>31|(0|j)<(0|Ja)|0)break c}}while((0|(i=i+1|0))<(0|o))}if(g=0|c[Ka+240>>2],t){f=0;do{if(1<(0|c[g+(f<<2)>>2])>>>0)break c}while((0|(f=f+1|0))<(0|A));for(f=0|c[Ka+252>>2],g=0|c[Ka+256>>2],h=0|c[b+100>>2],j=0;;){if(0|(i=0|c[g+(j<<2)>>2])){if((0|i)<0|(0|h)<(0|i))break c;if(!(-1<(0|(d=0|c[f+(j<<2)>>2]))&(0|d)<(0|h)))break c;if((Ja=d+i|0)>>>31|(0|h)<(0|Ja)|0)break c}if((0|A)<=(0|(j=j+1|0))){j=h;break}}}else j=0|c[b+100>>2];if(f=0|c[Ka+348>>2],d=0|c[Ka+352>>2],0<(0|j)){i=0;do{if(0|(g=0|c[d+(i<<2)>>2])){if((0|g)<0|(0|s)<(0|g))break c;if(!(-1<(0|(h=0|c[f+(i<<2)>>2]))&(0|h)<(0|s)))break c;if((Ja=h+g|0)>>>31|(0|s)<(0|Ja)|0)break c}}while((0|(i=i+1|0))<(0|j));f=0|c[Ka+356>>2],h=0;do{if((0|(g=0|c[f+(h<<2)>>2]))<=-1)break c;if((0|g)>=(0|c[d+(h<<2)>>2]))break c}while((0|(h=h+1|0))<(0|j))}if(n=0|c[b+104>>2],f=0|c[Ka+360>>2],0<(0|n)){g=0;do{if(Ja=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ja)<0|(0|j)<=(0|Ja))break c}while((0|g)<(0|n));for(f=0|c[Ka+372>>2],g=0|c[Ka+376>>2],h=0|c[b+116>>2],j=0;;){if(0|(i=0|c[g+(j<<2)>>2])){if((0|i)<0|(0|h)<(0|i))break c;if(!(-1<(0|(d=0|c[f+(j<<2)>>2]))&(0|d)<(0|h)))break c;if((Ja=d+i|0)>>>31|(0|h)<(0|Ja)|0)break c}if((0|n)<=(0|(j=j+1|0))){m=h;break}}}else m=0|c[b+116>>2];if(l=0|c[b+108>>2],f=0|c[Ka+380>>2],0<(0|l)){g=0;do{if(Ja=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ja)<0|(0|E)<=(0|Ja))break c}while((0|g)<(0|l));k=0|c[Ka+384>>2],f=0|c[Ka+388>>2],i=0;do{if(0|(g=0|c[f+(i<<2)>>2])){if((0|g)<0|(0|n)<(0|g))break c;if(!(-1<(0|(h=0|c[k+(i<<2)>>2]))&(0|h)<(0|n)))break c;if((Ja=h+g|0)>>>31|(0|n)<(0|Ja)|0)break c}}while((0|(i=i+1|0))<(0|l));j=0|c[Ka+364>>2],d=0|c[Ka+368>>2],f=0|c[D>>2],i=0;do{if(g=0|c[k+(i<<2)>>2],0|(h=0|c[d+(g<<2)>>2])){if((0|h)<0|(0|f)<(0|h))break c;if(!(-1<(0|(Ia=0|c[j+(g<<2)>>2]))&(0|Ia)<(0|f)&0==((Ja=Ia+h|0)>>>31|(0|f)<(0|Ja)|0)))break c}}while((0|(i=i+1|0))<(0|l))}else d=0|c[Ka+368>>2],j=0|c[Ka+364>>2];if(l=0|c[b+112>>2],f=0|c[Ka+392>>2],0<(0|l)){g=0;do{if(Ja=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ja)<0|(0|o)<=(0|Ja))break c}while((0|g)<(0|l));k=0|c[Ka+396>>2],f=0|c[Ka+400>>2],i=0;do{if(0|(g=0|c[f+(i<<2)>>2])){if((0|g)<0|(0|n)<(0|g))break c;if(!(-1<(0|(h=0|c[k+(i<<2)>>2]))&(0|h)<(0|n)))break c;if((Ja=h+g|0)>>>31|(0|n)<(0|Ja)|0)break c}}while((0|(i=i+1|0))<(0|l));f=0|c[x>>2],i=0;do{if(g=0|c[k+(i<<2)>>2],0|(h=0|c[d+(g<<2)>>2])){if((0|h)<0|(0|f)<(0|h))break c;if(!(-1<(0|(Ia=0|c[j+(g<<2)>>2]))&(0|Ia)<(0|f)&0==((Ja=Ia+h|0)>>>31|(0|f)<(0|Ja)|0)))break c}}while((0|(i=i+1|0))<(0|l))}if(f=0|c[Ka+404>>2],k=0|c[b+120>>2],0<(0|m)){g=0;do{if(Ja=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ja)<0|(0|k)<=(0|Ja))break c}while((0|g)<(0|m))}if(f=0|c[Ka+408>>2],(0|k)<=0){f=1;break a}g=0;do{if(Ja=0|c[f+(g<<2)>>2],g=g+1|0,(0|Ja)<-1|(0|A)<=(0|Ja))break c}while((0|g)<(0|k));for(j=0|c[Ka+412>>2],d=0|c[Ka+416>>2],f=0|c[b+124>>2],i=0;;){if(0|(g=0|c[d+(i<<2)>>2])){if((0|g)<0|(0|f)<(0|g))break c;if(!(-1<(0|(h=0|c[j+(i<<2)>>2]))&(0|h)<(0|f)))break c;if((Ka=h+g|0)>>>31|(0|f)<(0|Ka)|0)break c}if((0|k)<=(0|(i=i+1|0))){f=1;break a}}}}while(0);ia(0,1336,La),f=0}}while(0);return 319==(0|Ma)&&(ia(0,1277,_),sb(C,1),tb(b+64|0,4,160),f=0),S=Na,0|f}function ra(b){var f,e,d=0|a[4+(b|=0)>>0];tb(0|c[(e=b+704|0)>>2],4,32),sb(0|c[(f=b+708|0)>>2],4),sb(4+(0|c[f>>2])|0,4),sb(8+(0|c[f>>2])|0,4),sb(12+(0|c[f>>2])|0,4),sb(16+(0|c[f>>2])|0,4),sb(20+(0|c[f>>2])|0,1),tb(0|c[b+720>>2],4,0|c[c[e>>2]>>2]),tb(0|c[b+724>>2],4,0|c[c[e>>2]>>2]),tb(0|c[b+728>>2],4,0|c[c[e>>2]>>2]),tb(0|c[b+732>>2],4,0|c[c[e>>2]>>2]),tb(0|c[b+736>>2],4,0|c[c[e>>2]>>2]),tb(0|c[b+740>>2],4,0|c[c[e>>2]>>2]),tb(0|c[b+752>>2],4,0|c[4+(0|c[e>>2])>>2]),tb(0|c[b+756>>2],4,0|c[4+(0|c[e>>2])>>2]),tb(0|c[b+760>>2],4,0|c[4+(0|c[e>>2])>>2]),tb(0|c[b+764>>2],4,0|c[4+(0|c[e>>2])>>2]),tb(0|c[b+768>>2],4,0|c[4+(0|c[e>>2])>>2]),tb(0|c[b+772>>2],4,0|c[4+(0|c[e>>2])>>2]),tb(0|c[b+776>>2],4,0|c[4+(0|c[e>>2])>>2]),tb(0|c[b+780>>2],4,0|c[8+(0|c[e>>2])>>2]),tb(0|c[b+784>>2],4,0|c[8+(0|c[e>>2])>>2]),tb(0|c[b+788>>2],4,0|c[8+(0|c[e>>2])>>2]),tb(0|c[b+796>>2],4,0|c[8+(0|c[e>>2])>>2]),tb(0|c[b+800>>2],4,0|c[8+(0|c[e>>2])>>2]),tb(0|c[b+804>>2],4,0|c[8+(0|c[e>>2])>>2]),tb(0|c[b+812>>2],4,0|c[12+(0|c[e>>2])>>2]),tb(0|c[b+816>>2],4,0|c[12+(0|c[e>>2])>>2]),tb(0|c[b+820>>2],4,0|c[12+(0|c[e>>2])>>2]),tb(0|c[b+828>>2],4,0|c[12+(0|c[e>>2])>>2]),tb(0|c[b+852>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+856>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+860>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+868>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+872>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+876>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+880>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+884>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+888>>2],1,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+892>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+896>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+900>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+904>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+908>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+912>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+924>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+928>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+932>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+936>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+940>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+948>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+952>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+976>>2],4,0|c[24+(0|c[e>>2])>>2]),tb(0|c[b+980>>2],4,0|c[28+(0|c[e>>2])>>2]),tb(0|c[b+984>>2],4,0|c[28+(0|c[e>>2])>>2]),tb(0|c[b+988>>2],4,0|c[32+(0|c[e>>2])>>2]),tb(0|c[b+992>>2],4,0|c[32+(0|c[e>>2])>>2]),tb(0|c[b+996>>2],4,0|c[32+(0|c[e>>2])>>2]),tb(0|c[b+1e3>>2],4,0|c[32+(0|c[e>>2])>>2]),tb(0|c[b+1004>>2],4,0|c[32+(0|c[e>>2])>>2]),tb(0|c[b+1008>>2],4,0|c[32+(0|c[e>>2])>>2]),tb(0|c[b+1012>>2],4,0|c[32+(0|c[e>>2])>>2]),tb(0|c[b+1016>>2],4,0|c[36+(0|c[e>>2])>>2]),tb(0|c[b+1020>>2],4,0|c[36+(0|c[e>>2])>>2]),tb(0|c[b+1024>>2],4,0|c[36+(0|c[e>>2])>>2]),tb(0|c[b+1028>>2],4,0|c[40+(0|c[e>>2])>>2]),tb(0|c[b+1040>>2],4,0|c[44+(0|c[e>>2])>>2]),tb(0|c[b+1044>>2],4,0|c[48+(0|c[e>>2])>>2]),tb(0|c[b+1048>>2],4,0|c[48+(0|c[e>>2])>>2]),tb(0|c[b+1032>>2],4,0|c[52+(0|c[e>>2])>>2]),tb(0|c[b+1036>>2],4,0|c[52+(0|c[e>>2])>>2]),tb(0|c[b+1132>>2],4,0|c[56+(0|c[e>>2])>>2]),tb(0|c[b+1136>>2],4,0|c[60+(0|c[e>>2])>>2]),tb(0|c[b+1140>>2],2,0|c[64+(0|c[e>>2])>>2]),tb(0|c[b+1144>>2],4,0|c[68+(0|c[e>>2])>>2]),tb(0|c[b+1148>>2],4,0|c[72+(0|c[e>>2])>>2]),tb(0|c[b+1152>>2],4,0|c[72+(0|c[e>>2])>>2]),tb(0|c[b+1156>>2],4,0|c[72+(0|c[e>>2])>>2]),tb(0|c[b+1160>>2],4,0|c[72+(0|c[e>>2])>>2]),tb(0|c[b+1164>>2],4,0|c[72+(0|c[e>>2])>>2]),tb(0|c[b+1168>>2],4,0|c[76+(0|c[e>>2])>>2]),tb(0|c[b+1172>>2],4,0|c[76+(0|c[e>>2])>>2]),tb(0|c[b+1176>>2],4,0|c[76+(0|c[e>>2])>>2]),tb(0|c[b+1188>>2],4,0|c[80+(0|c[e>>2])>>2]),tb(0|c[b+1192>>2],4,0|c[80+(0|c[e>>2])>>2]),tb(0|c[b+1196>>2],4,0|c[80+(0|c[e>>2])>>2]),tb(0|c[b+1200>>2],4,0|c[80+(0|c[e>>2])>>2]),tb(0|c[b+1204>>2],4,0|c[80+(0|c[e>>2])>>2]),tb(0|c[b+1208>>2],4,0|c[80+(0|c[e>>2])>>2]),tb(0|c[b+1212>>2],4,0|c[80+(0|c[e>>2])>>2]),tb(0|c[b+1216>>2],4,0|c[84+(0|c[e>>2])>>2]),tb(0|c[b+1220>>2],2,0|c[84+(0|c[e>>2])>>2]),tb(0|c[b+1224>>2],4,0|c[88+(0|c[e>>2])>>2]),(255&d)<=1||(tb(0|c[b+808>>2],4,0|c[8+(0|c[e>>2])>>2]),(255&d)<=3||(tb(0|c[b+968>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+972>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+792>>2],4,0|c[8+(0|c[e>>2])>>2]),tb(0|c[b+824>>2],4,0|c[12+(0|c[e>>2])>>2]),tb(0|c[b+864>>2],4,0|c[16+(0|c[e>>2])>>2]),tb(0|c[b+1228>>2],4,0|c[92+(0|c[e>>2])>>2]),tb(0|c[b+1232>>2],4,0|c[92+(0|c[e>>2])>>2]),tb(0|c[b+1236>>2],4,0|c[92+(0|c[e>>2])>>2]),tb(0|c[b+1240>>2],4,0|c[96+(0|c[e>>2])>>2]),tb(0|c[b+1244>>2],4,0|c[96+(0|c[e>>2])>>2]),tb(0|c[b+1248>>2],4,0|c[96+(0|c[e>>2])>>2]),tb(0|c[b+944>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+956>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+960>>2],4,0|c[20+(0|c[e>>2])>>2]),tb(0|c[b+1052>>2],4,0|c[100+(0|c[e>>2])>>2]),tb(0|c[b+1056>>2],4,0|c[100+(0|c[e>>2])>>2]),tb(0|c[b+1060>>2],4,0|c[100+(0|c[e>>2])>>2]),tb(0|c[b+1064>>2],4,0|c[104+(0|c[e>>2])>>2]),tb(0|c[b+1068>>2],4,0|c[104+(0|c[e>>2])>>2]),tb(0|c[b+1072>>2],4,0|c[104+(0|c[e>>2])>>2]),tb(0|c[b+1076>>2],4,0|c[104+(0|c[e>>2])>>2]),tb(0|c[b+1080>>2],4,0|c[104+(0|c[e>>2])>>2]),tb(0|c[b+1084>>2],4,0|c[108+(0|c[e>>2])>>2]),tb(0|c[b+1088>>2],4,0|c[108+(0|c[e>>2])>>2]),tb(0|c[b+1092>>2],4,0|c[108+(0|c[e>>2])>>2]),tb(0|c[b+1096>>2],4,0|c[112+(0|c[e>>2])>>2]),tb(0|c[b+1100>>2],4,0|c[112+(0|c[e>>2])>>2]),tb(0|c[b+1104>>2],4,0|c[112+(0|c[e>>2])>>2]),tb(0|c[b+1108>>2],4,0|c[116+(0|c[e>>2])>>2]),tb(0|c[b+1112>>2],4,0|c[120+(0|c[e>>2])>>2]),tb(0|c[b+1116>>2],4,0|c[120+(0|c[e>>2])>>2]),tb(0|c[b+1120>>2],4,0|c[120+(0|c[e>>2])>>2]),tb(0|c[b+1124>>2],4,0|c[124+(0|c[e>>2])>>2]),tb(0|c[b+1128>>2],4,0|c[124+(0|c[e>>2])>>2])))}function sa(d){d|=0;var o,p,e=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,q=0,r=0,s=0,t=S,e=S=S+63&-64;if(S=S+32|0,h=e+24|0,c[(s=e)>>2]=4,c[s+4>>2]=2,c[s+8>>2]=4,function(a,b){var d,e=S=(a=S)+63&-64;S=S+272|0,d=16+e|0,c[e>>2]=b|=0,cc(d,1393,e),function(a){var b,d=S=(b=S)+63&-64;S=S+16|0,c[d>>2]=a|=0,function(a,b,d){a=S=(b=S)+63&-64,S=S+16|0,c[a>>2]=d|=0,dc(496,2934,a),S=b}(0,0,d),S=b}(d),S=a}(0,s),0|yc(d))return ia(0,1433,e+16|0),S=t,(s=0)|s;if(4<(255&(e=0|a[(g=d+4|0)>>0])))return c[h>>2]=4,c[h+4>>2]=255&e,ia(0,1496,h),S=t,(s=0)|s;if(0|a[(e=d+5|0)>>0]?(sb(g,1),tb(d+64|0,4,160),pa(d,s=d+704|(a[e>>0]=0)),ra(d)):pa(d,s=d+704|0),0|c[1009]||(c[1009]=1),e=0|c[s>>2],r=0|c[e+16>>2],n=(g=0|c[d+912>>2])+(r<<2)|0,0<(0|r)){for(l=d+1144|0,m=0|c[d+908>>2];;){k=(0|c[l>>2])+(c[m>>2]<<2)|0,h=(e=0|c[g>>2])-1|0;a:do{if(1<(0|e))for(i=0,j=h;;){for(;!((0|c[(h=k+(i<<2)|0)>>2])<0);){if(!((0|(h=i+1|0))<(0|j))){h=j;break a}i=h}if(_c(0|h,h+4|0,(e-i<<2)-4|0),!((0|i)<(0|(h=j+-1|0)))){e=j;break}e=j,j=h}}while(0);if(0<(0|e)&&(e=(0|c[k+(h<<2)>>2])<0?h:e),c[g>>2]=e,n>>>0<=(g=g+4|0)>>>0)break;m=m+4|0}e=0|c[s>>2]}if(0<(0|c[e>>2]))for(g=d+716|0,h=d+712|0,i=0;c[(0|c[h>>2])+(i<<2)>>2]=(0|c[g>>2])+(i<<6),e=0|c[s>>2],(0|(i=i+1|0))<(0|c[e>>2]););if(0<(0|c[e+4>>2]))for(g=d+748|0,h=d+744|0,i=0;c[(0|c[h>>2])+(i<<2)>>2]=(0|c[g>>2])+(i<<6),e=0|c[s>>2],(0|(i=i+1|0))<(0|c[e+4>>2]););if(0<(0|c[e+16>>2]))for(j=d+848|0,k=d+832|0,q=d+1136|0,o=d+896|0,p=d+836|0,l=d+1140|0,m=d+900|0,n=d+840|0,g=d+1144|0,h=d+908|0,i=d+844|0,r=0;c[(0|c[k>>2])+(r<<2)>>2]=(0|c[j>>2])+(r<<6),c[(0|c[p>>2])+(r<<2)>>2]=(0|c[q>>2])+(c[(0|c[o>>2])+(r<<2)>>2]<<2),c[(0|c[n>>2])+(r<<2)>>2]=(0|c[l>>2])+(c[(0|c[m>>2])+(r<<2)>>2]<<1),c[(0|c[i>>2])+(r<<2)>>2]=(0|c[g>>2])+(c[(0|c[h>>2])+(r<<2)>>2]<<2),e=0|c[s>>2],(0|(r=r+1|0))<(0|c[e+16>>2]););if(0<(0|c[e+20>>2]))for(g=d+920|0,h=d+916|0,i=0;c[(0|c[h>>2])+(i<<2)>>2]=(0|c[g>>2])+(i<<6),e=0|c[s>>2],(0|(i=i+1|0))<(0|c[e+20>>2]););if(0<(0|c[e+80>>2]))for(g=d+1184|0,h=d+1180|0,i=0;c[(0|c[h>>2])+(i<<2)>>2]=(0|c[g>>2])+(i<<6),e=0|c[s>>2],(0|(i=i+1|0))<(0|c[e+80>>2]););if(!(1&a[20+(0|c[d+708>>2])>>0]||(0|(m=0|c[e+16>>2]))<=0)){e=0|c[d+1140>>2],g=0|c[d+900>>2],h=0|c[d+904>>2],j=0;do{if(i=e+(c[g+(j<<2)>>2]<<1)|0,l=(s=0|c[h+(j<<2)>>2])-1|0,1<(0|s))for(k=0;r=0|b[(q=i+(k<<1)|0)>>1],b[q>>1]=0|b[(s=i+(k+2<<1)|0)>>1],b[s>>1]=r,(0|(k=k+3|0))<(0|l););}while((0|(j=j+1|0))!=(0|m));g=0|c[d+1136>>2],h=0|c[d+896>>2],i=0|c[d+892>>2],k=0;do{if(j=(e=g+(c[h+(k<<2)>>2]<<2)|0)+((s=0|c[i+(k<<2)>>2])<<1<<2)|0,0<(0|s))for(e=e+4|0;f[e>>2]=1-+f[e>>2],(e=e+8|0)>>>0<j>>>0;);}while((0|(k=k+1|0))!=(0|m))}return S=t,0|d}function ta(a){var c=0,b=S,c=S=S+63&-64;return S=S+16|0,0|yc(a|=0)?(ia(0,1605,c),S=b,(c=0)|c):(c=0|d[a+4>>0],S=b,0|c)}function va(a){var j,k,l,m,b=0,e=0,f=0,g=0,h=0,i=0,e=64+(a|=0)|0,b=a+144|0;if(za(e,0|c[a+88>>2],0|c[a+148>>2],0|c[b>>2]),Ba(e,0|c[a+92>>2],0|c[a+152>>2],0|c[796+(0|c[a>>2])>>2],2,0|c[b>>2]),!((0|d[4+(0|c[a>>2])>>0])<4||(za(e,0|c[a+96>>2],0|c[(m=a+120|0)>>2],0|c[b>>2]),za(e,0|c[a+100>>2],0|c[(f=a+124|0)>>2],0|c[b>>2]),za(e,0|c[a+104>>2],0|c[(g=a+128|0)>>2],0|c[b>>2]),za(e,0|c[a+108>>2],0|c[(j=a+132|0)>>2],0|c[b>>2]),za(e,0|c[a+112>>2],0|c[(k=a+136|0)>>2],0|c[b>>2]),za(e,0|c[a+116>>2],0|c[(l=a+140|0)>>2],0|c[b>>2]),b=0|c[a+156>>2],e=0|c[m>>2],f=0|c[f>>2],g=0|c[g>>2],(0|(m=0|c[a+56>>2]))<=0))){for(i=h=0;c[b+(h<<2)>>2]=c[e+(i<<2)>>2],c[b+((1|h)<<2)>>2]=c[f+(i<<2)>>2],c[b+((2|h)<<2)>>2]=c[g+(i<<2)>>2],(0|(i=i+1|0))!=(0|m);)h=h+4|0;for(i=0|c[a+160>>2],h=0|c[j>>2],g=0|c[k>>2],b=0|c[l>>2],f=e=0;c[i+(e<<2)>>2]=c[h+(f<<2)>>2],c[i+((1|e)<<2)>>2]=c[g+(f<<2)>>2],c[i+((2|e)<<2)>>2]=c[b+(f<<2)>>2],(0|(f=f+1|0))!=(0|m);)e=e+4|0}}function wa(a){var j,k,l,m,b=0,e=0,f=0,g=0,h=0,i=0,e=172+(a|=0)|0,b=a+264|0;if(za(e,0|c[a+196>>2],0|c[a+268>>2],0|c[b>>2]),za(e,0|c[a+200>>2],0|c[a+284>>2],0|c[b>>2]),za(e,0|c[a+204>>2],0|c[a+276>>2],0|c[b>>2]),za(e,0|c[a+208>>2],0|c[a+280>>2],0|c[b>>2]),za(e,0|c[a+212>>2],0|c[a+272>>2],0|c[b>>2]),!((0|d[4+(0|c[a>>2])>>0])<4||(za(e,0|c[a+216>>2],0|c[(m=a+240|0)>>2],0|c[b>>2]),za(e,0|c[a+220>>2],0|c[(f=a+244|0)>>2],0|c[b>>2]),za(e,0|c[a+224>>2],0|c[(g=a+248|0)>>2],0|c[b>>2]),za(e,0|c[a+228>>2],0|c[(j=a+252|0)>>2],0|c[b>>2]),za(e,0|c[a+232>>2],0|c[(k=a+256|0)>>2],0|c[b>>2]),za(e,0|c[a+236>>2],0|c[(l=a+260|0)>>2],0|c[b>>2]),b=0|c[a+296>>2],e=0|c[m>>2],f=0|c[f>>2],g=0|c[g>>2],(0|(m=0|c[a+164>>2]))<=0))){for(i=h=0;c[b+(h<<2)>>2]=c[e+(i<<2)>>2],c[b+((1|h)<<2)>>2]=c[f+(i<<2)>>2],c[b+((2|h)<<2)>>2]=c[g+(i<<2)>>2],(0|(i=i+1|0))!=(0|m);)h=h+4|0;for(i=0|c[a+300>>2],h=0|c[j>>2],g=0|c[k>>2],b=0|c[l>>2],f=e=0;c[i+(e<<2)>>2]=c[h+(f<<2)>>2],c[i+((1|e)<<2)>>2]=c[g+(f<<2)>>2],c[i+((2|e)<<2)>>2]=c[b+(f<<2)>>2],(0|(f=f+1|0))!=(0|m);)e=e+4|0}}function xa(a){var j,k,l,m,b=0,e=0,f=0,g=0,h=0,i=0,e=340+(a|=0)|0,b=a+424|0;if(za(e,0|c[a+364>>2],0|c[a+448>>2],0|c[b>>2]),Aa(e,0|c[a+368>>2],0|c[a+440>>2],0|c[b>>2]),Ba(e,0|c[a+372>>2],0|c[a+444>>2],0|c[892+(0|c[a>>2])>>2],2,0|c[b>>2]),!((0|d[4+(0|c[a>>2])>>0])<4||(za(e,0|c[a+376>>2],0|c[(m=a+400|0)>>2],0|c[b>>2]),za(e,0|c[a+380>>2],0|c[(f=a+404|0)>>2],0|c[b>>2]),za(e,0|c[a+384>>2],0|c[(g=a+408|0)>>2],0|c[b>>2]),za(e,0|c[a+388>>2],0|c[(j=a+412|0)>>2],0|c[b>>2]),za(e,0|c[a+392>>2],0|c[(k=a+416|0)>>2],0|c[b>>2]),za(e,0|c[a+396>>2],0|c[(l=a+420|0)>>2],0|c[b>>2]),b=0|c[a+452>>2],e=0|c[m>>2],f=0|c[f>>2],g=0|c[g>>2],(0|(m=0|c[a+332>>2]))<=0))){for(i=h=0;c[b+(h<<2)>>2]=c[e+(i<<2)>>2],c[b+((1|h)<<2)>>2]=c[f+(i<<2)>>2],c[b+((2|h)<<2)>>2]=c[g+(i<<2)>>2],(0|(i=i+1|0))!=(0|m);)h=h+4|0;for(i=0|c[a+456>>2],h=0|c[j>>2],g=0|c[k>>2],b=0|c[l>>2],f=e=0;c[i+(e<<2)>>2]=c[h+(f<<2)>>2],c[i+((1|e)<<2)>>2]=c[g+(f<<2)>>2],c[i+((2|e)<<2)>>2]=c[b+(f<<2)>>2],(0|(f=f+1|0))!=(0|m);)e=e+4|0}}function za(a,b,d,e){b|=0,d|=0,e|=0;var m,n,o,g=0,h=0,i=0,j=0,k=0,l=0;if(0<(0|(g=0|c[8+(a|=0)>>2])))for(h=0|c[a+20>>2],i=0|c[a+12>>2],j=0;f[i+(j<<2)>>2]=+f[b+(j<<2)>>2]*+f[h+(j<<2)>>2],(0|(j=j+1|0))!=(0|g););if(!((0|(n=0|c[a>>2]))<=0))if(l=a+16|0,o=0|c[a+4>>2],m=a+12|0,e)for(b=j=0;;){if(0|c[e>>2]){if(h=(a=0|c[(0|c[l>>2])+(b<<2)>>2])+j|0,0<(0|a))for(g=0|c[m>>2],i=j,k=0;k+=+f[g+(i<<2)>>2],(0|(i=i+1|0))<(0|h););else k=0;f[d+(b<<2)>>2]=k}if((0|(g=b+1|0))==(0|n))break;e=e+4|0,j=(0|c[o+(b<<2)>>2])+j|0,b=g}else for(j=0|c[l>>2],a=b=0;;){if(h=(l=0|c[j+(a<<2)>>2])+b|0,0<(0|l))for(g=0|c[m>>2],i=b,k=0;k+=+f[g+(i<<2)>>2],(0|(i=i+1|0))<(0|h););else k=0;if(f[d+(a<<2)>>2]=k,(0|(g=a+1|0))==(0|n))break;b=(0|c[o+(a<<2)>>2])+b|0,a=g}}function Aa(a,b,d,e){b|=0,d|=0,e|=0;var m,n,g=0,h=0,i=0,j=0,k=0,l=0;if(0<(0|(g=0|c[8+(a|=0)>>2])))for(h=0|c[a+20>>2],i=0|c[a+12>>2],j=0;f[i+(j<<2)>>2]=+f[b+(j<<2)>>2]*+f[h+(j<<2)>>2],(0|(j=j+1|0))!=(0|g););if(!((0|(g=0|c[a>>2]))<=0))if(l=a+16|0,m=0|c[a+4>>2],n=a+12|0,e)for(b=j=0;;){if(0|c[e>>2]){if(h=(i=0|c[(0|c[l>>2])+(b<<2)>>2])+j|0,0<(0|i))for(g=0|c[n>>2],i=j,k=0;k+=+f[g+(i<<2)>>2],(0|(i=i+1|0))<(0|h););else k=0;c[d+(b<<2)>>2]=~~(k+.0010000000474974513),g=0|c[a>>2]}if(!((0|(h=b+1|0))<(0|g)))break;e=e+4|0,j=(0|c[m+(b<<2)>>2])+j|0,b=h}else for(j=0|c[l>>2],e=b=0;;){if(h=(l=0|c[j+(e<<2)>>2])+b|0,0<(0|l))for(g=0|c[n>>2],i=b,k=0;k+=+f[g+(i<<2)>>2],(0|(i=i+1|0))<(0|h););else k=0;if(c[d+(e<<2)>>2]=~~(k+.0010000000474974513),!((0|(g=e+1|0))<(0|c[a>>2])))break;b=(0|c[m+(e<<2)>>2])+b|0,e=g}}function Ba(a,b,d,e,g,h){b|=0,d|=0,e|=0,g|=0,h|=0;var r,s,u,w,x,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,t=0|c[(a|=0)>>2];if(!((0|t)<=0))if(w=a+16|0,u=0|c[a+4>>2],s=a+20|0,r=g<<2,h)for(p=o=0;;){if(0|c[h>>2]&&(l=0|c[d+(p<<2)>>2],a=0|c[e+(p<<2)>>2],n=0|v(a,g),m=(i=0|c[(0|c[w>>2])+(p<<2)>>2])+o|0,(k=0<(0|n))&&$c(0|l,0,0|v(r,a)),0<(0|i)&&(q=0|c[s>>2],k))){i=o;do{for(a=0|c[b+(i<<2)>>2],j=+f[q+(i<<2)>>2],k=0;f[(x=l+(k<<2)|0)>>2]=+f[x>>2]+j*+f[a+(k<<2)>>2],(0|(k=k+1|0))!=(0|n););}while((0|(i=i+1|0))<(0|m))}if((0|(a=p+1|0))==(0|t))break;h=h+4|0,o=(0|c[u+(p<<2)>>2])+o|0,p=a}else for(o=n=0;;){if(k=0|c[d+(o<<2)>>2],a=0|c[e+(o<<2)>>2],m=0|v(a,g),l=(h=0|c[(0|c[w>>2])+(o<<2)>>2])+n|0,(i=0<(0|m))&&$c(0|k,0,0|v(r,a)),0<(0|h)&&(p=0|c[s>>2],i)){h=n;do{for(a=0|c[b+(h<<2)>>2],j=+f[p+(h<<2)>>2],i=0;f[(q=k+(i<<2)|0)>>2]=+f[q>>2]+j*+f[a+(i<<2)>>2],(0|(i=i+1|0))!=(0|m););}while((0|(h=h+1|0))<(0|l))}if((0|(a=o+1|0))==(0|t))break;n=(0|c[u+(o<<2)>>2])+n|0,o=a}}function Ka(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|function(a){a|=0;var b,d,e;return S=(d=S)+560|0,b=(e=d)+548|0,$c(0|e,0,548),ma(a,e,b),S=d,0|c[b>>2]}(a),S=d,0|b):(c[b>>2]=1931,c[b+4>>2]=1949,ia(0,1664,b),S=d,(b=0)|b)}function La(a,b,d){b|=0,d|=0;var g,f=0,h=0,i=S,e=S=S+63&-64;return S=S+32|0,h=24+e|0,g=16+e|0,f=8+e|0,(a|=0)?b?((f=b)+15&-16|0)!=(0|f)?(c[g>>2]=1967,c[4+g>>2]=1738,ia(0,1664,g),S=i,(h=0)|h):(b=0|na(a,b,d))?(S=i,0|b):(c[h>>2]=1967,c[h+4>>2]=1993,ia(0,1664,h),S=i,(h=0)|h):(c[f>>2]=1967,c[f+4>>2]=1698,ia(0,1664,f),S=i,(h=0)|h):(c[e>>2]=1967,c[4+e>>2]=1949,ia(0,1664,e),S=i,(h=0)|h)}function rb(a,b,c,d){if(c=+c,d=+d,(b=+u(b=+b,a=+a)-+u(+d,+c))<-3.1415927410125732)for(;(b+=6.2831854820251465)<-3.1415927410125732;);if(3.1415927410125732<b)for(;3.1415927410125732<(b+=-6.2831854820251465););return+b}function sb(b,c){var d;if(!((c=(b|=0)+(c|=0)+-1|0)>>>0<=b>>>0))for(;d=0|a[b>>0],a[b>>0]=0|a[c>>0],b=b+1|0,a[c>>0]=d,b>>>0<(c=c+-1|0)>>>0;);}function tb(b,c,d){b|=0,c|=0;var g,e=0,f=0;if(d|=0)do{if(d=d+-1|0,(f=b)>>>0<(e=(b=b+c|0)-1|0)>>>0)for(;g=0|a[f>>0],a[f>>0]=0|a[e>>0],f=f+1|0,a[e>>0]=g,f>>>0<(e=e+-1|0)>>>0;);}while(0!=(0|d))}function Ab(a){var s,l,o,b=0,e=0,g=0,h=0,i=0,j=0,k=0,n=0,p=0,q=0,r=0,t=0,u=0,v=0,m=(b=0|c[(l=336+(a|=0)|0)>>2])+(20*(n=0|c[(o=a+332|0)>>2])|0)|0,p=a+424|0,i=0|c[a+48>>2],j=0|c[a+316>>2],k=0|c[a+308>>2];if(0<(0|n))for(n=0|c[p>>2],g=0|c[a+448>>2],h=0|c[a+444>>2];0|c[n>>2]&&(-1!=(0|(e=0|c[b+4>>2]))&&(f[g>>2]=+f[i+(e<<2)>>2]*+f[g>>2]),-1!=(0|(e=0|c[b+8>>2]))&&(f[g>>2]=+f[j+(e<<2)>>2]*+f[g>>2],r=0|c[h>>2],$[3&c[k+(e<<5)+24>>2]](a,e,r,r,0|c[b+16>>2]))),!(m>>>0<=(b=b+20|0)>>>0);)n=n+4|0,g=g+4|0,h=h+4|0;if(!((0|d[4+(0|c[a>>2])>>0])<4||(k=(b=0|c[l>>2])+(20*(r=0|c[o>>2])|0)|0,i=0|c[a+324>>2],j=0|c[a+328>>2],(0|r)<=0)))for(h=0|c[p>>2],e=b,g=0|c[a+452>>2],b=0|c[a+456>>2];0|c[h>>2]&&-1!=(0|(q=0|c[e+8>>2]))&&(t=+f[g>>2]*+f[(o=i+((p=q<<2)<<2)|0)>>2],f[g>>2]=t,u=+f[(r=g+4|0)>>2]*+f[4+o>>2],f[r>>2]=u,v=+f[(a=g+8|0)>>2]*+f[8+o>>2],f[g>>2]=t<0?0:1<t?1:t,f[r>>2]=u<0?0:1<u?1:u,f[a>>2]=v<0?0:1<v?1:v,f[g+12>>2]=1,v=+f[b>>2],u=+f[(p=j+(p<<2)|0)>>2],f[b>>2]=u=v+u-v*u,v=+f[(a=b+4|0)>>2],t=+f[p+4>>2],f[a>>2]=t=v+t-v*t,s=(v=+f[(r=b+8|0)>>2])+(s=+f[p+8>>2])-v*s,f[b>>2]=u<0?0:1<u?1:u,f[a>>2]=t<0?0:1<t?1:t,f[r>>2]=s<0?0:1<s?1:s,f[b+12>>2]=1),!(k>>>0<=(e=e+20|0)>>>0);)h=h+4|0,g=g+16|0,b=b+16|0}function Bb(a){var e,b=0|c[332+(a|=0)>>2];0|c[a+428>>2]&&(Zc(0|c[a+460>>2],0|c[a+436>>2],0|(e=b<<2)),Zc(0|c[a+464>>2],0|c[a+440>>2],0|e),Zc(0|c[a+468>>2],0|c[a+448>>2],0|e),(0|d[4+(0|c[a>>2])>>0])<=3||(Zc(0|c[a+472>>2],0|c[a+452>>2],0|(e=b<<4)),Zc(0|c[a+476>>2],0|c[a+456>>2],0|e)))}function Cb(b){var j,k,m,n,o,p,q,r,s,t,y,d=0,e=0,g=0,h=0,i=0,l=0,u=0,v=0,x=0,e=0|a[4+(0|c[(b|=0)>>2])>>0],w=0|c[b+332>>2],d=b+428|0;if(0|c[b+620>>2]){if(!(((c[d>>2]=0)|w)<=0))for(h=b+424|0,i=b+432|0,d=b+448|0,e=0;g=0!=(0|c[(0|c[h>>2])+(e<<2)>>2])&&0!=+f[(0|c[d>>2])+(e<<2)>>2]?127:126,a[(0|c[i>>2])+e>>0]=g,(0|(e=e+1|0))!=(0|w););}else if(0|c[d>>2]){if(!(((c[d>>2]=0)|w)<=0))if(m=b+424|0,p=b+432|0,o=b+448|0,r=b+468|0,n=b+440|0,q=b+464|0,t=b+436|0,s=b+460|0,j=b+452|0,l=b+472|0,k=b+456|0,i=b+476|0,(255&e)<=3)for(d=0;l=0==(0|c[(0|c[m>>2])+(d<<2)>>2]),x=+f[(0|c[o>>2])+(d<<2)>>2],v=(0|c[p>>2])+d|0,u=(1&a[v>>0])==(u=0!=x&(1^l)&1)<<24>>24?u:2|u,u=x!=+f[(0|c[r>>2])+(d<<2)>>2]?4|u:u,u=(0|c[(0|c[n>>2])+(d<<2)>>2])==(0|c[(0|c[q>>2])+(d<<2)>>2])?u:8|u,u=(0|c[(0|c[t>>2])+(d<<2)>>2])==(0|c[(0|c[s>>2])+(d<<2)>>2])?u:16|u,a[v>>0]=l?u:32|u,(0|(d=d+1|0))!=(0|w););else for(h=g=0;y=0==(0|c[(0|c[m>>2])+(g<<2)>>2]),x=+f[(0|c[o>>2])+(g<<2)>>2],e=(0|c[p>>2])+g|0,d=(1&a[e>>0])==(d=0!=x&(1^y)&1)<<24>>24?d:2|d,d=x!=+f[(0|c[r>>2])+(g<<2)>>2]?4|d:d,d=(0|c[(0|c[n>>2])+(g<<2)>>2])==(0|c[(0|c[q>>2])+(g<<2)>>2])?d:8|d,d=(0|c[(0|c[t>>2])+(g<<2)>>2])==(0|c[(0|c[s>>2])+(g<<2)>>2])?d:16|d,d=y?d:32|d,y=(0|c[j>>2])+(h<<2)|0,b=(0|c[l>>2])+(h<<2)|0,+f[y>>2]==+f[b>>2]&&+f[4+y>>2]==+f[b+4>>2]&&+f[8+y>>2]==+f[b+8>>2]&&+f[12+y>>2]==+f[b+12>>2]&&(u=(0|c[k>>2])+(h<<2)|0,v=(0|c[i>>2])+(h<<2)|0,+f[u>>2]==+f[v>>2])&&+f[u+4>>2]==+f[v+4>>2]&&+f[u+8>>2]==+f[v+8>>2]&&+f[u+12>>2]==+f[v+12>>2]||(d|=64),a[e>>0]=d,(0|(g=g+1|0))!=(0|w);)h=h+4|0}else if(!((0|w)<=0))for(g=b+424|0,h=b+432|0,d=b+448|0,e=0;0!=(0|c[(0|c[g>>2])+(e<<2)>>2])&&0!=+f[(0|c[d>>2])+(e<<2)>>2]?(v=(0|c[h>>2])+e|0,a[v>>0]=1|a[v>>0]):(v=(0|c[h>>2])+e|0,a[v>>0]=-2&a[v>>0]),(0|(e=e+1|0))!=(0|w););}function Eb(a){var C,D,E,F,G,A,B,b=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,H=0,I=0,J=0,K=0,k=0|c[(A=60+(a|=0)|0)>>2],b=0|c[a>>2],l=0|c[b+784>>2],m=0|c[(B=a+56|0)>>2],n=0|c[b+1028>>2];if(0<(0|m)){for(s=a+80|0,v=a+92|0,u=a+88|0,w=a+84|0,t=b+984|0,h=b+980|0,j=i=0;;){if(g=0|c[k+(24*i|0)>>2],15==(0|(z=0!=(0|c[(b=g+24|0)>>2])||0|c[g+28>>2]?15:z))&&(c[((z=0)|c[s>>2])+(i<<2)>>2]=c[(r=g+12|0)>>2],0|c[b>>2])&&(o=0|c[l+(i<<2)>>2],x=(p=0|c[g+16>>2])+((H=0|c[r>>2])<<2)|0,0<(0|H)))for(b=p,e=(0|c[u>>2])+(j<<2)|0,f=(0|c[v>>2])+(j<<2)|0;H=(0|c[b>>2])+o|0,c[f>>2]=n+(c[(0|c[t>>2])+(H<<2)>>2]<<2),c[e>>2]=c[(0|c[h>>2])+(H<<2)>>2],!(x>>>0<=(b=b+4|0)>>>0);)e=e+4|0,f=f+4|0;if(0|c[g+28>>2]&&(y=(q=0|c[g+20>>2])+((H=0|c[g+12>>2])<<2)|0,0<(0|H)))for(b=(0|c[w>>2])+(j<<2)|0,e=q;c[b>>2]=c[e>>2],!(y>>>0<=(e=e+4|0)>>>0);)b=b+4|0;if((0|(i=i+1|0))==(0|m))break;j=(0|c[g+8>>2])+j|0}b=0|c[a>>2]}if(!((0|d[b+4>>0])<4||(G=0|c[A>>2],H=0|c[b+792>>2],(0|(A=0|c[B>>2]))<=0)))for(D=a+96|0,C=a+100|0,B=a+104|0,F=a+108|0,E=a+112|0,z=a+116|0,x=b+1228|0,v=b+1232|0,u=b+1236|0,y=b+1240|0,w=b+1244|0,k=b+1248|0,m=l=0;;){if(b=0|c[G+(24*l|0)>>2],0|c[b+24>>2]&&(I=0|c[H+(l<<2)>>2],K=(J=0|c[b+16>>2])+((a=0|c[b+12>>2])<<2)|0,0<(0|a)))for(e=0|c[x>>2],f=0|c[v>>2],g=0|c[u>>2],h=0|c[y>>2],i=0|c[w>>2],j=0|c[k>>2],n=J,o=(0|c[B>>2])+(m<<2)|0,p=(0|c[C>>2])+(m<<2)|0,q=(0|c[D>>2])+(m<<2)|0,r=(0|c[z>>2])+(m<<2)|0,s=(0|c[E>>2])+(m<<2)|0,t=(0|c[F>>2])+(m<<2)|0;a=(0|c[n>>2])+I|0,c[q>>2]=c[e+(a<<2)>>2],c[p>>2]=c[f+(a<<2)>>2],c[o>>2]=c[g+(a<<2)>>2],c[t>>2]=c[h+(a<<2)>>2],c[s>>2]=c[i+(a<<2)>>2],c[r>>2]=c[j+(a<<2)>>2],!(K>>>0<=(n=n+4|0)>>>0);)o=o+4|0,p=p+4|0,q=q+4|0,r=r+4|0,s=s+4|0,t=t+4|0;if((0|(l=l+1|0))==(0|A))break;m=(0|c[b+8>>2])+m|0}}function Fb(a){var H,I,J,K,L,Q,b=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,M=0,N=0,O=0,P=0,T=0,U=0,V=0,W=0,S=0|c[168+(a|=0)>>2],R=0|c[a>>2],r=0|c[816+R>>2];if(0<(0|(s=0|c[(Q=a+164|0)>>2])))for(A=a+188|0,w=a+200|0,E=a+204|0,G=a+208|0,K=a+212|0,B=a+196|0,L=a+192|0,v=992+R|0,D=996+R|0,F=1e3+R|0,J=1004+R|0,C=988+R|0,H=1008+R|0,x=a+288|0,I=1012+R|0,y=a+292|0,O=N=0;;){if(t=0|c[S+(12*N|0)>>2],14==(0|(P=0!=(0|c[(b=t+24|0)>>2])||0|c[t+28>>2]?14:P))&&(c[((P=0)|c[A>>2])+(N<<2)>>2]=c[(z=t+12|0)>>2],0|c[b>>2])){if(b=0|c[r+(N<<2)>>2],k=(e=0|c[t+16>>2])+((q=0|c[z>>2])<<2)|0,0<(0|q))for(f=0|c[v>>2],g=0|c[D>>2],h=0|c[F>>2],i=0|c[J>>2],j=0|c[C>>2],l=(0|c[w>>2])+(O<<2)|0,m=e,n=(0|c[B>>2])+(O<<2)|0,o=(0|c[E>>2])+(O<<2)|0,p=(0|c[G>>2])+(O<<2)|0,q=(0|c[K>>2])+(O<<2)|0;W=(0|c[m>>2])+b|0,c[l>>2]=c[f+(W<<2)>>2],c[o>>2]=c[g+(W<<2)>>2],c[p>>2]=c[h+(W<<2)>>2],c[q>>2]=c[i+(W<<2)>>2],c[n>>2]=c[j+(W<<2)>>2],!(k>>>0<=(m=m+4|0)>>>0);)l=l+4|0,n=n+4|0,o=o+4|0,p=p+4|0,q=q+4|0;W=(0|c[e>>2])+b|0,c[(0|c[x>>2])+(N<<2)>>2]=c[(0|c[H>>2])+(W<<2)>>2],c[(0|c[y>>2])+(N<<2)>>2]=c[(0|c[I>>2])+(W<<2)>>2]}if(0|c[t+28>>2]&&(M=(u=0|c[t+20>>2])+((W=0|c[t+12>>2])<<2)|0,0<(0|W)))for(b=(0|c[L>>2])+(O<<2)|0,e=u;c[b>>2]=c[e>>2],!(M>>>0<=(e=e+4|0)>>>0);)b=b+4|0;if((0|(N=N+1|0))==(0|s))break;O=(0|c[t+8>>2])+O|0}if(!((0|d[4+R>>0])<4||(G=0|c[824+R>>2],(0|(A=0|c[Q>>2]))<=0)))for(D=a+216|0,C=a+220|0,B=a+224|0,F=a+228|0,E=a+232|0,z=a+236|0,x=1228+R|0,v=1232+R|0,u=1236+R|0,y=1240+R|0,w=1244+R|0,k=1248+R|0,m=l=0;;){if(j=0|c[S+(12*l|0)>>2],0|c[j+24>>2]&&(U=0|c[G+(l<<2)>>2],V=(T=0|c[j+16>>2])+((W=0|c[j+12>>2])<<2)|0,0<(0|W)))for(b=0|c[x>>2],e=0|c[v>>2],f=0|c[u>>2],g=0|c[y>>2],h=0|c[w>>2],i=0|c[k>>2],n=T,o=(0|c[B>>2])+(m<<2)|0,p=(0|c[C>>2])+(m<<2)|0,q=(0|c[D>>2])+(m<<2)|0,r=(0|c[z>>2])+(m<<2)|0,s=(0|c[E>>2])+(m<<2)|0,t=(0|c[F>>2])+(m<<2)|0;W=(0|c[n>>2])+U|0,c[q>>2]=c[b+(W<<2)>>2],c[p>>2]=c[e+(W<<2)>>2],c[o>>2]=c[f+(W<<2)>>2],c[t>>2]=c[g+(W<<2)>>2],c[s>>2]=c[h+(W<<2)>>2],c[r>>2]=c[i+(W<<2)>>2],!(V>>>0<=(n=n+4|0)>>>0);)o=o+4|0,p=p+4|0,q=q+4|0,r=r+4|0,s=s+4|0,t=t+4|0;if((0|(l=l+1|0))==(0|A))break;m=(0|c[j+8>>2])+m|0}}function Gb(a){var F,G,D,E,b=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,H=0,I=0,J=0,K=0,l=0|c[(D=336+(a|=0)|0)>>2],b=0|c[a>>2],m=0|c[b+856>>2],n=0|c[(E=a+332|0)>>2],o=0|c[b+1028>>2];if(0<(0|n)){for(t=a+356|0,y=a+372|0,w=a+364|0,u=a+368|0,z=a+360|0,v=b+1024|0,x=b+1016|0,i=b+1020|0,k=j=0;;){if(h=0|c[l+(20*j|0)>>2],15==(0|(C=0!=(0|c[(b=h+24|0)>>2])||0|c[h+28>>2]?15:C))&&(c[((C=0)|c[t>>2])+(j<<2)>>2]=c[(s=h+12|0)>>2],0|c[b>>2])&&(p=0|c[m+(j<<2)>>2],A=(q=0|c[h+16>>2])+((H=0|c[s>>2])<<2)|0,0<(0|H)))for(b=(0|c[u>>2])+(k<<2)|0,e=q,f=(0|c[w>>2])+(k<<2)|0,g=(0|c[y>>2])+(k<<2)|0;H=(0|c[e>>2])+p|0,c[g>>2]=o+(c[(0|c[v>>2])+(H<<2)>>2]<<2),c[f>>2]=c[(0|c[x>>2])+(H<<2)>>2],c[b>>2]=c[(0|c[i>>2])+(H<<2)>>2],!(A>>>0<=(e=e+4|0)>>>0);)b=b+4|0,f=f+4|0,g=g+4|0;if(0|c[h+28>>2]&&(B=(r=0|c[h+20>>2])+((H=0|c[h+12>>2])<<2)|0,0<(0|H)))for(b=(0|c[z>>2])+(k<<2)|0,e=r;c[b>>2]=c[e>>2],!(B>>>0<=(e=e+4|0)>>>0);)b=b+4|0;if((0|(j=j+1|0))==(0|n))break;k=(0|c[h+8>>2])+k|0}b=0|c[a>>2]}if(!((0|d[b+4>>0])<4||(G=0|c[D>>2],H=0|c[b+864>>2],(0|(A=0|c[E>>2]))<=0)))for(D=a+376|0,C=a+380|0,B=a+384|0,F=a+388|0,E=a+392|0,z=a+396|0,x=b+1228|0,v=b+1232|0,u=b+1236|0,y=b+1240|0,w=b+1244|0,k=b+1248|0,m=l=0;;){if(b=0|c[G+(20*l|0)>>2],0|c[b+24>>2]&&(I=0|c[H+(l<<2)>>2],K=(J=0|c[b+16>>2])+((a=0|c[b+12>>2])<<2)|0,0<(0|a)))for(e=0|c[x>>2],f=0|c[v>>2],g=0|c[u>>2],h=0|c[y>>2],i=0|c[w>>2],j=0|c[k>>2],n=J,o=(0|c[B>>2])+(m<<2)|0,p=(0|c[C>>2])+(m<<2)|0,q=(0|c[D>>2])+(m<<2)|0,r=(0|c[z>>2])+(m<<2)|0,s=(0|c[E>>2])+(m<<2)|0,t=(0|c[F>>2])+(m<<2)|0;a=(0|c[n>>2])+I|0,c[q>>2]=c[e+(a<<2)>>2],c[p>>2]=c[f+(a<<2)>>2],c[o>>2]=c[g+(a<<2)>>2],c[t>>2]=c[h+(a<<2)>>2],c[s>>2]=c[i+(a<<2)>>2],c[r>>2]=c[j+(a<<2)>>2],!(K>>>0<=(n=n+4|0)>>>0);)o=o+4|0,p=p+4|0,q=q+4|0,r=r+4|0,s=s+4|0,t=t+4|0;if((0|(l=l+1|0))==(0|A))break;m=(0|c[b+8>>2])+m|0}}function Jb(a){var d,e,g,b=0;if(Bb(a|=0),function(a){var e,g,b=0,d=0,h=0,j=0,k=0,i=(b=0|c[(a|=0)+4>>2])+(52*(h=0|c[a>>2])|0)|0;if(!((0|h)<=0))for(h=0|c[a+12>>2];d=+f[h>>2],a=b+4|0,d=(g=0==(0|c[b+16>>2]))?(k=+f[a>>2],j=+f[b+8>>2],d<k?k:j<d?j:d):(k=+f[b+12>>2],(j=+f[a>>2])+k*((d=(d-j)/k)-(0|~~+q(+d)))),a=b+48|0,+f[(e=b+44|0)>>2]!=d?(c[a>>2]=1,f[e>>2]=d):c[a>>2]=0,g&&(f[h>>2]=d),!(i>>>0<=(b=b+52|0)>>>0);)h=h+4|0}(a+540|0),function(a){var n,b=0,d=0,e=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,o=0,p=0,q=0,r=0,t=0,u=0,s=(b=0|c[(a|=0)+544>>2])+(52*(n=0|c[a+540>>2])|0)|0;if(!((0|n)<=0)){n=0==(0|c[a+620>>2]);do{a:do{if(0==(0|c[b>>2])&&(o=+f[b+44>>2],p=+f[b+20>>2],q=+f[b+24>>2],t=(r=0|c[b+28>>2])+(28*(l=0|c[b+32>>2])|0)|0,0<(0|l))){if(!n)for(l=r;;){h=0|c[l>>2];do{if(1<=(0|h)){if(g=0|c[l+4>>2],d=(e=+f[g>>2])-p,1==(0|h)){h=!(o<p+e)|!(d<o),d=a=0,m=41;break}if(o<d){g=l+16|0,i=1,d=a=0,m=43;break}if(o<p+e)d=a=h=0,m=41;else{for(a=1;!(o<p+(d=+f[g+(a<<2)>>2]));){if(!((0|(a=a+1|0))<(0|h))){m=40;break}e=d}if(40==(0|m)){g=l+16|0,a=h+-(i=1)|0,d=0,m=43;break}d=d-p<o?h=0:(a=a+-1|0,(d-=e)<q?h=0:(h=0,(o-e)/d)),m=41}}else d=a=h=0,m=41}while(0);if(41==(0|m)&&(h|(m=0)==(0|c[(g=l+16|0)>>2])?(i=1&h,m=43):(c[l+24>>2]=1,c[l+20>>2]=1,k=l+8|0,j=l+12|0,h=0)),43==(0|m)&&(e=+f[(j=l+12|(m=0))>>2],h=1&((0|c[(k=l+8|0)>>2])!=(0|a)|(u=e!=d)&(0==d|0==e)),c[l+24>>2]=1&u,c[l+20>>2]=h,h=i),f[j>>2]=d,c[k>>2]=a,c[g>>2]=h,t>>>0<=(l=l+28|0)>>>0)break a}if(!(0|c[b+48>>2]))for(a=r;;)if(c[a+24>>2]=0,t>>>(c[a+20>>2]=0)<=(a=a+28|0)>>>0)break a;l=r;do{h=0|c[l>>2];do{if(1<=(0|h)){if(g=0|c[l+4>>2],d=(e=+f[g>>2])-p,1==(0|h)){h=!(o<p+e)|!(d<o),d=a=0,m=24;break}if(o<d){g=l+16|0,i=1,d=a=0,m=26;break}if(o<p+e)d=a=h=0,m=24;else{for(a=1;!(o<p+(d=+f[g+(a<<2)>>2]));){if(!((0|(a=a+1|0))<(0|h))){m=21;break}e=d}if(21==(0|m)){g=l+16|0,a=h+-(i=1)|0,d=0,m=26;break}d=d-p<o?h=0:(a=a+-1|0,(d-=e)<q?h=0:(h=0,(o-e)/d)),m=24}}else d=a=h=0,m=24}while(0)}while(24==(0|m)&&(h|(m=0)==(0|c[(g=l+16|0)>>2])?(i=1&h,m=26):(c[l+24>>2]=1,c[l+20>>2]=1,k=l+8|0,j=l+12|0,h=0)),26==(0|m)&&(e=+f[(j=l+12|(m=0))>>2],h=1&((0|c[(k=l+8|0)>>2])!=(0|a)|(u=e!=d)&(0==d|0==e)),c[l+24>>2]=1&u,c[l+20>>2]=h,h=i),f[j>>2]=d,c[k>>2]=a,c[g>>2]=h,(l=l+28|0)>>>0<t>>>0)}}while(0)}while((b=b+52|0)>>>0<s>>>0)}}(a),Qb(a),function(a){var l,o,y,z,p,b=0,d=0,e=0,g=0,h=0,i=0,j=0,k=0,m=0,n=0,q=0,r=0,s=0,u=0,w=0,x=0,t=(b=0|c[(a|=0)+568>>2])+(36*(p=0|c[a+564>>2])|0)|0;if(!((0|p)<=0)){p=0==(0|c[a+620>>2]);do{o=0|c[b+4>>2];a:do{if(0<(0|o))for(i=0|c[b>>2],e=a=d=j=0;;){if(g=0|c[i+(j<<2)>>2],0|c[g+16>>2]){e=1,a=d=0;break a}if(e=e||0|c[g+24>>2],a=a||0|c[g+20>>2],d=d+(0!=+f[g+12>>2]&1)|0,(0|o)<=(0|(j=j+1|0))){i=d,x=11;break}}else e=a=i=0,x=11}while(0);b:do{if(11==(0|x))if(d=p?a:1,(x=0)!=((a=p?e:1)|d|0)&&(c[b+12>>2]=w=1<<i,q=0|c[b>>2],r=0|c[b+16>>2],s=0|c[b+20>>2],u=r+(w<<2)|0,31!=(0|i))){for($c(0|r,0,((e=r+4|0)>>>0<u>>>0?u:e)+~r+4&-4|0),e=s+(w<<2)|0,g=s;f[g>>2]=1,(g=g+4|0)>>>0<e>>>0;);if(1<=(0|o)){if(!i)for(i=0,k=1;;){if(g=0|c[q+(i<<2)>>2],j=0|v(0|c[g+8>>2],k),0==(h=+f[g+12>>2]))for(e=0;c[(n=r+(e<<2)|0)>>2]=(0|c[n>>2])+j,(0|(e=e+1|0))!=(0|w););else c[r>>2]=(0|c[r>>2])+j,f[s>>2]=(1-h)*+f[s>>2];if(k=0|v(0|c[g>>2],k),(0|(i=i+1|0))==(0|o)){e=0;break b}}m=0,n=e=1;do{if(l=0|c[q+(m<<2)>>2],g=0|c[8+l>>2],k=0|v(g,n),0==(h=+f[(j=12+l|0)>>2]))for(g=0;c[(j=r+(g<<2)|0)>>2]=(0|c[j>>2])+k,(0|(g=g+1|0))!=(0|w););else{for(i=0|v(g+1|0,n),c[r>>2]=(0|c[r>>2])+k,f[s>>2]=(1-h)*+f[s>>2],g=1;h=+f[j>>2],c[(y=r+(g<<2)|0)>>2]=((z=0!=(g&e|0))?i:k)+(0|c[y>>2]),f[(y=s+(g<<2)|0)>>2]=(z?h:1-h)*+f[y>>2],(0|(g=g+1|0))!=(0|w););e<<=1}}while(n=0|v(0|c[l>>2],n),(0|(m=m+1|0))!=(0|o));e=0}else e=0}else e=0}while(0)}while(c[b+28>>2]=a,c[b+24>>2]=d,c[b+32>>2]=e,(b=b+36|0)>>>0<t>>>0)}}(a),Rb(a),e=0|c[a+4>>2],d=(b=0|c[a+52>>2])+(e<<2)|0,0<(0|e))for(;g=+f[b>>2],f[b>>2]=g<0?0:1<g?1:g,(b=b+4|0)>>>0<d>>>0;);!function(a,b,d){d|=0;var e=0,f=(b|=0)+(12*(a|=0)|0)|0;if(!((0|a)<=0))for(e=d;;){do{if(0|c[b+8>>2]){if(-1!=(0|(a=0|c[b+4>>2]))&&0==(0|c[d+(a<<2)>>2])){a=0;break}a=0==(0|c[32+(0|c[b>>2])>>2])}else a=0}while(0);if(c[e>>2]=1&a,f>>>0<=(b=b+12|0)>>>0)break;e=e+4|0}}(e,0|c[a+8>>2],0|c[a+40>>2]),function(a){var e,f,i,q,r,b=0,d=0,g=0,h=0,k=0,l=0,o=0,p=0,s=0,t=0,u=0,j=0|c[8+(a|=0)>>2],b=0|c[a>>2],m=0|c[b+724>>2],n=0|c[a+4>>2];if(!((0|n)<=0))for(q=a+28|0,r=a+36|0,i=a+32|0,f=b+976|0,h=g=0;;){if(e=0|c[j+(12*g|0)>>2],6==(0|(u=0!=(0|c[(a=24+e|0)>>2])||0|c[28+e>>2]?6:u))&&(c[((u=0)|c[q>>2])+(g<<2)>>2]=c[(p=12+e|0)>>2],0|c[a>>2])&&(o=0|c[m+(g<<2)>>2],s=(k=0|c[16+e>>2])+((d=0|c[p>>2])<<2)|0,0<(0|d)))for(a=0|c[f>>2],b=(0|c[r>>2])+(h<<2)|0,d=k;c[b>>2]=c[a+((0|c[d>>2])+o<<2)>>2],!(s>>>0<=(d=d+4|0)>>>0);)b=b+4|0;if(0|c[28+e>>2]&&(t=(l=0|c[20+e>>2])+((d=0|c[12+e>>2])<<2)|0,0<(0|d)))for(a=(0|c[i>>2])+(h<<2)|0,b=l;c[a>>2]=c[b>>2],!(t>>>0<=(b=b+4|0)>>>0);)a=a+4|0;if((0|(g=g+1|0))==(0|n))break;h=(0|c[8+e>>2])+h|0}}(a),function(a){Aa(12+(a|=0)|0,0|c[36+a>>2],0|c[44+a>>2],0|c[40+a>>2])}(a),function(a){var d,f,g,h,i,k,b=0,e=0,j=S=(k=S)+63&-64;if(S=S+16|0,i=(b=0|c[308+(a|=0)>>2])+((e=0|c[a+304>>2])<<5)|0,f=0|c[a+40>>2],g=0|c[a+312>>2],h=0|c[a+144>>2],d=0|c[a+264>>2],(0|e)<=0)S=k;else{for(e=g;;){do{if(0|c[b+28>>2]){if(-1!=(0|(a=0|c[b+4>>2]))&&0==(0|c[f+(a<<2)>>2])){a=0;break}if(-1!=(0|(a=0|c[b+8>>2]))&&0==(0|c[g+(a<<2)>>2])){a=0;break}a=0==(0|c[32+(0|c[b>>2])>>2])}else a=0}while(0);switch(a&=1,c[e>>2]=a,0|c[b+12>>2]){case 0:c[h+(c[b+16>>2]<<2)>>2]=a;break;case 1:c[d+(c[b+16>>2]<<2)>>2]=a;break;default:ia(0,2874,j)}if(i>>>0<=(b=b+32|0)>>>0)break;e=e+4|0}S=k}}(a),Eb(a),Fb(a),va(a),wa(a),function(a){var b=0,d=0,g=(b=0|c[(a|=0)+336>>2])+(20*(d=0|c[a+332>>2])|0)|0,e=0|c[a+40>>2],f=0|c[a+312>>2];if(!((0|d)<=0))for(d=0|c[a+424>>2];;){do{if(0|c[b+12>>2]){if(-1!=(0|(a=0|c[b+4>>2]))&&0==(0|c[e+(a<<2)>>2])){a=0;break}if(-1!=(0|(a=0|c[b+8>>2]))&&0==(0|c[f+(a<<2)>>2])){a=0;break}a=0==(0|c[32+(0|c[b>>2])>>2])}else a=0}while(0);if(c[d>>2]=1&a,g>>>0<=(b=b+20|0)>>>0)break;d=d+4|0}}(a),Gb(a),xa(a),function(a){var e,f,i,q,r,b=0,d=0,g=0,h=0,k=0,l=0,o=0,p=0,s=0,t=0,u=0,j=0|c[504+(a|=0)>>2],b=0|c[a>>2],m=0|c[b+1192>>2],n=0|c[a+500>>2];if(!((0|n)<=0))for(q=a+524|0,r=a+532|0,i=a+528|0,f=b+1224|0,h=g=0;;){if(e=0|c[j+(24*g|0)>>2],6==(0|(u=0!=(0|c[(a=24+e|0)>>2])||0|c[28+e>>2]?6:u))&&(c[((u=0)|c[q>>2])+(g<<2)>>2]=c[(p=12+e|0)>>2],0|c[a>>2])&&(o=0|c[m+(g<<2)>>2],s=(k=0|c[16+e>>2])+((d=0|c[p>>2])<<2)|0,0<(0|d)))for(a=0|c[f>>2],b=(0|c[r>>2])+(h<<2)|0,d=k;c[b>>2]=c[a+((0|c[d>>2])+o<<2)>>2],!(s>>>0<=(d=d+4|0)>>>0);)b=b+4|0;if(0|c[28+e>>2]&&(t=(l=0|c[20+e>>2])+((d=0|c[12+e>>2])<<2)|0,0<(0|d)))for(a=(0|c[i>>2])+(h<<2)|0,b=l;c[a>>2]=c[b>>2],!(t>>>0<=(b=b+4|0)>>>0);)a=a+4|0;if((0|(g=g+1|0))==(0|n))break;h=(0|c[8+e>>2])+h|0}}(a),function(a){za(508+(a|=0)|0,0|c[532+a>>2],0|c[536+a>>2],0)}(a),fa(a),ha(a),function(a){var b=0,d=0,g=0,h=0,j=0,i=(b=0|c[8+(a|=0)>>2])+(12*(j=0|c[a+4>>2])|0)|0,e=0|c[a+48>>2];if(!((0|j)<=0))for(j=0|c[a+40>>2],d=e,a=0|c[a+52>>2];0|c[j>>2]&&(g=+f[a>>2],f[d>>2]=g,-1!=(0|(h=0|c[b+4>>2])))&&(f[d>>2]=g*+f[e+(h<<2)>>2]),!(i>>>0<=(b=b+12|0)>>>0);)j=j+4|0,d=d+4|0,a=a+4|0}(a),function(a){var d=0,e=0,f=0,b=0|c[304+(a|=0)>>2];if(!((0|b)<=0))for(d=0|c[312+a>>2],e=0|c[308+a>>2],f=0;0|c[d>>2]&&_[3&c[e+20>>2]](a,f),(0|(f=f+1|0))!=(0|b);)d=d+4|0,e=e+32|0}(a),Ab(a),ea(a),function(a){var g,j,b=0,d=0,e=0,h=0,i=0;if(!(0|c[(a|=0)+624>>2]||(g=(b=0|c[a+336>>2])+(20*(h=0|c[a+332>>2])|0)|0,(0|h)<=0)))for(h=0|c[a+424>>2],a=0|c[a+444>>2];;){if(0|c[h>>2]&&(e=0|c[a>>2],i=(d=0|c[b+16>>2])<<1,0<(0|d)))for(d=1;f[(j=e+(d<<2)|0)>>2]=-+f[j>>2],(0|(d=d+2|0))<(0|i););if(g>>>0<=(b=b+20|0)>>>0)break;h=h+4|0,a=a+4|0}}(a),function(a){var n,r,b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,o=0,p=0,q=0|c[(a|=0)+480>>2],j=(r=0|c[a+484>>2])+(28*q|0)|0,b=0|c[a+440>>2],d=0|c[a+44>>2],e=0|c[a+40>>2],f=0|c[a+424>>2];if(!((0|q)<=0)){k=r;do{if(0<(0|(g=0|c[k+4>>2])))for(h=0|c[k+12>>2],i=k+20|0,l=0;p=0|c[h+(l<<4)+4>>2],o=1==(0|c[h+(l<<4)>>2]),c[h+(l<<4)+12>>2]=c[(0==(0|c[(o?e:f)+(p<<2)>>2])?i:(o?d:b)+(p<<2)|0)>>2],(0|(l=l+1|0))!=(0|g););}while((k=k+28|0)>>>0<j>>>0);n=0|c[a+436>>2],o=a+488|0,p=a+492|0,l=a+496|0,m=0;do{if(0<(0|c[(a=r+(28*m|0)+24|0)>>2])){for(b=0|c[o>>2],e=0;c[b+(e<<2)>>2]=-1,(0|(e=e+1|0))<(0|(d=0|c[a>>2])););if(0<(0|d))for(b=0|c[l>>2],d=0;c[b+(d<<2)>>2]=-1,(0|(d=d+1|0))<(0|c[a>>2]););}if(0<(0|c[(k=r+(28*m|0)+4|0)>>2])){for(j=0|c[p>>2],d=0;c[j+(d<<2)>>2]=-1,(0|(d=d+1|0))<(0|(b=0|c[k>>2])););if(0<(0|b))for(e=0|c[r+(28*m|0)+12>>2],g=r+(28*m|0)+20|0,f=0|c[l>>2],i=0;d=(0|c[e+(i<<4)+12>>2])-(0|c[g>>2])|0,b=-1==(0|(b=0|c[(h=f+(d<<2)|0)>>2]))?(0|c[o>>2])+(d<<2)|0:j+(b<<2)|0,c[b>>2]=i,(0|(i=(c[h>>2]=i)+1|0))<(0|c[k>>2]););}if(0<(0|(b=0|c[a>>2]))){i=0|c[o>>2],j=r+(28*m|0)+12|0,d=(h=0)|c[r+(28*m|0)+8>>2];do{if(-1!=(0|(e=0|c[i+(h<<2)>>2]))){for(f=0|c[j>>2],g=0|c[p>>2];d=(b=1==(0|c[f+(e<<4)>>2])?(b=0|c[f+(e<<4)+8>>2],c[r+(28*b|0)+8>>2]=d,0|c[r+(28*b|0)>>2]):(c[n+(c[f+(e<<4)+4>>2]<<2)>>2]=d,1))+d|0,!((0|(e=0|c[g+((k=e)<<2)>>2]))<=(0|k)|-1==(0|e)););b=0|c[a>>2]}}while((0|(h=h+1|0))<(0|b))}}while((0|(m=m+1|0))!=(0|q))}}(a),Cb(a),c[a+620>>2]=0}function Qb(a){var l,s,b=0,e=0,g=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,t=0,u=0;if(!((0|d[4+(0|c[(a|=0)>>2])>>0])<4||(s=(b=0|c[a+544>>2])+(52*(l=0|c[a+540>>2])|0)|0,(0|l)<=0))){l=0==(0|c[a+620>>2]);do{a:do{if(1==(0|c[b>>2])&&(q=+f[b+44>>2],t=(r=0|c[b+36>>2])+(28*(k=0|c[b+40>>2])|0)|0,0<(0|k))){if(!l)for(j=r;;){g=0|c[j>>2];do{if(2<=(0|g)&&(o=0|c[j+4>>2],!(q<=(p=+f[o>>2])))){for(h=1,i=p;;){if(a=h+1|0,q<(e=+f[o+(h<<2)>>2])){k=25;break}if(!((0|a)<(0|g))){k=26;break}h=a,i=e}if(25==(0|k)){a=h+-1|0,e=(q-i)/(e-i);break}if(26==(0|k)){a=g+-1|0,e=0;break}}else e=a=0}while(0);if(i=+f[(h=j+16|0)>>2],g=1&((0|c[(k=j+12|0)>>2])!=(0|a)|(u=i!=e)&(0==e|0==i)),c[j+24>>2]=1&u,c[j+20>>2]=g,f[h>>2]=e,c[k>>2]=a,t>>>0<=(j=j+28|0)>>>0)break a}if(!(0|c[b+48>>2]))for(a=r;;)if(c[a+24>>2]=0,t>>>(c[a+20>>2]=0)<=(a=a+28|0)>>>0)break a;j=r;do{g=0|c[j>>2];do{if(2<=(0|g)&&(m=0|c[j+4>>2],!(q<=(n=+f[m>>2])))){for(h=1,i=n;;){if(a=h+1|0,q<(e=+f[m+(h<<2)>>2])){k=17;break}if(!((0|a)<(0|g))){k=18;break}h=a,i=e}if(17==(0|k)){a=h+-1|0,e=(q-i)/(e-i);break}if(18==(0|k)){a=g+-1|0,e=0;break}}else e=a=0}while(0)}while(i=+f[(k=j+16|0)>>2],h=1&((0|c[(u=j+12|0)>>2])!=(0|a)|(g=i!=e)&(0==e|0==i)),c[j+24>>2]=1&g,c[j+20>>2]=h,f[k>>2]=e,c[u>>2]=a,(j=j+28|0)>>>0<t>>>0)}}while(0)}while((b=b+52|0)>>>0<s>>>0)}}function Rb(a){var n,o,q,r,t,y,b=0,e=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,p=0,s=0,u=0,v=0,w=0,x=0;if(!((0|d[4+(0|c[(a|=0)>>2])>>0])<4||(y=(b=0|c[a+592>>2])+(48*(t=0|c[a+588>>2])|0)|0,(0|t)<=0))){t=0==(0|c[a+620>>2]);do{if(a=0|c[b>>2],g=t?0|c[a+24>>2]:1,(m=t?0|c[a+20>>2]:1)|g){k=0|c[a+12>>2],e=+f[a+16>>2],j=(0|k)==(0|(a=0|c[a+8>>2]));do{if(0!=e){if(i=k+1|0,j){e=(g=a=c[b+8>>2]=1)-e,s=11;break}a=(0|i)==(0|a)?1:2,s=10;break}}while(a=1&(1^j),s=10,0);10==(0|s)&&(s=0,c[b+8>>2]=a,g?(i=k,a=m,s=11):(i=k,a=m,g=0)),11==(0|s)&&(f[b+20>>2]=1-e,f[b+24>>2]=e),a?(c[b+12>>2]=i,c[b+16>>2]=i+1):a=0}else a=m;q=0|c[b+36>>2];a:do{if(0<(0|q)){if(r=0|c[b+40>>2],!t)for(k=0,e=1;;){j=0|c[r+(k<<2)>>2],i=0|c[j>>2];do{if(0!=(0|i)&&(u=0|c[j+4>>2],v=0|c[j+8>>2],w=0|c[j+12>>2],x=+f[i+44>>2],1<=(0|w))){if(1==(0|w)){h=+f[v>>2];break}if(x<=(h=+f[u>>2])){h=+f[v>>2];break}for(i=1;;){if(x<(l=+f[u+(i<<2)>>2])){s=43;break}if(!((0|(i=i+1|0))<(0|w))){s=44;break}h=l}if(43==(0|s)){h=(1-(h=(x-h)/(l-h)))*+f[v+(i+-1<<2)>>2]+h*+f[v+(i<<2)>>2];break}if(44==(0|s)){h=+f[v+(w+-1<<2)>>2];break}}else h=1}while(0);if(e=e<(f[j+16>>2]=h)?e:h,(0|(k=k+1|0))==(0|q))break a}p=0,e=1;do{o=0|c[r+(p<<2)>>2],i=0|c[o>>2];do{if(i){if(!(0|c[i+48>>2])){h=+f[16+o>>2];break}j=0|c[4+o>>2],k=0|c[8+o>>2],m=0|c[12+o>>2],n=+f[i+44>>2];do{if(1<=(0|m)){if(1==(0|m)){h=+f[k>>2];break}if(n<=(h=+f[j>>2])){h=+f[k>>2];break}for(i=1;;){if(n<(l=+f[j+(i<<2)>>2])){s=29;break}if(!((0|(i=i+1|0))<(0|m))){s=28;break}h=l}if(28==(0|s)){h=+f[k+(m+-1<<2)>>2];break}if(29==(0|s)){h=(1-(h=(n-h)/(l-h)))*+f[k+(i+-1<<2)>>2]+h*+f[k+(i<<2)>>2];break}}else h=1}while(0);f[16+o>>2]=h}else h=f[16+o>>2]=1}while(0)}while(e=e<h?e:h,(0|(p=p+1|0))!=(0|q))}else e=1}while(0)}while(f[b+44>>2]=e,c[b+28>>2]=a,c[b+32>>2]=g,(b=b+48|0)>>>0<y>>>0)}}function cc(b,d,e){b|=0,d|=0,e|=0;var f,j,h=0,g=S,i=S=S+63&-64;S=S+144|0,Zc(0|i,640,144),c[48+i>>2]=h=(h=-2-b|0)>>>0<256?h:256,c[(f=20+i|0)>>2]=b,j=(c[44+i>>2]=b)+h|0,c[(b=16+i|0)>>2]=j,c[28+i>>2]=j,dc(i,d,e),0|h&&(j=0|c[f>>2],a[j+(((0|j)==(0|c[b>>2]))<<31>>31)>>0]=0),S=g}function dc(a,b,c){gc(a|=0,b|=0,c|=0)}function ec(b,e,f,g,h,i){b|=0,e=+e,f|=0,g|=0,h|=0,i|=0;var C,B,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,w=0,x=0,y=0,A=0,D=0,E=0,F=0,G=0,H=S,l=S=S+63&-64;S=S+560|0,m=l+32|0,t=l+536|0,E=12+(l=(F=G=l)+540|0)|(c[t>>2]=0),vc(e),B=(0|(j=0|z()))<0?(vc(e=-e),j=0|z(),D=1,2955):(D=0!=(2049&h|0)&1,0==(2048&h|0)?0==(1&h|0)?2956:2961:2958);do{if(!0&2146435072==(2146435072&j|0))G=0!=(32&i|0),qc(b,32,f,j=D+3|0,-65537&h),ic(b,B,D),ic(b,e!=e|!1?G?2982:2986:G?2974:2978,3),qc(b,32,f,j,8192^h);else{if((j=0!=(q=2*+wc(e,t)))&&(c[t>>2]=(0|c[t>>2])-1),97==(0|(w=32|i))){r=0==(0|(o=32&i))?B:9+B|0,p=2|D,j=12-g|0;do{if(!(11<g>>>0|0==(0|j))){for(e=8;e*=16,0!=(0|(j=j+-1|0)););if(45==(0|a[r>>0])){e=-(e+(-q-e));break}e=q+e-e;break}}while(e=q,0);for((0|(j=0|oc(j=(0|(k=0|c[t>>2]))<0?0-k|0:k,((0|j)<0)<<31>>31,E)))==(0|E)&&(a[(j=l+11|0)>>0]=48),a[j+-1>>0]=43+(k>>31&2),a[(n=j+-2|0)>>0]=i+15,k=(0|g)<1,l=0==(8&h|0),j=G;m=j+1|0,a[j>>0]=o|d[480+(D=~~e)>>0],e=16*(e-(0|D)),1!=(m-F|0)||l&k&0==e||(a[m>>0]=46,m=j+2|0),0!=e;)j=m;qc(b,32,f,E=(j=0!=(0|g)&&(-2-F+m|0)<(0|g)?g+2+(k=E)-(l=n)|0:(k=E)-F-(l=n)+m|0)+p|0,h),ic(b,r,p),qc(b,48,f,E,65536^h),ic(b,G,F=m-F|0),qc(b,48,j-(F+(G=k-l|0))|0,0,0),ic(b,n,G),qc(b,32,f,E,8192^h),j=E;break}for(k=(0|g)<0?6:g,e=j?(l=(0|c[t>>2])-28|0,c[t>>2]=l,268435456*q):(l=0|c[t>>2],q),m=C=(0|l)<0?m:m+288|0;c[m>>2]=y=~~e>>>0,m=m+4|0,0!=(e=1e9*(e-(y>>>0))););if(y=C,0<(0|l)){j=C;do{if(o=(0|l)<29?l:29,j>>>0<=(l=m+-4|0)>>>0){for(n=0;s=0|Rc(0|(s=0|Xc(0|c[l>>2],0,0|o)),0|z(),0|n,0),x=0|Rc(0|s,0|(u=0|z()),0|(x=0|Qc(0|(n=0|Vc(0|s,0|u,1e9,0)),0|z(),-1e9,-1)),0|z()),z(),c[l>>2]=x,j>>>0<=(l=l+-4|0)>>>0;);n&&(c[(j=j+-4|0)>>2]=n)}a:do{if(j>>>0<m>>>0)for(;;){if(0|c[(l=m+-4|0)>>2])break a;if(!(j>>>0<l>>>0)){m=l;break}m=l}}while(0)}while(l=(0|c[t>>2])-o|0,0<(0|(c[t>>2]=l)))}else j=C;if((0|l)<0){g=1+((k+25|0)/9|0)|0,s=102==(0|w);do{if(r=(0|(r=0-l|0))<9?r:9,j>>>0<m>>>0){for(o=(1<<r)-1|0,n=r?1e9>>>r:1e9,p=0,l=j;x=0|c[l>>2],c[l>>2]=(r?x>>>r:x)+p,p=0|v(x&o,n),(l=l+4|0)>>>0<m>>>0;);j=0==(0|c[j>>2])?j+4|0:j,p&&(c[m>>2]=p,m=m+4|0)}else j=0==(0|c[j>>2])?j+4|0:j}while(m=(0|g)<((x=m-(l=s?C:j)|0)>>2|0)?l+(g<<2)|0:m,l=(0|c[t>>2])+r|0,(0|(c[t>>2]=l))<0);s=m}else s=m;if(j>>>0<s>>>0){if(l=9*((y-j|0)>>2)|0,10<=(n=0|c[j>>2])>>>0)for(m=10;l=l+1|0,(m=10*m|0)>>>0<=n>>>0;);}else l=0;if((0|(m=k-(102==(0|w)?0:l)+(((u=0!=(0|k))&(t=103==(0|w)))<<31>>31)|0))<((9*((x=s-y|0)>>2)|0)-9|0)){if(g=C+4+((m=(0|(x=m+9216|0))/9|0)-1024<<2)|0,(0|(m=x+(0|v(m,-9))|0))<8)for(n=10;n=10*n|0,(0|m)<7;)m=m+1|0;else n=10;if((p=(g+4|0)==(0|s))&0==(0|(o=(o=0|c[g>>2])-(r=0|v(m=(o>>>0)/(n>>>0)|0,n))|0)))m=g;else if(q=0==(1&m|0)?9007199254740992:9007199254740994,e=o>>>0<(x=n>>>1)>>>0?.5:p&(0|o)==(0|x)?1:1.5,D&&(q=(x=45==(0|a[B>>0]))?-q:q,e=x?-e:e),c[g>>2]=r,q+e!=q){if(999999999<(c[g>>2]=x=r+n|0)>>>0)for(l=g;(m=l+-4|0)>>>(c[l>>2]=0)<j>>>0&&(c[(j=j+-4|0)>>2]=0),x=1+(0|c[m>>2])|0,999999999<(c[m>>2]=x)>>>0;)l=m;else m=g;if(l=9*((y-j|0)>>2)|0,10<=(o=0|c[j>>2])>>>0)for(n=10;l=l+1|0,(n=10*n|0)>>>0<=o>>>0;);}else m=g;x=j,j=(w=m+4|0)>>>0<s>>>0?w:s}else x=j,j=s;r=0-l|0;b:do{if(x>>>0<j>>>0)for(;;){if(0|c[(m=j+-4|0)>>2]){s=1,w=j;break b}if(!(x>>>0<m>>>0)){s=0,w=m;break}j=m}else s=0,w=j}while(0);do{if(t){if(n=(0|l)<(0|(j=k+(1&(1^u))|0))&-5<(0|l)?(k=j+-1-l|0,i+-1|0):(k=j+-1|0,i+-2|0),!(8&h)){if(s&&0!=(0|(A=0|c[w+-4>>2])))if((A>>>0)%10|0)m=0;else for(j=10,m=0;m=m+1|0,!((A>>>0)%((j=10*j|0)>>>0)|0););else m=9;if(j=(9*((w-y|0)>>2)|0)-9|0,102==(32|n)){k=(0|k)<(0|(i=0<(0|(i=j-m|0))?i:0))?k:i;break}k=(0|k)<(0|(i=0<(0|(i=j+l-m|0))?i:0))?k:i;break}}else n=i}while(0);if(o=(g=0!=(0|k))?1:h>>>3&1,p=102==(32|n))j=(u=0)<(0|l)?l:0;else{if(((m=E)-(j=0|oc(j=(0|l)<0?r:l,((0|j)<0)<<31>>31,E))|0)<2)for(;a[(j=j+-1|0)>>0]=48,(m-j|0)<2;);a[j+-1>>0]=43+(l>>31&2),a[(j=j+-2|0)>>0]=n,j=m-(u=j)|0}if(qc(b,32,f,j=D+1+k+o+j|0,h),ic(b,B,D),qc(b,48,f,j,65536^h),p){p=r=G+9|0,n=G+8|0,m=o=C>>>0<x>>>0?C:x;do{if(l=0|oc(0|c[m>>2],0,r),(0|m)==(0|o))(0|l)==(0|r)&&(a[n>>0]=48,l=n);else if(G>>>0<l>>>0)for($c(0|G,48,l-F|0);G>>>0<(l=l+-1|0)>>>0;);}while(ic(b,l,p-l|0),(m=m+4|0)>>>0<=C>>>0);if(0==(8&h|0)&(1^g)||ic(b,2990,1),m>>>0<w>>>0&0<(0|k))for(;;){if(G>>>0<(l=0|oc(0|c[m>>2],0,r))>>>0)for($c(0|G,48,l-F|0);G>>>0<(l=l+-1|0)>>>0;);if(ic(b,l,(0|k)<9?k:9),l=k+-9|0,!((m=m+4|0)>>>0<w>>>0&9<(0|k))){k=l;break}k=l}qc(b,48,k+9|0,9,0)}else{if(x>>>0<(g=s?w:x+4|0)>>>0&-1<(0|k)){t=0==(8&h|0),s=r=G+9|0,n=0-F|0,p=G+8|0,o=x;do{(0|(l=0|oc(0|c[o>>2],0,r)))==(0|r)&&(a[p>>0]=48,l=p);do{if((0|o)==(0|x)){if(m=l+1|0,ic(b,l,1),t&(0|k)<1){l=m;break}ic(b,2990,1),l=m}else{if(l>>>0<=G>>>0)break;for($c(0|G,48,l+n|0);G>>>0<(l=l+-1|0)>>>0;);}}while(0)}while(ic(b,l,(0|(F=s-l|0))<(0|k)?F:k),(o=o+4|0)>>>0<g>>>0&-1<(0|(k=k-F|0)))}qc(b,48,k+18|0,18,0),ic(b,u,E-u|0)}qc(b,32,f,j,8192^h)}}while(0);return S=H,0|((0|j)<(0|f)?f:j)}function gc(b,d,e){b|=0,d|=0,e|=0;var h,i,j,k,l,n,o,f=0,g=0,p=S,m=S=S+63&-64;for(S=S+224|0,l=208+m|0,n=80+m|0,g=40+(f=o=160+m|0)|0;(0|(f=f+4|(c[f>>2]=0)))<(0|g););c[l>>2]=c[e>>2],0<=(0|hc(0,d,l,n,o))&&(k=32&(e=0|c[b>>2]),(0|a[b+74>>0])<1&&(c[b>>2]=-33&e),0|c[(g=b+48|0)>>2]?hc(b,d,l,n,o):(e=0|c[(f=b+44|0)>>2],c[f>>2]=m,c[(h=b+28|0)>>2]=m,c[(j=b+20|0)>>2]=m,c[g>>2]=80,c[(i=b+16|0)>>2]=80+m,hc(b,d,l,n,o),0|e&&(X[3&c[b+36>>2]](b,0,0),c[f>>2]=e,c[g>>2]=0,c[i>>2]=0,c[h>>2]=0,c[j>>2]=0)),c[b>>2]=c[b>>2]|k),S=p}function hc(d,e,f,h,i){d|=0,f|=0,h|=0,i|=0;var v,w,x,y,A,B,D,E,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,G=0,F=S,C=S=S+63&-64;S=S+64|0,D=56+C|0,B=40+C|0,E=48+(w=C)|0,C=60+C|0,c[D>>2]=e|=0,A=0!=(0|d),y=v=40+w|0,w=39+w|0,x=4+E|0,m=j=e=0;a:for(;;){do{do{if(-1<(0|e)){if((2147483647-e|0)<(0|j)){c[1026]=61,e=-1;break}e=j+e|0;break}}while(0);if(p=0|c[D>>2],!((j=0|a[p>>0])<<24>>24)){u=91;break a}k=p;b:for(;;){switch(j<<24>>24){case 37:u=10;break b;case 0:j=k;break b}c[D>>2]=t=k+1|0,j=0|a[t>>0],k=t}c:do{if(10==(0|u)){u=0,j=l=k;do{if(37!=(0|a[l+1>>0]))break c}while(j=j+1|0,c[D>>2]=l=l+2|0,37==(0|a[l>>0]))}}while(0)}while(j=j-p|0,A&&ic(d,p,j),0!=(0|j));if(l=0|c[D>>2],o=0|jc(j=0|a[l+1>>0])?(k=(o=36==(0|a[l+2>>0]))?3:1,r=o?j+-48|0:-1,o?1:m):(r=-(k=1),m),c[D>>2]=k=l+k|0,31<(l=((j=0|a[k>>0])<<24>>24)-32|0)>>>0|0==(1<<l&75913|0))n=0;else for(j=0;;){if(m=1<<l|j,c[D>>2]=k=k+1|0,31<(l=((j=0|a[k>>0])<<24>>24)-32|0)>>>0|0==(1<<l&75913|0)){n=m;break}j=m}if(j<<24>>24==42){if(0!=(0|jc(j=0|a[(l=k+1|0)>>0]))&&36==(0|a[k+2>>0]))c[i+(j+-48<<2)>>2]=10,m=1,j=k+3|0,k=0|c[h+((0|a[l>>0])-48<<3)>>2];else{if(0|o){e=-1;break}A?(m=3+(0|c[f>>2])&-4,k=0|c[m>>2],c[f>>2]=m+4,m=0,j=l):(j=l,k=m=0)}l=c[D>>2]=j,q=(s=(0|k)<0)?8192|n:n,t=m,s=s?0-k|0:k}else{if((0|(j=0|kc(D)))<0){e=-1;break}l=0|c[D>>2],q=n,t=o,s=j}do{if(46==(0|a[l>>0])){if(42!=(0|a[(j=l+1|0)>>0])){c[D>>2]=j,n=0|kc(D),j=0|c[D>>2];break}if(0|jc(k=0|a[(j=l+2|0)>>0])&&36==(0|a[l+3>>0])){c[i+(k+-48<<2)>>2]=10,n=0|c[h+((0|a[j>>0])-48<<3)>>2],c[D>>2]=j=l+4|0;break}if(0|t){e=-1;break a}A?(o=3+(0|c[f>>2])&-4,k=0|c[o>>2],c[f>>2]=o+4):k=0,c[D>>2]=j,n=k}else j=l,n=-1}while(0);for(o=0;;){if(57<((0|a[j>>0])-65|0)>>>0){e=-1;break a}if(c[D>>2]=k=j+1|0,!(((m=255&(l=0|a[(0|a[j>>0])-65+(16+(58*o|0))>>0]))-1|0)>>>0<8))break;j=k,o=m}if(!(l<<24>>24)){e=-1;break}k=-1<(0|r);do{if(l<<24>>24==19){if(k){e=-1;break a}u=52}else{if(k){c[i+(r<<2)>>2]=m,r=0|c[4+(m=h+(r<<3)|0)>>2],c[(u=B)>>2]=c[m>>2],c[u+4>>2]=r,u=52;break}if(!A){e=0;break a}lc(B,m,f),u=53}}while(0);52==(0|u)&&(u=0,A?u=53:j=0);d:do{if(53==(0|u)){l=(u=0)!=(0|o)&3==(15&(l=0|a[j>>0])|0)?-33&l:l,j=-65537&q,r=0==(8192&q|0)?q:j;e:do{switch(0|l){case 110:switch((255&o)<<24>>24){case 0:case 1:c[c[B>>2]>>2]=e,j=0;break d;case 2:j=0|c[B>>2],c[j>>2]=e,c[j+4>>2]=((0|e)<0)<<31>>31,j=0;break d;case 3:b[c[B>>2]>>1]=e,j=0;break d;case 4:a[c[B>>2]>>0]=e,j=0;break d;case 6:c[c[B>>2]>>2]=e,j=0;break d;case 7:j=0|c[B>>2],c[j>>2]=e,c[j+4>>2]=((0|e)<0)<<31>>31,j=0;break d;default:j=0;break d}case 112:j=8|r,k=8<n>>>0?n:8,m=120,u=65;break;case 88:case 120:j=r,k=n,m=l,u=65;break;case 111:n=0==(8&(j=r)|0)|(0|(l=y-(o=0|function(b,c,d){if(d|=0,!(0==(0|(b|=0))&0==(0|(c|=0))))for(;a[(d=d+-1|0)>>0]=7&b|48,!(0==(0|(b=0|Wc(0|b,0|c,3)))&0==(0|(c=0|z()))););return 0|d}(p=0|c[(q=B)>>2],q=0|c[q+4>>2],v))|0))<(0|n)?n:l+1|0,l=0,k=2938,u=71;break;case 105:case 100:if(j=0|c[(k=B)>>2],(0|(k=0|c[k+4>>2]))<0){j=0|Sc(0,0,0|j,0|k),k=0|z(),c[(l=B)>>2]=j,c[l+4>>2]=k,l=1,m=2938,u=70;break e}l=0!=(2049&r|0)&1,m=0==(2048&r|0)?0==(1&r|0)?2938:2940:2939,u=70;break e;case 117:j=0|c[(k=B)>>2],k=0|c[k+4>>2],l=0,m=2938,u=70;break;case 99:a[w>>0]=c[B>>2],p=w,o=j,m=1,l=0,k=2938,j=y;break;case 115:p=q=0==(0|(q=0|c[B>>2]))?2948:q,o=j,m=(G=0==(0|(r=0|pc(q,n))))?n:r-q|0,l=0,k=2938,j=G?q+n|0:r;break;case 67:c[E>>2]=c[B>>2],c[x>>2]=0,l=c[B>>2]=E,n=-1,u=78;break;case 83:if(n){l=0|c[B>>2],u=78;break e}qc(d,32,s,0,r),j=0,u=88;break e;case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:j=0|ec(d,+g[B>>3],s,n,r,l);break d;default:o=r,m=n,l=0,k=2938,j=y}}while(0);f:do{if(65==(0|u))o=0|mc(p=0|c[(q=B)>>2],q=0|c[q+4>>2],v,32&m),n=k,l=(G=0==(8&j|0)|0==(0|p)&0==(0|q))?0:2,k=G?2938:2938+(m>>>4)|0,u=71;else if(70==(0|u))o=0|oc(p=j,q=k,v),j=r,k=m,u=71;else if(78==(0|u)){for(j=u=0,o=l;k=0|c[o>>2];){if((m=(0|(k=0|rc(C,k)))<0)|(n-j|0)>>>0<k>>>0){u=82;break}if(!((j=k+j|0)>>>0<n>>>0))break;o=o+4|0}if(82==(0|u)&&(u=0,m)){e=-1;break a}if(qc(d,32,s,j,r),j)for(m=0;;){if(!(k=0|c[l>>2])){u=88;break f}if((0|j)<(0|(m=(k=0|rc(C,k))+m|0))){u=88;break f}if(ic(d,C,k),j>>>0<=m>>>0){u=88;break}l=l+4|0}else j=0,u=88}}while(0);if(71==(0|u))G=(u=0)!=(0|n)|(m=0!=(0|p)|0!=(0|q)),m=y-o+(1&(1^m))|0,p=G?o:v,o=-1<(0|n)?-65537&j:j,m=G?(0|m)<(0|n)?n:m:0,j=y;else if(88==(0|u)){u=0,qc(d,32,s,j,8192^r),j=(0|j)<(0|s)?s:j;break}qc(d,32,j=(0|s)<(0|(G=(q=(0|m)<(0|(r=j-p|0))?r:m)+l|0))?G:s,G,o),ic(d,k,l),qc(d,48,j,G,65536^o),qc(d,48,q,r,0),ic(d,p,r),qc(d,32,j,G,8192^o)}}while(0);m=t}g:do{if(91==(0|u)&&!d)if(m){for(e=1;j=0|c[i+(e<<2)>>2];)if(lc(h+(e<<3)|0,j,f),10<=(e=e+1|0)>>>0){e=1;break g}for(j=0;;){if(e=e+1|0,0|j){e=-1;break g}if(10<=e>>>0){e=1;break g}j=0|c[i+(e<<2)>>2]}}else e=0}while(0);return S=F,0|e}function ic(a,b,d){b|=0,d|=0,32&c[(a|=0)>>2]||tc(b,d,a)}function jc(a){return((0|a)-48|0)>>>0<10|0}function kc(b){var d=0,e=0,f=0,e=0|c[(b|=0)>>2];if(0|jc((d=0|a[e>>0])<<24>>24))for(f=d,d=0;d=(10*d|0)-48+(f<<24>>24)|0,c[b>>2]=e=e+1|0,0!=(0|jc((f=0|a[e>>0])<<24>>24)););else d=0;return 0|d}function lc(a,b,d){a|=0,b|=0,d|=0;var h,e=0,f=0;a:do{if(b>>>0<=20)switch(0|b){case 9:e=3+(0|c[d>>2])&-4,b=0|c[e>>2],c[d>>2]=e+4,c[a>>2]=b;break a;case 10:e=3+(0|c[d>>2])&-4,b=0|c[e>>2],c[d>>2]=e+4,c[(e=a)>>2]=b,c[e+4>>2]=((0|b)<0)<<31>>31;break a;case 11:e=3+(0|c[d>>2])&-4,b=0|c[e>>2],c[d>>2]=e+4,c[(e=a)>>2]=b,c[e+4>>2]=0;break a;case 12:e=7+(0|c[d>>2])&-8,f=0|c[(b=e)>>2],b=0|c[b+4>>2],c[d>>2]=e+8,c[(e=a)>>2]=f,c[e+4>>2]=b;break a;case 13:f=3+(0|c[d>>2])&-4,e=0|c[f>>2],c[d>>2]=f+4,c[(f=a)>>2]=e=(65535&e)<<16>>16,c[f+4>>2]=((0|e)<0)<<31>>31;break a;case 14:f=3+(0|c[d>>2])&-4,e=0|c[f>>2],c[d>>2]=f+4,c[(f=a)>>2]=65535&e,c[f+4>>2]=0;break a;case 15:f=3+(0|c[d>>2])&-4,e=0|c[f>>2],c[d>>2]=f+4,c[(f=a)>>2]=e=(255&e)<<24>>24,c[f+4>>2]=((0|e)<0)<<31>>31;break a;case 16:f=3+(0|c[d>>2])&-4,e=0|c[f>>2],c[d>>2]=f+4,c[(f=a)>>2]=255&e,c[f+4>>2]=0;break a;case 17:f=7+(0|c[d>>2])&-8,h=+g[f>>3],c[d>>2]=f+8,g[a>>3]=h;break a;case 18:!function(a,b){a|=0;var e=7+(0|c[(b|=0)>>2])&-8,d=+g[e>>3];c[b>>2]=8+e,g[a>>3]=d}(a,d);break a;default:break a}}while(0)}function mc(b,c,e,f){if(e|=0,f|=0,!(0==(0|(b|=0))&0==(0|(c|=0))))for(;a[(e=e+-1|0)>>0]=0|d[480+(15&b)>>0]|f,!(0==(0|(b=0|Wc(0|b,0|c,4)))&0==(0|(c=0|z()))););return 0|e}function oc(b,c,d){d|=0;var e,f=0,g=0;if(0<(c|=0)>>>0|0==(0|c)&4294967295<(b|=0)>>>0)for(;g=0|Rc(0|(e=b),0|(f=c),0|(g=0|Qc(0|(b=0|Vc(0|b,0|c,10,0)),0|(c=0|z()),-10,-1)),0|z()),z(),a[(d=d+-1|0)>>0]=255&g|48,9<f>>>0|9==(0|f)&4294967295<e>>>0;);if(b)for(;f=255&((g=b)+(0|v(b=(b>>>0)/10|0,-10))|48),a[(d=d+-1|0)>>0]=f,10<=g>>>0;);return 0|d}function pc(b,d){b|=0;var e=0,f=0,e=0!=(0|(d|=0));a:do{if(e&0!=(3&b|0))for(;;){if(!(0|a[b>>0]))break a;if(!((e=0!=(0|(d=d+-1|0)))&0!=(3&(b=b+1|0)|0))){f=5;break}}else f=5}while(0);b:do{if(5==(0|f)){do{if(e){if(!(0|a[b>>0])){if(d)break b;break}c:do{if(3<d>>>0)for(;;){if((-2139062144&(e=0|c[b>>2])^-2139062144)&e+-16843009|0)break c;if(b=b+4|0,(d=d+-4|0)>>>0<=3){f=11;break}}else f=11}while(0);if(11==(0|f)&&!d)break;for(;;){if(!(0|a[b>>0]))break b;if(!(d=d+-1|0))break;b=b+1|0}}}while(0);b=0}}while(0);return 0|b}function qc(a,b,c,d,e){a|=0,b|=0;var g=S,f=S=S+63&-64;if(S=S+256|0,(0|(d|=0))<(0|(c|=0))&0==(73728&(e|=0)|0)){if($c(0|f,b<<24>>24|0,0|((e=c-d|0)>>>0<256?e:256)),255<e>>>0){for(d=e;ic(a,f,256),255<(d=d+-256|0)>>>0;);e&=255}ic(a,f,e)}S=g}function rc(a,b){return b|=0,0|((a|=0)?0|sc(a,b):0)}function sc(b,d){b|=0,d|=0;do{if(b){if(d>>>0<128){a[b>>0]=d,b=1;break}if(!(0|c[1020])){if(57216==(-128&d|0)){a[b>>0]=d,b=1;break}c[1026]=25,b=-1;break}if(d>>>0<2048){a[b>>0]=d>>>6|192,a[b+1>>0]=63&d|128,b=2;break}if(d>>>0<55296|57344==(-8192&d|0)){a[b>>0]=d>>>12|224,a[b+1>>0]=d>>>6&63|128,a[b+2>>0]=63&d|128,b=3;break}if((d+-65536|0)>>>0<1048576){a[b>>0]=d>>>18|240,a[b+1>>0]=d>>>12&63|128,a[b+2>>0]=d>>>6&63|128,a[b+3>>0]=63&d|128,b=4;break}c[1026]=25,b=-1;break}}while(b=1,0);return 0|b}function tc(b,d,e){b|=0,d|=0;var i,f=0,g=0,h=0;(f=0|c[(g=16+(e|=0)|0)>>2])?h=5:0|function(b){var d=0,e=0|a[(d=74+(b|=0)|0)>>0];return a[d>>0]=255+e|e,0|(d=8&(d=0|c[b>>2])?(c[b>>2]=32|d,-1):(c[8+b>>2]=0,d=(c[4+b>>2]=0)|c[44+b>>2],c[28+b>>2]=d,c[20+b>>2]=d,c[16+b>>2]=d+(0|c[48+b>>2]),0))}(e)||(f=0|c[g>>2],h=5);a:do{if(5==(0|h)){if((f-(g=h=0|c[(i=e+20|0)>>2])|0)>>>0<d>>>0){X[3&c[e+36>>2]](e,b,d);break}b:do{if((0|a[e+75>>0])<0|0==(0|d))f=d;else{for(h=d;10!=(0|a[b+(f=h+-1|0)>>0]);){if(!f){f=d;break b}h=f}if((0|X[3&c[e+36>>2]](e,b,h))>>>0<h>>>0)break a;g=0|c[i>>2],f=d-h|0,b=b+h|0}}while(0);Zc(0|g,0|b,0|f),c[i>>2]=(0|c[i>>2])+f}}while(0)}function vc(a){g[h>>3]=a=+a,a=0|c[h>>2],y(0|c[h+4>>2])}function wc(a,b){b|=0;var e,f,d=0;switch(g[h>>3]=a=+a,f=0|Wc(0|(d=0|c[h>>2]),0|(e=0|c[h+4>>2]),52),z(),2047&f){case 0:d=0!=a?(a=+wc(0x10000000000000000*a,b),(0|c[b>>2])-64|0):0,c[b>>2]=d;break;case 2047:break;default:c[b>>2]=(2047&f)-1022,c[h>>2]=d,c[h+4>>2]=-2146435073&e|1071644672,a=+g[h>>3]}return+a}function yc(b){var g,c=0,e=0,f=0,c=0|a[(b|=0)>>0];a:do{if(c<<24>>24)for(e=b,f=4,b=1052;;){if(!(c<<24>>24==(g=0|a[b>>0])<<24>>24&0!=(0|(f=f+-1|0))&g<<24>>24!=0))break a;if(b=b+1|0,!((c=0|a[(e=e+1|0)>>0])<<24>>24)){c=0;break}}else c=0,b=1052}while(0);return(255&c)-(0|d[b>>0])|0}function Ac(a){var b;return 0|(0==(0|(b=0|pc(a|=0,64)))?64:b-a|0)}function Cc(a,b,d){b|=0,d|=0;var g,h,e=0,f=0,j=S,i=S=S+63&-64;S=S+240|0,c[i>>2]=a|=0;a:do{if(1<(0|b))for(f=e=a,a=1;;){if(-1<(0|oa(e,g=(f=f+-4|0)+(0-(0|c[d+((h=b+-2|0)<<2)>>2]))|0))&&-1<(0|oa(e,f)))break a;if(e=i+(a<<2)|0,a=a+1|0,(0|(b=-1<(0|oa(g,f))?(f=c[e>>2]=g,b+-1|0):(c[e>>2]=f,h)))<=1)break a;e=0|c[i>>2]}else a=1}while(0);Ic(i,a),S=j}function Dc(a,b){var d=0,e=0,f=4+(a|=0)|0;31<(b|=0)>>>0?(d=0|c[f>>2],c[a>>2]=d,b=b+-32|(e=c[f>>2]=0)):(d=0|c[a>>2],e=0|c[f>>2]),c[a>>2]=e<<32-b|(b?d>>>b:d),c[f>>2]=b?e>>>b:e}function Ec(a,b,d,e,f,g){a|=0,d|=0,e|=0,f|=0,g|=0;var j,k,h=0,i=0,m=S,l=S=S+63&-64;S=S+240|0,c[(k=232+l|0)>>2]=b|=0,c[(j=4+k|0)>>2]=d,c[l>>2]=a;a:do{if(1!=(0|b)|0!=(0|d)&&1<=(0|oa(h=a+(0-(0|c[g+(e<<2)>>2]))|0,a)))for(b=h,i=1,h=0==(0|f);;){if(h&1<(0|e)){if(-1<(0|oa(h=a+-4|0,b))){b=a,h=i,d=10;break a}if(-1<(0|oa(h+(0-(0|c[g+(e+-2<<2)>>2]))|0,b))){b=a,h=i,d=10;break a}}if(d=i+1|0,c[l+(i<<2)>>2]=b,Dc(k,f=0|Gc(k)),e=f+e|0,!(1!=(0|c[k>>2])|0!=(0|c[j>>2]))){h=d,d=10;break a}if((0|oa(h=b+(0-(0|c[g+(e<<2)>>2]))|0,0|c[l>>2]))<1){h=d,d=10;break}a=b,b=h,i=d,h=1}else d=9}while(0);9==(0|d)&&0==(0|f)&&(b=a,h=1,d=10),10==(0|d)&&(Ic(l,h),Cc(b,e,g)),S=m}function Fc(a,b){var d=0,e=0,f=4+(a|=0)|0;31<(b|=0)>>>0?(d=0|c[a>>2],c[f>>2]=d,b=b+-32|(e=c[a>>2]=0)):(d=0|c[f>>2],e=0|c[a>>2]),c[f>>2]=((f=32-b|0)?e>>>f:e)|d<<b,c[a>>2]=e<<b}function Gc(a){var b;return(b=0|Hc((0|c[(a|=0)>>2])-1|0))?0|b:0|(0==(0|(a=0|Hc(0|c[a+4>>2])))?0:a+32|0)}function Hc(a){var b=0;if(a|=0)if(1&a)b=0;else for(b=0;b=b+1|0,!(2&a);)a>>>=1;else b=32;return 0|b}function Ic(a,b){a|=0;var f,d=0,e=S,d=S=S+63&-64;if(S=S+256|0,2<=(0|(b|=0)))for(Zc(0|(c[a+(b<<2)>>2]=d),0|c[a>>2],4),d=0;Zc(0|c[(f=a+(d<<2)|0)>>2],0|c[a+((d=d+1|0)<<2)>>2],4),c[f>>2]=4+(0|c[f>>2]),(0|d)!=(0|b););S=e}function Jc(a){a|=0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=S,n=S=S+63&-64;S=S+16|0;do{if(a>>>0<245){if(m=0|c[1027],3&(d=(a=(k=a>>>0<11?16:a+11&-8)>>>3)?m>>>a:m)|0)return a=0|c[(b=8+(f=4148+((e=(1&d^1)+a|0)<<1<<2)|0)|0)>>2],(0|(d=0|c[(g=a+8|0)>>2]))==(0|f)?c[1027]=m&~(1<<e):(c[d+12>>2]=f,c[b>>2]=d),c[a+4>>2]=3|(v=e<<3),c[(v=a+v+4|0)>>2]=1|c[v>>2],S=w,0|g;if((l=0|c[1029])>>>0<k>>>0){if(0|d)return g=0|c[(b=8+(d=4148+((e=((a=(e=(i=(e=((e=d<<a&((e=2<<a)|0-e))&0-e)-1|0)>>>12&16)?e>>>i:e)>>>5&8)|i|(g=(e=a?e>>>a:e)>>>2&4)|(b=(e=g?e>>>g:e)>>>1&2)|(d=(e=b?e>>>b:e)>>>1&1))+(d?e>>>d:e)|0)<<1<<2)|0)|0)>>2],(0|(a=0|c[(i=g+8|0)>>2]))==(0|d)?c[1027]=a=m&~(1<<e):(c[a+12>>2]=d,c[b>>2]=a,a=m),h=(v=e<<3)-k|0,c[g+4>>2]=3|k,c[4+(f=g+k|0)>>2]=1|h,c[g+v>>2]=h,0|l&&(e=0|c[1032],d=4148+((b=l>>>3)<<1<<2)|0,a=a&(b=1<<b)?0|c[(b=a=d+8|0)>>2]:(c[1027]=a|b,b=d+8|0,d),c[b>>2]=e,c[a+12>>2]=e,c[e+8>>2]=a,c[e+12>>2]=d),c[1029]=h,c[1032]=f,S=w,0|i;if(g=0|c[1028]){for(j=0|c[4412+(((e=(j=(f=(j=(g&0-g)-1|0)>>>12&16)?j>>>f:j)>>>5&8)|f|(h=(j=e?j>>>e:j)>>>2&4)|(d=(j=h?j>>>h:j)>>>1&2)|(i=(j=d?j>>>d:j)>>>1&1))+(i?j>>>i:j)<<2)>>2],i=(-8&c[j+4>>2])-k|0,d=j;(a=0|c[d+16>>2])||(a=0|c[d+20>>2]);)i=(h=(d=(-8&c[a+4>>2])-k|0)>>>0<i>>>0)?d:i,d=a,j=h?a:j;if(j>>>0<(h=j+k|0)>>>0){f=0|c[j+24>>2],b=0|c[j+12>>2];do{if((0|b)==(0|j)){if(!(b=0|c[(a=j+20|0)>>2])&&!(b=0|c[(a=j+16|0)>>2])){d=0;break}for(;;)if(d=0|c[(e=b+20|0)>>2])b=d,a=e;else{if(!(d=0|c[(e=b+16|0)>>2]))break;b=d,a=e}c[a>>2]=0,d=b}else d=0|c[j+8>>2],c[d+12>>2]=b,c[b+8>>2]=d,d=b}while(0);do{if(0|f){if(b=0|c[j+28>>2],(0|j)==(0|c[(a=4412+(b<<2)|0)>>2])){if(!(c[a>>2]=d)){c[1028]=g&~(1<<b);break}}else if(!(c[((0|c[(v=f+16|0)>>2])==(0|j)?v:f+20|0)>>2]=d))break;c[d+24>>2]=f,0|(b=0|c[j+16>>2])&&(c[d+16>>2]=b,c[b+24>>2]=d),0|(b=0|c[j+20>>2])&&(c[d+20>>2]=b,c[b+24>>2]=d)}}while(0);return i>>>0<16?(c[j+4>>2]=3|(v=i+k|0),c[(v=j+v+4|0)>>2]=1|c[v>>2]):(c[j+4>>2]=3|k,c[h+4>>2]=1|i,c[h+i>>2]=i,0|l&&(e=0|c[1032],d=4148+((b=l>>>3)<<1<<2)|0,a=(b=1<<b)&m?0|c[(b=a=d+8|0)>>2]:(c[1027]=b|m,b=d+8|0,d),c[b>>2]=e,c[a+12>>2]=e,c[e+8>>2]=a,c[e+12>>2]=d),c[1029]=i,c[1032]=h),S=w,j+8|0}m=k}else m=k}else m=k}else if(a>>>0<=4294967231)if(k=-8&(a=a+11|0),e=0|c[1028]){d=0-k|0,j=(a>>>=8)?16777215<k>>>0?31:1&((r=7+(j=14-((i=(520192+(j=a<<(m=(a+1048320|0)>>>16&8))|0)>>>16&4)|m|(r=(245760+(j<<=i)|0)>>>16&2))+(j<<r>>>15)|0)|0)?k>>>r:k)|j<<1:0,a=0|c[4412+(j<<2)>>2];a:do{if(a)for(h=k<<(31==((f=0)|j)?0:25-(j>>>1)|0),i=a,a=0;;){if((g=(-8&c[i+4>>2])-k|0)>>>0<d>>>0){if(!g){d=0,a=f=i,r=65;break a}d=g,a=i}if(f=0==(0|(r=0|c[i+20>>2]))|(0|r)==(0|(i=0|c[i+16+(h>>>31<<2)>>2]))?f:r,!i){r=61;break}h<<=1}else a=f=0,r=61}while(0);if(61==(0|r)){if(0==(0|f)&0==(0|a)){if(!(a=((a=2<<j)|0-a)&e)){m=k;break}f=0|c[4412+(((h=(f=(i=(f=(a&0-a)-1|0)>>>12&16)?f>>>i:f)>>>5&8)|i|(j=(f=h?f>>>h:f)>>>2&4)|(m=(f=j?f>>>j:f)>>>1&2)|(a=(f=m?f>>>m:f)>>>1&1))+(a?f>>>a:f)<<2)>>2],a=0}f?r=65:(i=d,g=a)}if(65==(0|r))for(;;){if(d=(g=(m=(-8&c[f+4>>2])-k|0)>>>0<d>>>0)?m:d,g=g?f:a,!(a=(a=0|c[f+16>>2])||0|c[f+20>>2])){i=d;break}f=a,a=g}if(0!=(0|g)&&i>>>0<((0|c[1029])-k|0)>>>0&&g>>>0<(l=g+k|0)>>>0){h=0|c[g+24>>2],b=0|c[g+12>>2];do{if((0|b)==(0|g)){if(!(b=0|c[(a=g+20|0)>>2])&&!(b=0|c[(a=g+16|0)>>2])){b=0;break}for(;;)if(d=0|c[(f=b+20|0)>>2])b=d,a=f;else{if(!(d=0|c[(f=b+16|0)>>2]))break;b=d,a=f}c[a>>2]=0}else v=0|c[g+8>>2],c[v+12>>2]=b,c[b+8>>2]=v}while(0);do{if(h){if(a=0|c[g+28>>2],(0|g)==(0|c[(d=4412+(a<<2)|0)>>2])){if(!(c[d>>2]=b)){e&=~(1<<a),c[1028]=e;break}}else if(!(c[((0|c[(v=h+16|0)>>2])==(0|g)?v:h+20|0)>>2]=b))break;c[b+24>>2]=h,0|(a=0|c[g+16>>2])&&(c[b+16>>2]=a,c[a+24>>2]=b),(a=0|c[g+20>>2])&&(c[b+20>>2]=a,c[a+24>>2]=b)}}while(0);b:do{if(i>>>0<16)c[g+4>>2]=3|(v=i+k|0),c[(v=g+v+4|0)>>2]=1|c[v>>2];else{if(c[g+4>>2]=3|k,c[l+4>>2]=1|i,b=(c[l+i>>2]=i)>>>3,i>>>0<256){d=4148+(b<<1<<2)|0,a=(a=0|c[1027])&(b=1<<b)?0|c[(b=a=d+8|0)>>2]:(c[1027]=a|b,b=d+8|0,d),c[b>>2]=l,c[a+12>>2]=l,c[l+8>>2]=a,c[l+12>>2]=d;break}if(b=4412+((d=(b=i>>>8)?16777215<i>>>0?31:1&((v=7+(d=14-((t=(520192+(d=b<<(u=(b+1048320|0)>>>16&8))|0)>>>16&4)|u|(v=(245760+(d<<=t)|0)>>>16&2))+(d<<v>>>15)|0)|0)?i>>>v:i)|d<<1:0)<<2)|0,c[l+28>>2]=d,c[4+(a=l+16|0)>>2]=0,c[a>>2]=0,!(e&(a=1<<d))){c[1028]=e|a,c[b>>2]=l,c[l+24>>2]=b,c[l+12>>2]=l,c[l+8>>2]=l;break}b=0|c[b>>2];c:do{if((-8&c[b+4>>2]|0)!=(0|i)){for(e=i<<(31==(0|d)?0:25-(d>>>1)|0);a=0|c[(d=b+16+(e>>>31<<2)|0)>>2];){if((-8&c[a+4>>2]|0)==(0|i)){b=a;break c}e<<=1,b=a}c[d>>2]=l,c[l+24>>2]=b,c[l+12>>2]=l,c[l+8>>2]=l;break b}}while(0);v=0|c[(u=b+8|0)>>2],c[v+12>>2]=l,c[u>>2]=l,c[l+8>>2]=v,c[l+12>>2]=b,c[l+24>>2]=0}}while(0);return S=w,g+8|0}m=k}else m=k;else m=-1}while(0);if(m>>>0<=(d=0|c[1029])>>>0)return b=0|c[1032],15<(a=d-m|0)>>>0?(c[1032]=v=b+m|0,c[1029]=a,c[v+4>>2]=1|a,c[b+d>>2]=a,c[b+4>>2]=3|m):(c[1029]=0,c[1032]=0,c[b+4>>2]=3|d,c[(v=b+d+4|0)>>2]=1|c[v>>2]),S=w,b+8|0;if(m>>>0<(h=0|c[1030])>>>0)return c[1030]=t=h-m|0,v=0|c[1033],c[1033]=u=v+m|0,c[u+4>>2]=1|t,c[v+4>>2]=3|m,S=w,v+8|0;if(i=m+48|0,(k=(g=(a=0|c[1145]?0|c[1147]:(c[1147]=4096,c[1146]=4096,c[1148]=-1,c[1149]=-1,c[1150]=0,c[1138]=0,c[1145]=-16&n^1431655768,4096))+(j=m+47|0)|0)&(e=0-a|0))>>>0<=m>>>0)return S=w,(v=0)|v;if(0|(a=0|c[1137])&&(n=(l=0|c[1135])+k|0)>>>0<=l>>>0|a>>>0<n>>>0)return S=w,(v=0)|v;d:do{if(4&c[1138])b=0,r=143;else{d=0|c[1033];e:do{if(d){for(f=4556;!((a=0|c[f>>2])>>>0<=d>>>0&&(a+(0|c[(q=f+4|0)>>2])|0)>>>0>d>>>0);){if(!(a=0|c[f+8>>2])){r=128;break e}f=a}if((b=g-h&e)>>>0<2147483647)if((0|(a=0|Oc(b)))==((0|c[f>>2])+(0|c[q>>2])|0)){if(-1!=(0|a)){h=a,g=b,r=145;break d}}else e=a,r=136;else b=0}else r=128}while(0);do{if(128==(0|r))if(-1!=(0|(d=0|Oc(0)))&&(b=d,p=(b=(0==((p=(o=0|c[1146])-1|0)&b|0)?0:(p+b&0-o)-b|0)+k|0)+(o=0|c[1135])|0,m>>>0<b>>>0&b>>>0<2147483647)){if(0|(q=0|c[1137])&&p>>>0<=o>>>0|q>>>0<p>>>0){b=0;break}if((0|(a=0|Oc(b)))==(0|d)){h=d,g=b,r=145;break d}e=a,r=136}else b=0}while(0);do{if(136==(0|r)){if(d=0-b|0,!(b>>>0<i>>>0&b>>>0<2147483647&-1!=(0|e))){if(-1==(0|e)){b=0;break}h=e,g=b,r=145;break d}if(2147483647<=(a=j-b+(a=0|c[1147])&0-a)>>>0){h=e,g=b,r=145;break d}if(-1==(0|Oc(a))){Oc(d),b=0;break}h=e,g=a+b|0,r=145;break d}}while(0);c[1138]=4|c[1138],r=143}}while(0);if(143==(0|r)&&k>>>0<2147483647&&!(-1==(0|(s=0|Oc(k)))|1^(t=(m+40|0)>>>0<(u=(q=0|Oc(0))-s|0)>>>0)|s>>>0<q>>>0&-1!=(0|s)&-1!=(0|q)^1)&&(h=s,g=t?u:b,r=145),145==(0|r)){b=(0|c[1135])+g|0,(c[1135]=b)>>>0>(0|c[1136])>>>0&&(c[1136]=b),j=0|c[1033];f:do{if(j){for(f=4556;;){if((0|h)==((b=0|c[f>>2])+(a=0|c[(e=f+4|0)>>2])|0)){r=154;break}if(!(d=0|c[f+8>>2]))break;f=d}if(154==(0|r)&&0==(8&c[f+12>>2]|0)&&j>>>0<h>>>0&b>>>0<=j>>>0){c[e>>2]=a+g,u=j+(t=0==(7&(t=j+8|0)|0)?0:0-t&7)|0,t=(v=(0|c[1030])+g|0)-t|0,c[1033]=u,c[1030]=t,c[u+4>>2]=1|t,c[j+v+4>>2]=40,c[1034]=c[1149];break}for(h>>>0<(0|c[1031])>>>0&&(c[1031]=h),d=h+g|0,a=4556;;){if((0|c[a>>2])==(0|d)){r=162;break}if(!(b=0|c[a+8>>2]))break;a=b}if(162==(0|r)&&0==(8&c[a+12>>2]|0)){c[a>>2]=h,c[(l=a+4|0)>>2]=(0|c[l>>2])+g,k=(l=h+(0==(7&(l=h+8|0)|0)?0:0-l&7)|0)+m|0,i=(b=d+(0==(7&(b=d+8|0)|0)?0:0-b&7)|0)-l-m|0,c[l+4>>2]=3|m;g:do{if((0|j)==(0|b))v=(0|c[1030])+i|0,c[1030]=v,c[1033]=k,c[k+4>>2]=1|v;else{if((0|c[1032])==(0|b)){v=(0|c[1029])+i|0,c[1029]=v,c[1032]=k,c[k+4>>2]=1|v,c[k+v>>2]=v;break}if(1==(3&(a=0|c[b+4>>2])|0)){h=-8&a,e=a>>>3;h:do{if(a>>>0<256){if(a=0|c[b+8>>2],(0|(d=0|c[b+12>>2]))==(0|a)){c[1027]=c[1027]&~(1<<e);break}c[a+12>>2]=d,c[d+8>>2]=a;break}g=0|c[b+24>>2],a=0|c[b+12>>2];do{if((0|a)==(0|b)){if(!(a=0|c[(d=4+(e=b+16|0)|0)>>2])){if(!(a=0|c[e>>2])){a=0;break}d=e}for(;;)if(e=0|c[(f=a+20|0)>>2])a=e,d=f;else{if(!(e=0|c[(f=a+16|0)>>2]))break;a=e,d=f}c[d>>2]=0}else v=0|c[b+8>>2],c[v+12>>2]=a,c[a+8>>2]=v}while(0);if(!g)break;e=4412+((d=0|c[b+28>>2])<<2)|0;do{if((0|c[e>>2])==(0|b)){if(0|(c[e>>2]=a))break;c[1028]=c[1028]&~(1<<d);break h}if(!(c[((0|c[(v=g+16|0)>>2])==(0|b)?v:g+20|0)>>2]=a))break h}while(0)}while(c[a+24>>2]=g,0|(d=0|c[(e=b+16|0)>>2])&&(c[a+16>>2]=d,c[d+24>>2]=a),(d=0|c[e+4>>2])&&(c[a+20>>2]=d,c[d+24>>2]=a,0));b=b+h|0,f=h+i|0}else f=i;if(c[(b=b+4|0)>>2]=-2&c[b>>2],c[k+4>>2]=1|f,b=(c[k+f>>2]=f)>>>3,f>>>0<256){d=4148+(b<<1<<2)|0,a=(a=0|c[1027])&(b=1<<b)?0|c[(b=a=d+8|0)>>2]:(c[1027]=a|b,b=d+8|0,d),c[b>>2]=k,c[a+12>>2]=k,c[k+8>>2]=a,c[k+12>>2]=d;break}b=f>>>8;do{if(b){if(16777215<f>>>0){e=31;break}e=1&((v=7+(e=14-((t=(520192+(e=b<<(u=(b+1048320|0)>>>16&8))|0)>>>16&4)|u|(v=(245760+(e<<=t)|0)>>>16&2))+(e<<v>>>15)|0)|0)?f>>>v:f)|e<<1}else e=0}while(0);if(a=4412+(e<<2)|0,c[k+28>>2]=e,c[4+(b=k+16|0)>>2]=0,!((b=(c[b>>2]=0)|c[1028])&(d=1<<e))){c[1028]=b|d,c[a>>2]=k,c[k+24>>2]=a,c[k+12>>2]=k,c[k+8>>2]=k;break}b=0|c[a>>2];i:do{if((-8&c[b+4>>2]|0)!=(0|f)){for(e=f<<(31==(0|e)?0:25-(e>>>1)|0);a=0|c[(d=b+16+(e>>>31<<2)|0)>>2];){if((-8&c[a+4>>2]|0)==(0|f)){b=a;break i}e<<=1,b=a}c[d>>2]=k,c[k+24>>2]=b,c[k+12>>2]=k,c[k+8>>2]=k;break g}}while(0);v=0|c[(u=b+8|0)>>2],c[v+12>>2]=k,c[u>>2]=k,c[k+8>>2]=v,c[k+12>>2]=b,c[k+24>>2]=0}}while(0);return S=w,l+8|0}for(a=4556;!((b=0|c[a>>2])>>>0<=j>>>0&&j>>>0<(v=b+(0|c[a+4>>2])|0)>>>0);)a=0|c[a+8>>2];for(b=(a=(a=(f=v+-47|0)+(0==(7&(a=f+8|0)|0)?0:0-a&7)|0)>>>0<(f=j+16|0)>>>0?j:a)+8|0,u=h+(t=0==(7&(t=h+8|0)|0)?0:0-t&7)|0,t=(d=g+-40|0)-t|0,c[1033]=u,c[1030]=t,c[u+4>>2]=1|t,c[h+d+4>>2]=40,c[1034]=c[1149],c[(d=a+4|0)>>2]=27,c[b>>2]=c[1139],c[b+4>>2]=c[1140],c[b+8>>2]=c[1141],c[b+12>>2]=c[1142],c[1139]=h,c[1140]=g,c[1142]=0,c[1141]=b,b=a+24|0;c[(b=(u=b)+4|0)>>2]=7,(u+8|0)>>>0<v>>>0;);if((0|a)!=(0|j)){if(g=a-j|0,c[d>>2]=-2&c[d>>2],c[j+4>>2]=1|g,b=(c[a>>2]=g)>>>3,g>>>0<256){d=4148+(b<<1<<2)|0,a=(a=0|c[1027])&(b=1<<b)?0|c[(b=a=d+8|0)>>2]:(c[1027]=a|b,b=d+8|0,d),c[b>>2]=j,c[a+12>>2]=j,c[j+8>>2]=a,c[j+12>>2]=d;break}if(d=4412+((e=(b=g>>>8)?16777215<g>>>0?31:1&((v=7+(e=14-((t=(520192+(e=b<<(u=(b+1048320|0)>>>16&8))|0)>>>16&4)|u|(v=(245760+(e<<=t)|0)>>>16&2))+(e<<v>>>15)|0)|0)?g>>>v:g)|e<<1:0)<<2)|0,c[j+28>>2]=e,c[j+20>>2]=0,!((b=(c[f>>2]=0)|c[1028])&(a=1<<e))){c[1028]=b|a,c[d>>2]=j,c[j+24>>2]=d,c[j+12>>2]=j,c[j+8>>2]=j;break}b=0|c[d>>2];j:do{if((-8&c[b+4>>2]|0)!=(0|g)){for(e=g<<(31==(0|e)?0:25-(e>>>1)|0);a=0|c[(d=b+16+(e>>>31<<2)|0)>>2];){if((-8&c[a+4>>2]|0)==(0|g)){b=a;break j}e<<=1,b=a}c[d>>2]=j,c[j+24>>2]=b,c[j+12>>2]=j,c[j+8>>2]=j;break f}}while(0);v=0|c[(u=b+8|0)>>2],c[v+12>>2]=j,c[u>>2]=j,c[j+8>>2]=v,c[j+12>>2]=b,c[j+24>>2]=0}}else 0==(0|(v=0|c[1031]))|h>>>0<v>>>0&&(c[1031]=h),c[1139]=h,c[1140]=g,c[1142]=0,c[1036]=c[1145],c[1035]=-1,c[1040]=4148,c[1039]=4148,c[1042]=4156,c[1041]=4156,c[1044]=4164,c[1043]=4164,c[1046]=4172,c[1045]=4172,c[1048]=4180,c[1047]=4180,c[1050]=4188,c[1049]=4188,c[1052]=4196,c[1051]=4196,c[1054]=4204,c[1053]=4204,c[1056]=4212,c[1055]=4212,c[1058]=4220,c[1057]=4220,c[1060]=4228,c[1059]=4228,c[1062]=4236,c[1061]=4236,c[1064]=4244,c[1063]=4244,c[1066]=4252,c[1065]=4252,c[1068]=4260,c[1067]=4260,c[1070]=4268,c[1069]=4268,c[1072]=4276,c[1071]=4276,c[1074]=4284,c[1073]=4284,c[1076]=4292,c[1075]=4292,c[1078]=4300,c[1077]=4300,c[1080]=4308,c[1079]=4308,c[1082]=4316,c[1081]=4316,c[1084]=4324,c[1083]=4324,c[1086]=4332,c[1085]=4332,c[1088]=4340,c[1087]=4340,c[1090]=4348,c[1089]=4348,c[1092]=4356,c[1091]=4356,c[1094]=4364,c[1093]=4364,c[1096]=4372,c[1095]=4372,c[1098]=4380,c[1097]=4380,c[1100]=4388,c[1099]=4388,c[1102]=4396,c[1101]=4396,u=h+(t=0==(7&(t=h+8|0)|0)?0:0-t&7)|0,t=(v=g+-40|0)-t|0,c[1033]=u,c[1030]=t,c[u+4>>2]=1|t,c[h+v+4>>2]=40,c[1034]=c[1149]}while(0);if(m>>>0<(b=0|c[1030])>>>0)return c[1030]=t=b-m|0,v=0|c[1033],c[1033]=u=v+m|0,c[u+4>>2]=1|t,c[v+4>>2]=3|m,S=w,v+8|0}return c[1026]=48,S=w,(v=0)|v}function Kc(a){var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0;if(a|=0){e=0|c[1031],k=(d=a+-8|0)+(b=-8&(a=0|c[a+-4>>2]))|0;do{if(1&a)j=i=d;else{if(f=0|c[d>>2],!(3&a))return;if(h=f+b|0,(g=d+(0-f)|0)>>>0<e>>>0)return;if((0|c[1032])==(0|g)){if(3==(3&(a=0|c[(b=k+4|0)>>2])|0))return c[1029]=h,c[b>>2]=-2&a,c[g+4>>2]=1|h,void(c[g+h>>2]=h);j=i=g,b=h;break}if(d=f>>>3,f>>>0<256){if(a=0|c[g+8>>2],(0|(b=0|c[g+12>>2]))==(0|a)){c[1027]=c[1027]&~(1<<d),j=i=g,b=h;break}c[a+12>>2]=b,c[b+8>>2]=a,j=i=g,b=h;break}f=0|c[g+24>>2],a=0|c[g+12>>2];do{if((0|a)==(0|g)){if(!(a=0|c[(b=4+(d=g+16|0)|0)>>2])){if(!(a=0|c[d>>2])){d=0;break}b=d}for(;;)if(d=0|c[(e=a+20|0)>>2])a=d,b=e;else{if(!(d=0|c[(e=a+16|0)>>2]))break;a=d,b=e}c[b>>2]=0,d=a}else d=0|c[g+8>>2],c[d+12>>2]=a,c[a+8>>2]=d,d=a}while(0);if(f){if(a=0|c[g+28>>2],(0|c[(b=4412+(a<<2)|0)>>2])==(0|g)){if(!(c[b>>2]=d)){c[1028]=c[1028]&~(1<<a),j=i=g,b=h;break}}else if(!(c[((0|c[(j=f+16|0)>>2])==(0|g)?j:f+20|0)>>2]=d)){j=i=g,b=h;break}c[d+24>>2]=f,0|(a=0|c[(b=g+16|0)>>2])&&(c[d+16>>2]=a,c[a+24>>2]=d),(a=0|c[b+4>>2])&&(c[d+20>>2]=a,c[a+24>>2]=d),j=i=g,b=h}else j=i=g,b=h}}while(0);if(!(k>>>0<=i>>>0)&&1&(d=0|c[(a=k+4|0)>>2])){if(2&d)c[a>>2]=-2&d,c[j+4>>2]=1|b,f=c[i+b>>2]=b;else{if((0|c[1033])==(0|k))return k=(0|c[1030])+b|0,c[1030]=k,c[1033]=j,c[j+4>>2]=1|k,void((0|j)==(0|c[1032])&&(c[1032]=0,c[1029]=0));if((0|c[1032])==(0|k))return k=(0|c[1029])+b|0,c[1029]=k,c[1032]=i,c[j+4>>2]=1|k,void(c[i+k>>2]=k);f=(-8&d)+b|0,e=d>>>3;do{if(d>>>0<256){if(b=0|c[k+8>>2],(0|(a=0|c[k+12>>2]))==(0|b)){c[1027]=c[1027]&~(1<<e);break}c[b+12>>2]=a,c[a+8>>2]=b;break}g=0|c[k+24>>2],a=0|c[k+12>>2];do{if((0|a)==(0|k)){if(!(a=0|c[(b=4+(d=k+16|0)|0)>>2])){if(!(a=0|c[d>>2])){d=0;break}b=d}for(;;)if(d=0|c[(e=a+20|0)>>2])a=d,b=e;else{if(!(d=0|c[(e=a+16|0)>>2]))break;a=d,b=e}c[b>>2]=0,d=a}else d=0|c[k+8>>2],c[d+12>>2]=a,c[a+8>>2]=d,d=a}while(0);if(0|g){if(a=0|c[k+28>>2],(0|c[(b=4412+(a<<2)|0)>>2])==(0|k)){if(!(c[b>>2]=d)){c[1028]=c[1028]&~(1<<a);break}}else if(!(c[((0|c[(h=g+16|0)>>2])==(0|k)?h:g+20|0)>>2]=d))break;c[d+24>>2]=g,0|(a=0|c[(b=k+16|0)>>2])&&(c[d+16>>2]=a,c[a+24>>2]=d),0|(a=0|c[b+4>>2])&&(c[d+20>>2]=a,c[a+24>>2]=d)}}while(0);if(c[j+4>>2]=1|f,c[i+f>>2]=f,(0|j)==(0|c[1032]))return void(c[1029]=f)}if(a=f>>>3,f>>>0<256)return d=4148+(a<<1<<2)|0,b=(b=0|c[1027])&(a=1<<a)?0|c[(a=b=d+8|0)>>2]:(c[1027]=b|a,a=d+8|0,d),c[a>>2]=j,c[b+12>>2]=j,c[j+8>>2]=b,void(c[j+12>>2]=d);b=4412+((e=(a=f>>>8)?16777215<f>>>0?31:1&((k=7+(e=14-((h=(520192+(e=a<<(i=(a+1048320|0)>>>16&8))|0)>>>16&4)|i|(k=(245760+(e<<=h)|0)>>>16&2))+(e<<k>>>15)|0)|0)?f>>>k:f)|e<<1:0)<<2)|0,c[j+28>>2]=e,c[j+20>>2]=0,a=(c[j+16>>2]=0)|c[1028],d=1<<e;a:do{if(a&d){a=0|c[b>>2];b:do{if((-8&c[a+4>>2]|0)!=(0|f)){for(e=f<<(31==(0|e)?0:25-(e>>>1)|0);b=0|c[(d=a+16+(e>>>31<<2)|0)>>2];){if((-8&c[b+4>>2]|0)==(0|f)){a=b;break b}e<<=1,a=b}c[d>>2]=j,c[j+24>>2]=a,c[j+12>>2]=j,c[j+8>>2]=j;break a}}while(0);k=0|c[(i=a+8|0)>>2],c[k+12>>2]=j,c[i>>2]=j,c[j+8>>2]=k,c[j+12>>2]=a,c[j+24>>2]=0}else c[1028]=a|d,c[b>>2]=j,c[j+24>>2]=b,c[j+12>>2]=j,c[j+8>>2]=j}while(0);if(k=(0|c[1035])-1|0,!(0|(c[1035]=k))){for(a=4564;a=0|c[a>>2];)a=a+8|0;c[1035]=-1}}}}function Lc(a,b){var d=0,e=0,f=0,g=0,h=0,i=0,j=0,j=(a|=0)+(b|=0)|0,d=0|c[a+4>>2];do{if(1&d)i=a,a=b;else{if(e=0|c[a>>2],!(3&d))return;if(h=e+b|0,(0|c[1032])==(0|(g=a+(0-e)|0))){if(3==(3&(d=0|c[(a=j+4|0)>>2])|0))return c[1029]=h,c[a>>2]=-2&d,c[g+4>>2]=1|h,c[j>>2]=h;i=g,a=h;break}if(b=e>>>3,e>>>0<256){if(d=0|c[g+8>>2],(0|(a=0|c[g+12>>2]))==(0|d)){c[1027]=c[1027]&~(1<<b),i=g,a=h;break}c[d+12>>2]=a,c[a+8>>2]=d,i=g,a=h;break}f=0|c[g+24>>2],d=0|c[g+12>>2];do{if((0|d)==(0|g)){if(!(d=0|c[(a=4+(b=g+16|0)|0)>>2])){if(!(d=0|c[b>>2])){b=0;break}a=b}for(;;)if(b=0|c[(e=d+20|0)>>2])d=b,a=e;else{if(!(b=0|c[(e=d+16|0)>>2]))break;d=b,a=e}c[a>>2]=0,b=d}else b=0|c[g+8>>2],c[b+12>>2]=d,c[d+8>>2]=b,b=d}while(0);if(f){if(d=0|c[g+28>>2],(0|c[(a=4412+(d<<2)|0)>>2])==(0|g)){if(!(c[a>>2]=b)){c[1028]=c[1028]&~(1<<d),i=g,a=h;break}}else if(!(c[((0|c[(i=f+16|0)>>2])==(0|g)?i:f+20|0)>>2]=b)){i=g,a=h;break}c[b+24>>2]=f,0|(d=0|c[(a=g+16|0)>>2])&&(c[b+16>>2]=d,c[d+24>>2]=b),(d=0|c[a+4>>2])&&(c[b+20>>2]=d,c[d+24>>2]=b),i=g,a=h}else i=g,a=h}}while(0);if(2&(b=0|c[(d=j+4|0)>>2]))c[d>>2]=-2&b,c[i+4>>2]=1|a,c[i+a>>2]=a;else{if((0|c[1033])==(0|j))return j=(0|c[1030])+a|0,c[1030]=j,c[1033]=i,c[i+4>>2]=1|j,(0|i)==(0|c[1032])&&(c[1032]=0,c[1029]=0);if((0|c[1032])==(0|j))return j=(0|c[1029])+a|0,c[1029]=j,c[1032]=i,c[i+4>>2]=1|j,c[i+j>>2]=j;g=(-8&b)+a|0,e=b>>>3;do{if(b>>>0<256){if(a=0|c[j+8>>2],(0|(d=0|c[j+12>>2]))==(0|a)){c[1027]=c[1027]&~(1<<e);break}c[a+12>>2]=d,c[d+8>>2]=a;break}f=0|c[j+24>>2],d=0|c[j+12>>2];do{if((0|d)==(0|j)){if(!(d=0|c[(a=4+(b=j+16|0)|0)>>2])){if(!(d=0|c[b>>2])){b=0;break}a=b}for(;;)if(b=0|c[(e=d+20|0)>>2])d=b,a=e;else{if(!(b=0|c[(e=d+16|0)>>2]))break;d=b,a=e}c[a>>2]=0,b=d}else b=0|c[j+8>>2],c[b+12>>2]=d,c[d+8>>2]=b,b=d}while(0);if(0|f){if(d=0|c[j+28>>2],(0|c[(a=4412+(d<<2)|0)>>2])==(0|j)){if(!(c[a>>2]=b)){c[1028]=c[1028]&~(1<<d);break}}else if(!(c[((0|c[(h=f+16|0)>>2])==(0|j)?h:f+20|0)>>2]=b))break;c[b+24>>2]=f,0|(d=0|c[(a=j+16|0)>>2])&&(c[b+16>>2]=d,c[d+24>>2]=b),0|(d=0|c[a+4>>2])&&(c[b+20>>2]=d,c[d+24>>2]=b)}}while(0);if(c[i+4>>2]=1|g,c[i+g>>2]=g,(0|i)==(0|c[1032]))return c[1029]=g;a=g}if(d=a>>>3,a>>>0<256)return b=4148+(d<<1<<2)|0,a=(a=0|c[1027])&(d=1<<d)?0|c[(d=a=b+8|0)>>2]:(c[1027]=a|d,d=b+8|0,b),c[d>>2]=i,c[a+12>>2]=i,c[i+8>>2]=a,c[i+12>>2]=b;if(b=4412+((f=(d=a>>>8)?16777215<a>>>0?31:1&((j=7+(f=14-((g=(520192+(f=d<<(h=(d+1048320|0)>>>16&8))|0)>>>16&4)|h|(j=(245760+(f<<=g)|0)>>>16&2))+(f<<j>>>15)|0)|0)?a>>>j:a)|f<<1:0)<<2)|0,c[i+28>>2]=f,c[i+20>>2]=0,!((d=(c[i+16>>2]=0)|c[1028])&(e=1<<f)))return c[1028]=d|e,c[b>>2]=i,c[i+24>>2]=b,c[i+12>>2]=i,c[i+8>>2]=i;d=0|c[b>>2];a:do{if((-8&c[d+4>>2]|0)!=(0|a)){for(f=a<<(31==(0|f)?0:25-(f>>>1)|0);b=0|c[(e=d+16+(f>>>31<<2)|0)>>2];){if((-8&c[b+4>>2]|0)==(0|a)){d=b;break a}f<<=1,d=b}return c[e>>2]=i,c[i+24>>2]=d,c[i+12>>2]=i,c[i+8>>2]=i}}while(0);j=0|c[(h=d+8|0)>>2],c[j+12>>2]=i,c[h>>2]=i,c[i+8>>2]=j,c[i+12>>2]=d,c[i+24>>2]=0}function Nc(a,b,d){var e;return a|=0,0!=(3&(b|=0)|0)|0==(0|(e=b>>>2))||1073741823+e&e|0?28:(-64-b|0)>>>0<(d|=0)>>>0||!(b=0|function(a,b){b|=0;var g,d=0,e=0,f=0,h=0,i=0;if((d=16<(a|=0)>>>0?a:16)+-1&d)for(a=16;a>>>0<d>>>0;)a<<=1;else a=d;if((-64-a|0)>>>0<=b>>>0)return c[1026]=48,(h=0)|h;if(!(d=0|Jc(12+(g=b>>>0<11?16:b+11&-8)+a|0)))return(h=0)|h;f=d+-8|0;do{if(a+-1&d){if(e=15<((e=(d+a+-1&0-a)-8|0)-(b=f)|0)>>>0?e:e+a|0,d=(-8&(i=0|c[(a=d+-4|0)>>2]))-(b=e-b|0)|0,3&i){c[(i=e+4|0)>>2]=d|1&c[i>>2]|2,c[(d=e+d+4|0)>>2]=1|c[d>>2],c[a>>2]=b|1&c[a>>2]|2,c[i>>2]=1|c[i>>2],Lc(f,b),a=b=e;break}c[e>>2]=(0|c[f>>2])+b,c[e+4>>2]=d,a=b=e;break}}while(a=b=f,0);return 3&(a=0|c[(d=a+4|0)>>2])|0&&(16+g|0)>>>0<(h=-8&a)>>>0&&(i=h-g|0,f=b+g|0,c[d>>2]=g|1&a|2,c[f+4>>2]=3|i,c[(h=b+h+4|0)>>2]=1|c[h>>2],Lc(f,i)),b+8|0}(16<b>>>0?b:16,d))?48:(c[a>>2]=b,(a=0)|a)}function Oc(a){var b,d=0;return(a=(b=0|c[(d=4624)>>2])+(0|a)|0)>>>0>(0|H())>>>0&&0==(0|J(0|a))?(c[1026]=48,-1):(c[d>>2]=a,0|b)}function Qc(a,b,c,d){b|=0,d|=0;var e,f;return c=0|function(a,b){var f,e,c,d;return a=((c=0|v(e=65535&(b|=0),f=65535&(a|=0)))>>>16)+(0|v(e,d=a>>>16))|0,b=0|v(e=b>>>16,f),0|(y((a>>>16)+(0|v(e,d))+(((65535&a)+b|0)>>>16)|0),a+b<<16|65535&c|0)}(e=a|=0,f=c|=0),a=0|z(),0|(y((0|v(b,f))+(0|v(d,e))+a|0&a|0),0|c)}function Rc(a,b,c,d){return 0|(y((b|=0)+(d|=0)+((c=(a|=0)+(0|c)>>>0)>>>0<a>>>0|0)>>>0|0),0|c)}function Sc(a,b,c,d){return 0|(y(0|(d=(b|=0)-(d|=0)-((a|=0)>>>0<(c|=0)>>>0|0)>>>0)),a-c>>>0|0)}function Tc(a){return 0|((a|=0)?31-(0|w(a^a-1))|0:32)}function Uc(a,b,d,e,f){f|=0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,l=a|=0,h=d|=0,i=n=e|=0;if(!(k=j=b|=0))return g=0!=(0|f),i?(g&&(c[f>>2]=0|a,c[f+4>>2]=0&b),(f=n=0)|(y(0|n),f)):(g&&(c[f>>2]=(l>>>0)%(h>>>0),c[f+4>>2]=0),f=(l>>>(n=0))/(h>>>0)>>>0,0|(y(0|n),f));g=0==(0|i);do{if(h){if(!g){if((g=(0|w(0|i))-(0|w(0|k))|0)>>>0<=31){a=l>>>((h=m=g+1|0)>>>0)&(b=g-31>>31)|k<<(i=31-g|0),b&=k>>>(m>>>0),g=0,i=l<<i;break}return f&&(c[f>>2]=0|a,c[f+4>>2]=j|0&b),(f=n=0)|(y(0|n),f)}if((g=h-1|0)&h|0){a=(m=32-(i=33+(0|w(0|h))-(0|w(0|k))|0)|0)-1>>31&k>>>((o=i-32|0)>>>0)|(k<<m|l>>>((h=i)>>>0))&(b=o>>31),b&=k>>>(i>>>0),g=l<<(p=64-i|0)&(j=m>>31),i=(k<<p|l>>>(o>>>0))&j|l<<m&i-33>>31;break}return 0|f&&(c[f>>2]=g&l,c[f+4>>2]=0),1==(0|h)?(p=0|a,0|(y(0|(o=j|0&b)),p)):(o=k>>>((p=0|Tc(0|h))>>>0)|0,p=k<<32-p|l>>>(p>>>0)|0,0|(y(0|o),p))}if(g)return 0|f&&(c[f>>2]=(k>>>0)%(h>>>0),c[f+4>>2]=0),p=(k>>>(o=0))/(h>>>0)>>>0,0|(y(0|o),p);if(!l)return 0|f&&(c[f>>2]=0,c[f+4>>2]=(k>>>0)%(i>>>0)),p=(k>>>(o=0))/(i>>>0)>>>0,0|(y(0|o),p);if(!((g=i-1|0)&i))return 0|f&&(c[f>>2]=0|a,c[f+4>>2]=g&k|0&b),p=k>>>(((o=0)|Tc(0|i))>>>0),0|(y(0|o),p);if((g=(0|w(0|i))-(0|w(0|k))|0)>>>0<=30){a=k<<(i=31-g|0)|l>>>((h=b=g+1|0)>>>0),b=k>>>(b>>>0),g=0,i=l<<i;break}return f&&(c[f>>2]=0|a,c[f+4>>2]=j|0&b),(p=o=0)|(y(0|o),p)}while(0);if(h){for(k=0|Rc(0|(m=0|d),0|(l=n|0&e),-1,-1),d=0|z(),j=i,i=0;j=g>>>31|(e=j)<<1,g=i|g<<1,Sc(0|k,0|d,0|(e=a<<1|e>>>31|0),0|(n=a>>>31|b<<1|0)),i=1&(o=(p=0|z())>>31|((0|p)<0?-1:0)<<1),a=0|Sc(0|e,0|n,o&m|0,(((0|p)<0?-1:0)>>31|((0|p)<0?-1:0)<<1)&l|0),b=0|z(),0!=(0|(h=h-1|0)););k=j,j=0}else k=i,i=j=0;return(h=0)|f&&(c[f>>2]=a,c[f+4>>2]=b),p=-2&(g<<1|0)|i,0|(y(0|(o=(0|g)>>>31|(k|h)<<1|0&(h<<1|g>>>31)|j)),p)}function Vc(a,b,c,d){return 0|Uc(a|=0,b|=0,c|=0,d|=0,0)}function Wc(a,b,c){return a|=0,b|=0,(0|(c|=0))<32?(y(b>>>c|0),a>>>c|(b&(1<<c)-1)<<32-c):(y(0),b>>>c-32|0)}function Xc(a,b,c){return a|=0,b|=0,(0|(c|=0))<32?(y(b<<c|(a&(1<<c)-1<<32-c)>>>32-c|0),a<<c):(y(a<<c-32|0),0)}function Zc(b,d,e){var f,g,h;if(b|=0,d|=0,8192<=(0|(e|=0)))return I(0|b,0|d,0|e),0|b;if(h=0|b,g=b+e|0,(3&b)==(3&d)){for(;3&b;){if(!e)return 0|h;a[b>>0]=0|a[d>>0],b=b+1|0,d=d+1|0,e=e-1|0}for(f=(e=-4&g|0)-64|0;(0|b)<=(0|f);)c[b>>2]=c[d>>2],c[b+4>>2]=c[d+4>>2],c[b+8>>2]=c[d+8>>2],c[b+12>>2]=c[d+12>>2],c[b+16>>2]=c[d+16>>2],c[b+20>>2]=c[d+20>>2],c[b+24>>2]=c[d+24>>2],c[b+28>>2]=c[d+28>>2],c[b+32>>2]=c[d+32>>2],c[b+36>>2]=c[d+36>>2],c[b+40>>2]=c[d+40>>2],c[b+44>>2]=c[d+44>>2],c[b+48>>2]=c[d+48>>2],c[b+52>>2]=c[d+52>>2],c[b+56>>2]=c[d+56>>2],c[b+60>>2]=c[d+60>>2],b=b+64|0,d=d+64|0;for(;(0|b)<(0|e);)c[b>>2]=c[d>>2],b=b+4|0,d=d+4|0}else for(e=g-4|0;(0|b)<(0|e);)a[b>>0]=0|a[d>>0],a[b+1>>0]=0|a[d+1>>0],a[b+2>>0]=0|a[d+2>>0],a[b+3>>0]=0|a[d+3>>0],b=b+4|0,d=d+4|0;for(;(0|b)<(0|g);)a[b>>0]=0|a[d>>0],b=b+1|0,d=d+1|0;return 0|h}function _c(b,c,d){var e;if((0|(c|=0))<(0|(b|=0))&(0|b)<(c+(d|=0)|0)){for(c=c+d|0,b=(e=b)+d|0;0<(0|d);)d=d-1|0,a[(b=b-1|0)>>0]=0|a[(c=c-1|0)>>0];b=e}else Zc(b,c,d);return 0|b}function $c(b,d,e){var f,g,i,h=(b|=0)+(e|=0)|0;if(d=255&(0|d),67<=(0|e)){for(;3&b;)a[b>>0]=d,b=b+1|0;for(i=d|d<<8|d<<16|d<<24,g=(f=-4&h|0)-64|0;(0|b)<=(0|g);)c[b>>2]=i,c[b+4>>2]=i,c[b+8>>2]=i,c[b+12>>2]=i,c[b+16>>2]=i,c[b+20>>2]=i,c[b+24>>2]=i,c[b+28>>2]=i,c[b+32>>2]=i,c[b+36>>2]=i,c[b+40>>2]=i,c[b+44>>2]=i,c[b+48>>2]=i,c[b+52>>2]=i,c[b+56>>2]=i,c[b+60>>2]=i,b=b+64|0;for(;(0|b)<(0|f);)c[b>>2]=i,b=b+4|0}for(;(0|b)<(0|h);)a[b>>0]=d,b=b+1|0;return h-e|0}function md(a){return x(0),0}function od(a,b,c,d){return x(2),0}function ea(a){var b,d,g,h,i,j,n,o,p,q,r,s,t,u,v,w,x,y,k=0,l=0,m=0|c[500+(a|=0)>>2];if(!((0|m)<=0)){n=0|c[a+504>>2],o=0|c[a+444>>2],d=0|c[a+536>>2],l=0;do{if(g=0|c[n+(24*l|0)+12>>2],h=0|c[o+(c[n+(24*l|0)+4>>2]<<2)>>2],i=0|c[o+(c[n+(24*l|0)+8>>2]<<2)>>2],j=0|c[n+(24*l|0)+16>>2],a=0|c[n+(24*l|0)+20>>2],b=+f[d+(l<<2)>>2],0<(0|g))for(k=0;x=+f[j+(k<<2)>>2],s=+f[j+((p=1|k)<<2)>>2],w=(0|e[a+(k<<1)>>1])<<1&65534,v=+f[(y=h+(w<<2)|0)>>2],r=+f[(w=h+((1|w)<<2)|0)>>2],p=(0|e[a+(p<<1)>>1])<<1&65534,u=+f[(t=i+(p<<2)|0)>>2],q=+f[(p=i+((1|p)<<2)|0)>>2],f[y>>2]=v+x*(u-v)*b,f[w>>2]=r+x*(q-r)*b,f[t>>2]=u+s*(v-u)*b,f[p>>2]=q+s*(r-q)*b,(0|(k=k+2|0))<(0|g););}while((0|(l=l+1|0))!=(0|m))}}function fa(a){var b=0|c[(a|=0)>>2];(0|d[4+b>>0])<4||ga(a,0|c[a+596>>2],0|c[a+600>>2],0|c[984+b>>2],0|c[a+152>>2],0|c[796+b>>2])}function ga(a,b,d,e,g,h){a|=0,e|=0,g|=0,h|=0;var l,o,p,q,r,s,t,u,w,i=0,j=0,k=0,m=0,n=0,v=S;if(S=S+16|0,u=v+8|0,t=v,s=(d|=0)+(12*(b|=0)|0)|0,(0|b)<=0)S=v;else{do{b=0|c[d>>2],o=0|c[g+(b<<2)>>2],q=(b=0|c[h+(b<<2)>>2])<<1,n=0|c[d+4>>2],i=0|c[d+8>>2],p=0|c[1028+(0|c[a>>2])>>2],r=i+(48*n|0)|0;a:do{if(0<(0|n)){if((0|b)<=0)for(;;)if(3<=(b=0|c[i+8>>2])>>>0&&(c[u>>2]=b,ia(0,784,u)),r>>>0<=(i=i+48|0)>>>0)break a;do{j=e+(c[i+4>>2]<<2)|0,b=0|c[i+8>>2];b:do{if(0|b)switch(n=p+(c[j+(c[i+12>>2]<<2)>>2]<<2)|0,0|b){case 1:for(j=i+20|0,b=i+44|0,k=0;f[(m=o+(k<<2)|0)>>2]=+f[m>>2]+ +f[b>>2]*(+f[n+(k<<2)>>2]*+f[j>>2]),(0|(k=k+1|0))!=(0|q););break;case 2:for(j=p+(c[j+(c[i+16>>2]<<2)>>2]<<2)|0,k=i+20|0,l=i+24|0,b=i+44|0,m=0;f[(w=o+(m<<2)|0)>>2]=+f[w>>2]+ +f[b>>2]*(+f[n+(m<<2)>>2]*+f[k>>2]+ +f[j+(m<<2)>>2]*+f[l>>2]),(0|(m=m+1|0))!=(0|q););break;default:c[t>>2]=b,ia(0,784,t);break b}}while(0)}while((i=i+48|0)>>>0<r>>>0)}}while(0)}while((d=d+12|0)>>>0<s>>>0);S=v}}function ha(a){var b=0|c[(a|=0)>>2];(0|d[4+b>>0])<4||ga(a,0|c[a+604>>2],0|c[a+608>>2],0|c[1024+b>>2],0|c[a+444>>2],0|c[892+b>>2])}function ia(a,b,d){a|=0,b|=0,d|=0;var e,f,g=S;S=S+272|0,a=g+16|0,f=g,(e=0|c[1008])&&(c[f>>2]=d,cc(a,b,f),Z[1&e](a)),S=g}function ma(b,d,e){e|=0;var m,f=0,g=0,h=0,i=0,j=0,k=0,l=0,n=0,o=0,p=0,o=0|a[4+(b|=0)>>0];if(c[(d|=0)>>2]=628,p=0|c[(n=b+704|0)>>2],0<(0|(j=0|c[p>>2]))){for(f=0|c[b+1048>>2],g=0|c[b+720>>2],i=h=0;i=(1<<c[f+(c[g+(h<<2)>>2]<<2)>>2])+i|0,(0|(h=h+1|0))!=(0|j););f=i<<2}else f=0;if(c[d+4>>2]=12*j,c[d+8>>2]=c[p>>2]<<2,c[d+12>>2]=c[p>>2]<<2,c[d+16>>2]=c[p>>2]<<2,c[d+20>>2]=c[p>>2]<<2,c[d+24>>2]=c[p>>2]<<2,c[d+28>>2]=f,c[d+32>>2]=c[p>>2]<<2,c[d+36>>2]=f,c[d+40>>2]=f,c[d+44>>2]=c[(m=p+4|0)>>2]<<5,c[d+48>>2]=c[m>>2]<<2,c[d+52>>2]=c[m>>2]<<2,c[d+56>>2]=c[m>>2]<<2,c[d+60>>2]=c[m>>2]<<4,c[d+64>>2]=c[m>>2]<<4,0<(0|(l=0|c[(m=p+8|0)>>2]))){for(g=0|c[b+796>>2],h=0|c[b+1048>>2],i=0|c[b+780>>2],f=k=j=0;f=(15+(c[g+(j<<2)>>2]<<3)&-16)+f|0,k=(1<<c[h+(c[i+(j<<2)>>2]<<2)>>2])+k|0,(0|(j=j+1|0))!=(0|l););g=k<<2}else f=g=0;if(c[d+68>>2]=24*l,c[d+72>>2]=c[m>>2]<<2,c[d+76>>2]=c[m>>2]<<2,c[d+80>>2]=c[m>>2]<<2,c[d+84>>2]=f,c[d+88>>2]=c[m>>2]<<4,c[d+92>>2]=c[m>>2]<<4,c[d+96>>2]=c[m>>2]<<2,c[d+100>>2]=g,c[d+104>>2]=c[m>>2]<<2,c[d+108>>2]=g,c[d+112>>2]=g,c[d+116>>2]=g,c[d+120>>2]=g,c[d+124>>2]=g,c[d+128>>2]=g,c[d+132>>2]=g,c[d+136>>2]=g,c[d+140>>2]=g,c[d+144>>2]=c[m>>2]<<2,c[d+148>>2]=c[m>>2]<<2,c[d+152>>2]=c[m>>2]<<2,c[d+156>>2]=c[m>>2]<<2,c[d+160>>2]=c[m>>2]<<2,c[d+164>>2]=c[m>>2]<<2,0<(0|(j=0|c[(k=p+12|0)>>2]))){for(f=0|c[b+1048>>2],g=0|c[b+812>>2],i=h=0;i=(1<<c[f+(c[g+(h<<2)>>2]<<2)>>2])+i|0,(0|(h=h+1|0))!=(0|j););f=i<<2}else f=0;if(c[d+168>>2]=12*j,c[d+172>>2]=c[k>>2]<<2,c[d+176>>2]=c[k>>2]<<2,c[d+180>>2]=c[k>>2]<<2,c[d+184>>2]=c[k>>2]<<2,c[d+188>>2]=c[k>>2]<<2,c[d+192>>2]=c[k>>2]<<2,c[d+196>>2]=c[k>>2]<<2,c[d+200>>2]=c[k>>2]<<2,c[d+204>>2]=c[k>>2]<<4,c[d+208>>2]=c[k>>2]<<4,c[d+212>>2]=c[k>>2]<<2,c[d+216>>2]=f,c[d+220>>2]=c[k>>2]<<2,c[d+224>>2]=f,c[d+228>>2]=f,c[d+232>>2]=f,c[d+236>>2]=f,c[d+240>>2]=f,c[d+244>>2]=f,c[d+248>>2]=f,c[d+252>>2]=f,c[d+256>>2]=f,c[d+260>>2]=f,c[d+264>>2]=f,c[d+268>>2]=f,c[d+272>>2]=c[k>>2]<<2,c[d+276>>2]=c[k>>2]<<2,c[d+280>>2]=c[k>>2]<<2,c[d+284>>2]=c[k>>2]<<2,c[d+288>>2]=c[k>>2]<<2,c[d+292>>2]=c[k>>2]<<2,0<(0|(l=0|c[(m=p+16|0)>>2]))){for(g=0|c[b+892>>2],h=0|c[b+1048>>2],i=0|c[b+852>>2],f=k=j=0;f=(15+(c[g+(j<<2)>>2]<<3)&-16)+f|0,k=(1<<c[h+(c[i+(j<<2)>>2]<<2)>>2])+k|0,(0|(j=j+1|0))!=(0|l););g=k<<2}else f=g=0;if(c[d+296>>2]=20*l,c[d+300>>2]=c[m>>2]<<2,c[d+304>>2]=c[m>>2],c[d+308>>2]=c[m>>2]<<2,c[d+312>>2]=c[m>>2]<<2,c[d+316>>2]=c[m>>2]<<2,c[d+320>>2]=f,c[d+324>>2]=c[m>>2]<<2,c[d+328>>2]=c[m>>2]<<4,c[d+332>>2]=c[m>>2]<<4,c[d+336>>2]=c[m>>2]<<2,c[d+340>>2]=c[m>>2]<<2,c[d+344>>2]=c[m>>2]<<2,c[d+348>>2]=c[m>>2]<<4,c[d+352>>2]=c[m>>2]<<4,c[d+356>>2]=c[m>>2]<<2,c[d+360>>2]=g,c[d+364>>2]=c[m>>2]<<2,c[d+368>>2]=g,c[d+372>>2]=g,c[d+376>>2]=g,c[d+380>>2]=g,c[d+384>>2]=g,c[d+388>>2]=g,c[d+392>>2]=g,c[d+396>>2]=g,c[d+400>>2]=g,c[d+404>>2]=g,c[d+408>>2]=c[m>>2]<<2,c[d+412>>2]=c[m>>2]<<2,c[d+416>>2]=c[m>>2]<<2,c[d+420>>2]=c[m>>2]<<2,c[d+424>>2]=c[m>>2]<<2,c[d+428>>2]=c[m>>2]<<2,n=0|c[n>>2],c[d+432>>2]=52*(0|c[(g=n+20|0)>>2]),f=(m=3<(255&o))?0:c[g>>2]<<2,c[d+436>>2]=f,c[d+440>>2]=c[g>>2]<<2,c[d+444>>2]=28*(0|c[n+52>>2]),0<(0|(j=0|c[p+48>>2]))){for(f=0|c[b+1048>>2],i=h=g=0;h=(o=0|c[f+(g<<2)>>2])+h|0,i=(1<<o)+i|0,(0|(g=g+1|0))!=(0|j););g=h<<2,f=i<<2}else f=g=0;if(c[d+448>>2]=36*j,c[d+452>>2]=g,c[d+456>>2]=f,c[d+460>>2]=f,c[d+488>>2]=28*(0|c[(g=p+72|0)>>2]),0<(0|(g=0|c[g>>2]))){for(h=0|c[b+1152>>2],i=0|c[b+1160>>2],f=0|c[b+1164>>2],l=k=j=0;k=(0|k)<(0|(o=0|c[h+(j<<2)>>2]))?o:k,l=(0|(o=(0|c[i+(j<<2)>>2])-(0|c[f+(j<<2)>>2])|0))<(0|l)?l:o+1|0,(0|(j=j+1|0))!=(0|g););g=k<<2,f=l<<2}else f=g=0;if(c[d+492>>2]=c[p+76>>2]<<4,c[d+496>>2]=f,c[d+500>>2]=g,c[d+504>>2]=f,0<(0|(j=0|c[(k=p+80|0)>>2]))){for(f=0|c[b+1048>>2],g=0|c[b+1188>>2],i=h=0;i=(1<<c[f+(c[g+(h<<2)>>2]<<2)>>2])+i|0,(0|(h=h+1|0))!=(0|j););f=i<<2}else f=0;if(c[d+508>>2]=24*j,c[d+512>>2]=c[k>>2]<<2,c[d+516>>2]=c[k>>2]<<2,c[d+520>>2]=f,c[d+524>>2]=c[k>>2]<<2,c[d+528>>2]=f,c[d+532>>2]=f,m){if(c[d+464>>2]=20*(0|c[n+120>>2]),c[d+468>>2]=28*(0|c[n+100>>2]),0<(0|(i=0|c[p+104>>2]))){for(f=0|c[b+1080>>2],h=g=0;h=(0|c[f+(g<<2)>>2])+h|0,(0|(g=g+1|0))!=(0|i););f=h<<2}else f=0;c[d+472>>2]=48*i,c[d+476>>2]=f,c[d+480>>2]=12*(0|c[n+108>>2]),c[d+484>>2]=12*(0|c[n+112>>2]),f=g=c[d+540>>2]=0}else{if(0<(0|(m=0|c[(n=p+20|0)>>2]))){k=0|c[b+948>>2],l=0|c[b+952>>2],i=0|c[b+1036>>2],f=j=0;do{if(b=0|c[l+(j<<2)>>2],h=(g=i+(c[k+(j<<2)>>2]<<2)|0)+(b<<2)|0,0<(0|b))for(;f=(0|c[g>>2])+f|0,(g=g+4|0)>>>0<h>>>0;);}while((0|(j=j+1|0))!=(0|m))}else f=0;c[d+540>>2]=m<<2,g=f<<2,f=c[n>>2]<<2}for(c[d+536>>2]=f,c[d+544>>2]=g,g=f=0;g=(b=15+(0|c[(p=d+(f<<2)|0)>>2])&-16)+(c[p>>2]=g)|0,137!=(0|(f=f+1|0)););c[e>>2]=g}function na(b,e,g){b|=0,e|=0,g|=0;var C,D,G,J,M,V,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,E=0,F=0,H=0,I=0,K=0,L=0,N=0,O=0,P=0,Q=0,R=0,T=0,U=0,W=0,X=0,Y=0,Z=0,_=S;if(S=S+560|0,H=_+552|0,h=(p=_)+556|0,$c(0|p,0,548),ma(b,p,h),g>>>0<(h=0|c[h>>2])>>>0)return S=_,(Z=0)|Z;if($c(0|e,0,0|h),Z=e+(0|c[p>>2])|0,c[(D=Z+8|0)>>2]=e+(0|c[p+4>>2]),c[Z+40>>2]=e+(0|c[p+8>>2]),c[Z+44>>2]=e+(0|c[p+12>>2]),c[Z+48>>2]=e+(0|c[p+16>>2]),c[(E=Z+52|0)>>2]=e+(0|c[p+20>>2]),c[(F=Z+16|0)>>2]=e+(0|c[p+24>>2]),c[Z+24>>2]=e+(0|c[p+28>>2]),c[Z+28>>2]=e+(0|c[p+32>>2]),c[Z+32>>2]=e+(0|c[p+36>>2]),c[Z+36>>2]=e+(0|c[p+40>>2]),j=0|c[(Y=b+704|0)>>2],c[(G=Z+308|0)>>2]=e+(0|c[p+44>>2]),c[Z+312>>2]=e+(0|c[p+48>>2]),c[Z+316>>2]=e+(0|c[p+52>>2]),c[Z+320>>2]=e+(0|c[p+56>>2]),c[Z+324>>2]=e+(0|c[p+60>>2]),c[Z+328>>2]=e+(0|c[p+64>>2]),c[(L=Z+60|0)>>2]=e+(0|c[p+68>>2]),c[Z+144>>2]=e+(0|c[p+72>>2]),c[Z+148>>2]=e+(0|c[p+76>>2]),h=e+(0|c[p+80>>2])|0,c[(k=Z+152|0)>>2]=h,0<(0|(j=0|c[j+8>>2]))&&(l=e+(0|c[p+84>>2])|0,m=b+796|0,c[h>>2]=l,1!=(0|j)))for(h=0,i=1,g=l;g=g+(15+(c[(0|c[m>>2])+(h<<2)>>2]<<3)&-16)|0,c[(0|c[k>>2])+(i<<2)>>2]=g,!((0|j)<=(0|(h=i+1|0)));)W=i,i=h,h=W;if(c[Z+156>>2]=e+(0|c[p+88>>2]),c[Z+160>>2]=e+(0|c[p+92>>2]),c[(I=Z+68|0)>>2]=e+(0|c[p+96>>2]),c[Z+76>>2]=e+(0|c[p+100>>2]),c[Z+80>>2]=e+(0|c[p+104>>2]),c[Z+84>>2]=e+(0|c[p+108>>2]),c[Z+88>>2]=e+(0|c[p+112>>2]),c[Z+92>>2]=e+(0|c[p+116>>2]),c[Z+96>>2]=e+(0|c[p+120>>2]),c[Z+100>>2]=e+(0|c[p+124>>2]),c[Z+104>>2]=e+(0|c[p+128>>2]),c[Z+108>>2]=e+(0|c[p+132>>2]),c[Z+112>>2]=e+(0|c[p+136>>2]),c[Z+116>>2]=e+(0|c[p+140>>2]),c[Z+120>>2]=e+(0|c[p+144>>2]),c[Z+124>>2]=e+(0|c[p+148>>2]),c[Z+128>>2]=e+(0|c[p+152>>2]),c[Z+132>>2]=e+(0|c[p+156>>2]),c[Z+136>>2]=e+(0|c[p+160>>2]),c[Z+140>>2]=e+(0|c[p+164>>2]),c[(J=Z+168|0)>>2]=e+(0|c[p+168>>2]),c[Z+264>>2]=e+(0|c[p+172>>2]),c[Z+268>>2]=e+(0|c[p+176>>2]),c[Z+272>>2]=e+(0|c[p+180>>2]),c[Z+276>>2]=e+(0|c[p+184>>2]),c[Z+280>>2]=e+(0|c[p+188>>2]),c[Z+284>>2]=e+(0|c[p+192>>2]),c[Z+288>>2]=e+(0|c[p+196>>2]),c[Z+292>>2]=e+(0|c[p+200>>2]),c[Z+296>>2]=e+(0|c[p+204>>2]),c[Z+300>>2]=e+(0|c[p+208>>2]),c[(K=Z+176|0)>>2]=e+(0|c[p+212>>2]),c[Z+184>>2]=e+(0|c[p+216>>2]),c[Z+188>>2]=e+(0|c[p+220>>2]),c[Z+192>>2]=e+(0|c[p+224>>2]),c[Z+196>>2]=e+(0|c[p+228>>2]),c[Z+200>>2]=e+(0|c[p+232>>2]),c[Z+204>>2]=e+(0|c[p+236>>2]),c[Z+208>>2]=e+(0|c[p+240>>2]),c[Z+212>>2]=e+(0|c[p+244>>2]),c[Z+216>>2]=e+(0|c[p+248>>2]),c[Z+220>>2]=e+(0|c[p+252>>2]),c[Z+224>>2]=e+(0|c[p+256>>2]),c[Z+228>>2]=e+(0|c[p+260>>2]),c[Z+232>>2]=e+(0|c[p+264>>2]),c[Z+236>>2]=e+(0|c[p+268>>2]),c[Z+240>>2]=e+(0|c[p+272>>2]),c[Z+244>>2]=e+(0|c[p+276>>2]),c[Z+248>>2]=e+(0|c[p+280>>2]),c[Z+252>>2]=e+(0|c[p+284>>2]),c[Z+256>>2]=e+(0|c[p+288>>2]),c[Z+260>>2]=e+(0|c[p+292>>2]),j=0|c[Y>>2],c[(O=Z+336|0)>>2]=e+(0|c[p+296>>2]),c[Z+424>>2]=e+(0|c[p+300>>2]),c[Z+432>>2]=e+(0|c[p+304>>2]),c[Z+436>>2]=e+(0|c[p+308>>2]),c[Z+440>>2]=e+(0|c[p+312>>2]),h=e+(0|c[p+316>>2])|0,c[(k=Z+444|0)>>2]=h,0<(0|(j=0|c[j+16>>2]))&&(n=e+(0|c[p+320>>2])|0,o=b+892|0,c[h>>2]=n,1!=(0|j)))for(h=0,i=1,g=n;g=g+(15+(c[(0|c[o>>2])+(h<<2)>>2]<<3)&-16)|0,c[(0|c[k>>2])+(i<<2)>>2]=g,!((0|j)<=(0|(h=i+1|0)));)W=i,i=h,h=W;if(c[Z+448>>2]=e+(0|c[p+324>>2]),c[(P=Z+452|0)>>2]=e+(0|c[p+328>>2]),c[(Q=Z+456|0)>>2]=e+(0|c[p+332>>2]),c[Z+460>>2]=e+(0|c[p+336>>2]),c[Z+464>>2]=e+(0|c[p+340>>2]),c[Z+468>>2]=e+(0|c[p+344>>2]),c[Z+472>>2]=e+(0|c[p+348>>2]),c[Z+476>>2]=e+(0|c[p+352>>2]),c[(N=Z+344|0)>>2]=e+(0|c[p+356>>2]),c[Z+352>>2]=e+(0|c[p+360>>2]),c[Z+356>>2]=e+(0|c[p+364>>2]),c[Z+360>>2]=e+(0|c[p+368>>2]),c[Z+364>>2]=e+(0|c[p+372>>2]),c[Z+368>>2]=e+(0|c[p+376>>2]),c[Z+372>>2]=e+(0|c[p+380>>2]),c[Z+376>>2]=e+(0|c[p+384>>2]),c[Z+380>>2]=e+(0|c[p+388>>2]),c[Z+384>>2]=e+(0|c[p+392>>2]),c[Z+388>>2]=e+(0|c[p+396>>2]),c[Z+392>>2]=e+(0|c[p+400>>2]),c[Z+396>>2]=e+(0|c[p+404>>2]),c[Z+400>>2]=e+(0|c[p+408>>2]),c[Z+404>>2]=e+(0|c[p+412>>2]),c[Z+408>>2]=e+(0|c[p+416>>2]),c[Z+412>>2]=e+(0|c[p+420>>2]),c[Z+416>>2]=e+(0|c[p+424>>2]),c[Z+420>>2]=e+(0|c[p+428>>2]),A=0|c[p+436>>2],C=0|c[p+440>>2],c[(W=Z+544|0)>>2]=e+(0|c[p+432>>2]),c[(B=Z+548|0)>>2]=e+A,c[(A=Z+552|0)>>2]=e+C,c[(C=Z+560|0)>>2]=e+(0|c[p+444>>2]),h=0|c[Y>>2],j=e+(0|c[p+448>>2])|0,c[(U=Z+568|0)>>2]=j,0<(0|(h=0|c[h+48>>2])))for(g=0|c[b+1048>>2],k=e+(0|c[p+452>>2])|0,m=e+((l=0)|c[p+456>>2])|0,o=e+(0|c[p+460>>2])|0;c[j+(36*l|0)>>2]=k,c[j+(36*l|0)+16>>2]=m,c[j+(36*l|0)+20>>2]=o,n=1<<(i=0|c[g+(l<<2)>>2]),(0|(l=l+1|0))!=(0|h);)k=k+(i<<2)|0,m=m+(n<<2)|0,o=o+(n<<2)|0;if(h=0|c[Y>>2],i=e+(0|c[p+488>>2])|0,c[(M=Z+484|0)>>2]=i,0<(0|(h=0|c[h+72>>2])))for(g=0|c[b+1152>>2],k=e+((j=0)|c[p+492>>2])|0;k=(c[i+(28*j|0)+12>>2]=k)+(c[g+(j<<2)>>2]<<4)|0,(0|(j=j+1|0))!=(0|h););if(c[Z+488>>2]=e+(0|c[p+496>>2]),c[Z+492>>2]=e+(0|c[p+500>>2]),c[Z+496>>2]=e+(0|c[p+504>>2]),c[(R=Z+504|0)>>2]=e+(0|c[p+508>>2]),c[Z+536>>2]=e+(0|c[p+512>>2]),c[(T=Z+512|0)>>2]=e+(0|c[p+516>>2]),c[Z+520>>2]=e+(0|c[p+520>>2]),c[Z+524>>2]=e+(0|c[p+524>>2]),c[Z+528>>2]=e+(0|c[p+528>>2]),c[Z+532>>2]=e+(0|c[p+532>>2]),z=3<(0|d[(V=b+4|0)>>0])){if(c[Z+576>>2]=e+(0|c[p+464>>2]),c[Z+584>>2]=e+(0|c[p+468>>2]),h=0|c[p+476>>2],j=0|c[Y>>2],l=e+(0|c[p+472>>2])|0,c[Z+592>>2]=l,0<(0|(j=0|c[j+104>>2])))for(k=0|c[b+1080>>2],h=e+h|0,g=0;c[l+(48*g|0)+40>>2]=h,(0|(i=g+1|0))!=(0|j);)h=h+(c[k+(g<<2)>>2]<<2)|0,g=i;c[Z+600>>2]=e+(0|c[p+480>>2]),c[Z+608>>2]=e+(0|c[p+484>>2]),g=0|c[Y>>2],h=0|c[g+20>>2]}else if(g=0|c[p+536>>2],i=0|c[p+544>>2],c[Z+616>>2]=e+(0|c[p+540>>2]),c[(p=Z+612|0)>>2]=e+g,g=0|c[Y>>2],0<(0|(h=0|c[g+20>>2])))for(m=b+948|0,n=b+952|0,l=b+1036|0,k=e+i|(o=0);;){if(h=0|c[(0|c[m>>2])+(o<<2)>>2],i=(y=0|c[(0|c[n>>2])+(o<<2)>>2])+h|0,0<(0|y)){for(g=0|c[l>>2],j=0;j=(0|c[g+(h<<2)>>2])+j|0,(0|(h=h+1|0))<(0|i););h=(0|c[p>>2])+(o<<2)|0,j?(g=k,i=j):X=27}else h=(0|c[p>>2])+(o<<2)|0,X=27;if(27==(0|X)&&(i=g=X=0),c[h>>2]=g,g=0|c[Y>>2],(0|(h=0|c[g+20>>2]))<=(0|(o=o+1|0)))break;k=k+(i<<2)|0}c[Z>>2]=b,c[Z+620>>2]=1,c[Z+624>>2]=1&a[20+(0|c[b+708>>2])>>0],k=(c[Z+540>>2]=h)+-1|0;a:do{if(0<(0|h)){if(e=0|c[W>>2],q=0|c[b+928>>2],s=0|c[b+924>>2],u=0|c[b+936>>2],v=0|c[b+932>>2],w=0|c[b+940>>2],x=0|c[b+952>>2],y=b+948|0,p=0|c[A>>2],o=Z+584|0,n=b+956|0,!z)for(;;){if(c[e+(52*k|0)>>2]=0,c[e+(52*k|0)+4>>2]=c[(i=q+(k<<2)|0)>>2],c[e+(52*k|0)+8>>2]=c[(A=s+(k<<2)|0)>>2],f[e+(52*k|0)+12>>2]=+f[A>>2]-+f[i>>2],c[e+(52*k|0)+16>>2]=c[u+(k<<2)>>2],c[e+(52*k|0)+44>>2]=c[(i=v+(k<<2)|0)>>2],t=+r(.10000000149011612,0|c[w+(k<<2)>>2]),f[e+(52*k|0)+20>>2]=t,f[e+(52*k|0)+24>>2]=1.5*t,A=0|c[x+(k<<2)>>2],j=(c[e+(52*k|0)+32>>2]=A)?(0|c[C>>2])+(28*(0|c[(0|c[y>>2])+(k<<2)>>2])|0)|0:0,c[e+(52*k|0)+28>>2]=j,c[e+(52*k|0)+48>>2]=1,c[p+(k<<2)>>2]=c[i>>2],!(0<(0|k)))break a;k=k+-1|0}for(l=0|c[b+944>>2],m=0|c[b+960>>2];c[e+(52*k|0)>>2]=c[l+(k<<2)>>2],c[e+(52*k|0)+4>>2]=c[(j=q+(k<<2)|0)>>2],c[e+(52*k|0)+8>>2]=c[(A=s+(k<<2)|0)>>2],f[e+(52*k|0)+12>>2]=+f[A>>2]-+f[j>>2],c[e+(52*k|0)+16>>2]=c[u+(k<<2)>>2],c[e+(52*k|0)+44>>2]=c[(j=v+(k<<2)|0)>>2],t=+r(.10000000149011612,0|c[w+(k<<2)>>2]),f[e+(52*k|0)+20>>2]=t,f[e+(52*k|0)+24>>2]=1.5*t,A=0|c[x+(k<<2)>>2],i=(c[e+(52*k|0)+32>>2]=A)?(0|c[C>>2])+(28*(0|c[(0|c[y>>2])+(k<<2)>>2])|0)|0:0,c[e+(52*k|0)+28>>2]=i,A=0|c[m+(k<<2)>>2],i=(c[e+(52*k|0)+40>>2]=A)?(0|c[o>>2])+(28*(0|c[(0|c[n>>2])+(k<<2)>>2])|0)|0:0,c[e+(52*k|0)+36>>2]=i,c[e+(52*k|0)+48>>2]=1,c[p+(k<<2)>>2]=c[j>>2],0<(0|k);)k=k+-1|0}}while(0);if(z?(c[B>>2]=c[b+944>>2],l=g,u=b):($c(0|c[B>>2],0,h<<2|0),u=0|c[Z>>2],l=0|c[u+704>>2]),h=0|c[l+52>>2],0<(0|(c[Z+556>>2]=h)))for(g=0|c[C>>2],i=0|c[u+1036>>2],j=0|c[u+1132>>2],k=0|c[u+1032>>2];c[g+(28*(h=(B=h)+-1|0)|0)>>2]=c[i+(h<<2)>>2],c[g+(28*h|0)+4>>2]=j+(c[k+(h<<2)>>2]<<2),c[g+(28*h|0)+8>>2]=0,f[g+(28*h|0)+12>>2]=0,c[g+(28*h|0)+16>>2]=0,c[g+(28*h|0)+20>>2]=1,(c[g+(28*h|0)+24>>2]=1)<(0|B););if(h=0|c[l+48>>2],0<(0|(c[Z+564>>2]=h))){n=u+1048|0,o=u+1040|0,m=u+1044|0;do{if(l=h,g=0|c[U>>2],i=0|c[(0|c[n>>2])+((h=h+-1|0)<<2)>>2],0<(0|(c[g+(36*h|0)+4>>2]=i)))for(j=g+(36*h|0)|0,k=0;c[(0|c[j>>2])+(k<<2)>>2]=(0|c[C>>2])+(28*(0|c[(0|c[o>>2])+((0|c[(0|c[m>>2])+(h<<2)>>2])+k<<2)>>2])|0),(0|(k=k+1|0))!=(0|i););}while(c[g+(36*h|0)+8>>2]=1<<i,c[g+(36*h|0)+24>>2]=1,(c[g+(36*h|0)+28>>2]=1)<(0|l));u=0|c[Z>>2],l=0|c[u+704>>2]}if(g=0|c[l>>2],0<(0|(c[(e=Z+4|0)>>2]=g))){for(j=0|c[D>>2],o=0|c[U>>2],p=0|c[u+720>>2],k=0|c[u+740>>2],m=0|c[u+736>>2],n=0|c[u+732>>2],h=0|c[E>>2],i=g;c[j+(12*(i=(E=i)+-1|0)|0)>>2]=o+(36*(0|c[p+(i<<2)>>2])|0),c[j+(12*i|0)+4>>2]=c[k+(i<<2)>>2],c[j+(12*i|0)+8>>2]=c[m+(i<<2)>>2],f[h+(i<<2)>>2]=0==(0|c[n+(i<<2)>>2])?0:1,1<(0|E););for(i=0|c[F>>2],h=0;E=0|c[o+(36*(0|c[p+((g=(F=g)+-1|0)<<2)>>2])|0)+8>>2],h=(c[i+(g<<2)>>2]=E)+h|0,1<(0|F););g=0|c[e>>2]}else h=0;if(c[Z+20>>2]=h,c[Z+12>>2]=g,h=0|c[l+4>>2],0<(0|(c[Z+304>>2]=h))){m=u+752|0,o=u+764|0,n=u+768|0,l=u+772|0,p=u+776|0,k=u+760|0;do{switch(j=h,g=0|c[G>>2],c[g+((h=h+-1|0)<<5)>>2]=(0|c[U>>2])+(36*(0|c[(0|c[m>>2])+(h<<2)>>2])|0),c[g+(h<<5)+4>>2]=c[(0|c[o>>2])+(h<<2)>>2],c[g+(h<<5)+8>>2]=c[(0|c[n>>2])+(h<<2)>>2],F=0|c[(0|c[l>>2])+(h<<2)>>2],c[g+(h<<5)+12>>2]=F,i=0|c[(0|c[p>>2])+(h<<2)>>2],c[g+(h<<5)+16>>2]=i,c[g+(h<<5)+28>>2]=c[(0|c[k>>2])+(h<<2)>>2],0|F){case 0:c[(0|c[L>>2])+(24*i|0)+20>>2]=h,c[g+(h<<5)+20>>2]=2,c[g+(h<<5)+24>>2]=2;break;case 1:c[(0|c[J>>2])+(12*i|0)+8>>2]=h,c[g+(h<<5)+20>>2]=3,c[g+(h<<5)+24>>2]=3;break;default:ia(0,937,H)}}while(1<(0|j));u=0|c[Z>>2],B=0|c[u+704>>2]}else B=l;if(i=0|c[B+8>>2],h=(c[(e=Z+56|0)>>2]=i)+-1|0,p=0<(0|i))if(j=0|c[L>>2],k=0|c[U>>2],l=0|c[u+780>>2],m=0|c[u+800>>2],n=0|c[u+804>>2],o=0|c[u+796>>2],1<(0|d[u+4>>0]))for(g=0|c[u+808>>2];c[j+(24*h|0)>>2]=k+(36*(0|c[l+(h<<2)>>2])|0),c[j+(24*h|0)+4>>2]=c[m+(h<<2)>>2],c[j+(24*h|0)+8>>2]=c[n+(h<<2)>>2],c[j+(24*h|0)+16>>2]=c[o+(h<<2)>>2],c[j+(24*h|0)+12>>2]=c[g+(h<<2)>>2],0<(0|h);)h=h+-1|0;else for(;c[j+(24*h|0)>>2]=k+(36*(0|c[l+(h<<2)>>2])|0),c[j+(24*h|0)+4>>2]=c[m+(h<<2)>>2],c[j+(24*h|0)+8>>2]=c[n+(h<<2)>>2],c[j+(24*h|0)+16>>2]=c[o+(h<<2)>>2],(c[j+(24*h|0)+12>>2]=0)<(0|h);)h=h+-1|0;if(g=0|c[B+12>>2],0<(0|(c[(n=Z+164|0)>>2]=g)))for(h=0|c[J>>2],j=0|c[U>>2],k=0|c[u+812>>2],l=0|c[u+828>>2],m=g;c[h+(12*(m=(H=m)+-1|0)|0)>>2]=j+(36*(0|c[k+(m<<2)>>2])|0),c[h+(12*m|0)+4>>2]=c[l+(m<<2)>>2],1<(0|H););if(p){for(j=0|c[L>>2],g=0|c[I>>2],h=0;I=0|c[8+(0|c[j+(24*(i=(L=i)+-1|0)|0)>>2])>>2],h=(c[g+(i<<2)>>2]=I)+h|0,1<(0|L););i=0|c[e>>2],g=0|c[n>>2]}else h=0;if(c[Z+72>>2]=h,c[Z+64>>2]=i,0<(0|g)){for(j=0|c[J>>2],i=0|c[K>>2],h=0;K=0|c[8+(0|c[j+(12*(g=(L=g)+-1|0)|0)>>2])>>2],h=(c[i+(g<<2)>>2]=K)+h|0,1<(0|L););g=0|c[n>>2]}else h=0;if(c[Z+180>>2]=h,c[Z+172>>2]=g,g=u+704|0,h=0|c[B+16>>2],0<(0|(c[(e=Z+332|0)>>2]=h))){for(i=0|c[O>>2],o=0|c[U>>2],p=0|c[u+852>>2],j=0|c[u+876>>2],k=0|c[u+880>>2],l=0|c[u+892>>2],m=0|c[u+872>>2],n=h;c[i+(20*(n=(O=n)+-1|0)|0)>>2]=o+(36*(0|c[p+(n<<2)>>2])|0),c[i+(20*n|0)+4>>2]=c[j+(n<<2)>>2],c[i+(20*n|0)+8>>2]=c[k+(n<<2)>>2],c[i+(20*n|0)+16>>2]=c[l+(n<<2)>>2],c[i+(20*n|0)+12>>2]=c[m+(n<<2)>>2],1<(0|O););for(i=0|c[N>>2],j=0;N=0|c[o+(36*(0|c[p+((h=(O=h)+-1|0)<<2)>>2])|0)+8>>2],j=(c[i+(h<<2)>>2]=N)+j|0,1<(0|O););if(h=0|c[e>>2],c[Z+348>>2]=j,0<(0|(c[Z+340>>2]=h)))for(k=0|c[P>>2],i=0|c[Q>>2],j=h<<2;f[k+((j=(Q=j)+-4|0)<<2)>>2]=1,f[k+((O=Q+-3|0)<<2)>>2]=1,f[k+((P=Q+-2|0)<<2)>>2]=1,f[k+((Q=Q+-1|0)<<2)>>2]=1,f[i+(j<<2)>>2]=0,f[i+(O<<2)>>2]=0,!(((f[i+(P<<2)>>2]=0)|h)<=(f[i+(Q<<2)>>2]=1));)h=h+-1|0}else c[Z+348>>2]=0,c[Z+340>>2]=h;if(A=0|c[B+72>>2],0<(0|(c[Z+480>>2]=A))){h=0|c[M>>2],i=0|c[u+1152>>2],j=0|c[u+1156>>2],k=0|c[u+1160>>2],l=0|c[u+1164>>2],m=0|c[u+1148>>2],v=u+1172|0,x=u+1168|0,w=u+1176|0,y=0;do{if(n=0|c[i+(y<<2)>>2],c[h+(28*y|0)+4>>2]=n,c[h+(28*y|0)>>2]=c[j+(y<<2)>>2],Q=0|c[k+(y<<2)>>2],c[h+(28*y|0)+16>>2]=Q,o=0|c[l+(y<<2)>>2],c[h+(28*y|0)+20>>2]=o,c[h+(28*y|0)+24>>2]=Q+1-o,o=(c[h+(28*y|0)+8>>2]=0)|c[m+(y<<2)>>2],0<(0|n))for(p=0|c[h+(28*y|0)+12>>2],e=0|c[v>>2],q=0|c[x>>2],s=0|c[w>>2],z=0;c[p+(z<<4)+4>>2]=c[e+((Q=z+o|0)<<2)>>2],c[p+(z<<4)>>2]=c[q+(Q<<2)>>2],c[p+(z<<4)+8>>2]=c[s+(Q<<2)>>2],(0|(z=z+1|(c[p+(z<<4)+12>>2]=0)))!=(0|n););}while((0|(y=y+1|0))!=(0|A))}i=0|c[B+80>>2],c[(q=Z+500|0)>>2]=i;do{if(0<(0|i)){for(o=0|c[R>>2],p=0|c[U>>2],e=0|c[u+1188>>2],h=0|c[u+1200>>2],j=0|c[u+1204>>2],k=0|c[u+1212>>2],l=0|c[u+1216>>2],m=0|c[u+1208>>2],n=0|c[u+1220>>2];c[o+(24*(i=(U=i)+-1|0)|0)>>2]=p+(36*(0|c[e+(i<<2)>>2])|0),c[o+(24*i|0)+4>>2]=c[h+(i<<2)>>2],c[o+(24*i|0)+8>>2]=c[j+(i<<2)>>2],c[o+(24*i|0)+12>>2]=c[k+(i<<2)>>2],R=0|c[m+(i<<2)>>2],c[o+(24*i|0)+16>>2]=l+(R<<2),c[o+(24*i|0)+20>>2]=n+(R<<1),1<(0|U););if((0|(i=0|c[q>>2]))<=0){h=0;break}for(j=0|c[T>>2],h=0;T=0|c[p+(36*(0|c[e+((i=(U=i)+-1|0)<<2)>>2])|0)+8>>2],h=(c[j+(i<<2)>>2]=T)+h|0,1<(0|U););i=0|c[q>>2]}else h=0}while(0);c[Z+516>>2]=h,c[Z+508>>2]=i;do{if(3<(0|d[V>>0])){if((255&(h=0|a[u+4>>0]))<4)break;if(i=0|c[B+120>>2],0<(0|(c[Z+572>>2]=i))){for(n=0|c[Z+576>>2],o=0|c[u+1112>>2],e=u+1124|0,p=u+1116|0,q=u+1128|0,m=u+1120|0;j=-1<(0|(h=0|c[o+((i=(l=i)+-1|0)<<2)>>2]))?(j=0|c[(0|c[p>>2])+(i<<2)>>2],k=0|c[(0|c[m>>2])+(i<<2)>>2],h=(0|c[W>>2])+(52*h|0)|0,g=(0|c[e>>2])+(j<<2)|0,(0|c[q>>2])+(j<<2)|0):g=h=k=0,c[n+(20*i|0)>>2]=h,c[n+(20*i|0)+4>>2]=g,c[n+(20*i|0)+8>>2]=j,c[n+(20*i|0)+12>>2]=k,1<(0|l););if(g=0|c[Z>>2],(255&(h=0|a[g+4>>0]))<4)break;g=(u=g)+704|0}if(i=0|c[g>>2],g=0|c[i+100>>2],0<(0|(c[Z+580>>2]=g)))for(j=0|c[Z+584>>2],k=0|c[u+1056>>2],l=0|c[u+1132>>2],m=0|c[u+1052>>2],n=0|c[u+1060>>2];c[j+(28*(g=(X=g)+-1|0)|0)>>2]=c[k+(g<<2)>>2],c[j+(28*g|0)+4>>2]=l+(c[m+(g<<2)>>2]<<2),c[j+(28*g|0)+8>>2]=c[n+(g<<2)>>2],c[j+(28*g|0)+12>>2]=0,f[j+(28*g|0)+16>>2]=0,c[j+(28*g|0)+20>>2]=1,(c[j+(28*g|0)+24>>2]=1)<(0|X););if(g=0|c[i+104>>2],0<(0|(c[Z+588>>2]=g))){p=Z+592|0,q=Z+584|0,o=u+1064|0,s=u+1068|0,m=u+1080|0,e=Z+576|0,n=u+1108|0,l=u+1076|0;do{if(k=g,h=0|c[p>>2],c[h+(48*(g=g+-1|0)|0)>>2]=(0|c[q>>2])+(28*(0|c[(0|c[o>>2])+(g<<2)>>2])|0),c[h+(48*g|0)+4>>2]=c[(0|c[s>>2])+(g<<2)>>2],c[h+(48*g|0)+8>>2]=0,c[h+(48*g|0)+28>>2]=1,c[h+(48*g|0)+32>>2]=1,j=0|c[(0|c[m>>2])+(g<<2)>>2],0<(0|(c[h+(48*g|0)+36>>2]=j)))for(h=h+(48*g|0)+40|0,i=0;c[(0|c[h>>2])+(i<<2)>>2]=(0|c[e>>2])+(20*(0|c[(0|c[n>>2])+((0|c[(0|c[l>>2])+(g<<2)>>2])+i<<2)>>2])|0),(0|(i=i+1|0))!=(0|j););}while(1<(0|k));o=0|c[Z>>2],h=0|a[o+4>>0]}else o=u;if(n=0|c[Y>>2],g=0|c[n+108>>2],(255&h)<4)break;if(0<(0|(c[Z+596>>2]=g)))for(i=0|c[Z+600>>2],j=0|c[b+1084>>2],k=0|c[b+1092>>2],l=0|c[Z+592>>2],m=0|c[b+1088>>2],h=g;c[i+(12*(h=(Y=h)+-1|0)|0)>>2]=c[j+(h<<2)>>2],c[i+(12*h|0)+4>>2]=c[k+(h<<2)>>2],c[i+(12*h|0)+8>>2]=l+(48*(0|c[m+(h<<2)>>2])|0),1<(0|Y););if(h=0|c[n+112>>2],0<(0|(c[Z+604>>2]=h)))for(i=0|c[Z+608>>2],j=0|c[b+1096>>2],k=0|c[b+1104>>2],l=0|c[Z+592>>2],g=0|c[b+1100>>2];c[i+(12*(h=(b=h)+-1|0)|0)>>2]=c[j+(h<<2)>>2],c[i+(12*h|0)+4>>2]=c[k+(h<<2)>>2],c[i+(12*h|0)+8>>2]=l+(48*(0|c[g+(h<<2)>>2])|0),1<(0|b););if(i=0|c[o+1132>>2],j=0|c[20+(0|c[o+704>>2])>>2],k=Z+612|0,c[Z+616>>2]=c[o+972>>2],h=0|c[o+964>>2],c[k>>2]=h,(0|j)<=0)break;if(c[h>>2]=i+(c[c[(g=o+968|0)>>2]>>2]<<2),1==(0|j))break;for(h=1;c[(0|c[k>>2])+(h<<2)>>2]=i+(c[(0|c[g>>2])+(h<<2)>>2]<<2),(0|(h=h+1|0))!=(0|j););}else{if((0|c[B+20>>2])<=0)break;z=u+948|0,A=u+952|0,w=Z+612|0,x=u+1032|0,y=u+1036|0,s=u+1132|0,u=Z+616|0,v=0;do{if(h=0|c[(0|c[z>>2])+(v<<2)>>2],e=(b=0|c[(0|c[A>>2])+(v<<2)>>2])+h|0,q=0|c[(0|c[w>>2])+(v<<2)>>2],0<(0|b)){o=0|c[x>>2],p=0|c[y>>2],n=h,h=0;do{if(i=0|c[o+(n<<2)>>2],m=(b=0|c[p+(n<<2)>>2])+i|0,0<(0|b)){l=0|c[s>>2];do{t=+f[l+(i<<2)>>2],j=q+(h<<2)|0;b:do{if(0<(0|h))for(k=q;;){if(+f[k>>2]==t)break b;if(j>>>0<=(k=k+4|0)>>>0){X=150;break}}else X=150}while(0)}while(150==(0|X)&&(X=0,f[j>>2]=t,h=h+1|0),(0|(i=i+1|0))<(0|m))}}while((0|(n=n+1|0))<(0|e))}else h=0;!function(a,b){a|=0;var h,j,d=0,e=0,f=0,g=0,i=0,l=0,m=S,k=S=S+63&-64;S=S+208|0,f=(b|=0)<<2,c[(i=k=192+(j=k)|0)>>2]=1,c[i+4>>2]=0;a:do{if(0|f){for(c[4+j>>2]=4,d=b=c[j>>2]=4,e=2;(c[j+(e<<2)>>2]=b=b+4+d|0)>>>0<f>>>0;)i=d,d=b,e=e+1|0,b=i;if(a>>>0<(g=a+f+-4|0)>>>0){h=g,i=4+k|0,d=a,e=b=1;do{do{if(3!=(3&b|0)){if((0|c[j+((f=e+-1|0)<<2)>>2])>>>0<(h-d|0)>>>0?Cc(d,e,j):Ec(d,b,0|c[i>>2],e,0,j),1==(0|e)){Fc(k,1),e=0;break}Fc(k,f),e=1;break}}while(Cc(d,e,j),Dc(k,2),e=e+2|0,0)}while(b=1|c[k>>2],c[k>>2]=b,(d=d+4|0)>>>0<g>>>0);f=0|c[(g=i)>>2]}else g=4+k|0,f=0,d=a,e=b=1;for(Ec(d,b,f,e,0,j),f=4+k|0;;){if(1==(0|e)&1==(0|b)){if(!(0|c[f>>2]))break a;l=21}else(0|e)<2?l=21:(Fc(k,2),a=e+-2|0,c[k>>2]=7^c[k>>2],Dc(k,1),Ec(d+(0-(0|c[j+(a<<2)>>2]))+-4|0,0|c[k>>2],0|c[g>>2],e+-1|0,1,j),Fc(k,1),b=1|c[k>>2],Ec(d=d+-4|0,c[k>>2]=b,0|c[g>>2],a,1,j),e=a);21==(0|l)&&(Dc(k,a=(l=0)|Gc(k)),b=0|c[k>>2],d=d+-4|0,e=a+e|0)}}}while(0);S=m}(q,h),c[(0|c[u>>2])+(v<<2)>>2]=h,v=v+1|0}while((0|v)<(0|c[20+(0|c[g>>2])>>2]))}}while(0);return Jb(Z),S=_,0|Z}function oa(a,b){return 0|((a=+f[(a|=0)>>2])<(b=+f[(b|=0)>>2])?-1:b<a&1)}function pa(b,d){var e=0|a[4+(b|=0)>>0];c[(d|=0)>>2]=b+(0|c[b+64>>2]),c[d+4>>2]=b+(0|c[b+68>>2]),c[d+8>>2]=b+(0|c[b+72>>2]),c[d+12>>2]=b+(0|c[b+76>>2]),c[d+16>>2]=b+(0|c[b+80>>2]),c[d+20>>2]=b+(0|c[b+84>>2]),c[d+24>>2]=b+(0|c[b+88>>2]),c[d+28>>2]=b+(0|c[b+92>>2]),c[d+32>>2]=b+(0|c[b+96>>2]),c[d+36>>2]=b+(0|c[b+100>>2]),c[d+40>>2]=b+(0|c[b+104>>2]),c[d+44>>2]=b+(0|c[b+108>>2]),c[d+48>>2]=b+(0|c[b+112>>2]),c[d+52>>2]=b+(0|c[b+116>>2]),c[d+56>>2]=b+(0|c[b+120>>2]),c[d+60>>2]=b+(0|c[b+124>>2]),c[d+64>>2]=b+(0|c[b+128>>2]),c[d+68>>2]=b+(0|c[b+132>>2]),c[d+72>>2]=b+(0|c[b+136>>2]),c[d+76>>2]=b+(0|c[b+140>>2]),c[d+80>>2]=b+(0|c[b+144>>2]),c[d+84>>2]=b+(0|c[b+148>>2]),c[d+92>>2]=b+(0|c[b+152>>2]),c[d+96>>2]=b+(0|c[b+156>>2]),c[d+100>>2]=b+(0|c[b+160>>2]),c[d+108>>2]=b+(0|c[b+164>>2]),c[d+112>>2]=b+(0|c[b+168>>2]),c[d+116>>2]=b+(0|c[b+172>>2]),c[d+124>>2]=b+(0|c[b+176>>2]),c[d+128>>2]=b+(0|c[b+180>>2]),c[d+132>>2]=b+(0|c[b+184>>2]),c[d+136>>2]=b+(0|c[b+188>>2]),c[d+140>>2]=b+(0|c[b+192>>2]),c[d+144>>2]=b+(0|c[b+196>>2]),c[d+148>>2]=b+(0|c[b+200>>2]),c[d+152>>2]=b+(0|c[b+204>>2]),c[d+156>>2]=b+(0|c[b+208>>2]),c[d+164>>2]=b+(0|c[b+212>>2]),c[d+168>>2]=b+(0|c[b+216>>2]),c[d+172>>2]=b+(0|c[b+220>>2]),c[d+176>>2]=b+(0|c[b+224>>2]),c[d+180>>2]=b+(0|c[b+228>>2]),c[d+184>>2]=b+(0|c[b+232>>2]),c[d+188>>2]=b+(0|c[b+236>>2]),c[d+192>>2]=b+(0|c[b+240>>2]),c[d+196>>2]=b+(0|c[b+244>>2]),c[d+200>>2]=b+(0|c[b+248>>2]),c[d+204>>2]=b+(0|c[b+252>>2]),c[d+208>>2]=b+(0|c[b+256>>2]),c[d+212>>2]=b+(0|c[b+260>>2]),c[d+216>>2]=b+(0|c[b+264>>2]),c[d+220>>2]=b+(0|c[b+268>>2]),c[d+224>>2]=b+(0|c[b+272>>2]),c[d+228>>2]=b+(0|c[b+276>>2]),c[d+232>>2]=b+(0|c[b+280>>2]),c[d+236>>2]=b+(0|c[b+284>>2]),c[d+244>>2]=b+(0|c[b+288>>2]),c[d+248>>2]=b+(0|c[b+292>>2]),c[d+272>>2]=b+(0|c[b+296>>2]),c[d+276>>2]=b+(0|c[b+300>>2]),c[d+280>>2]=b+(0|c[b+304>>2]),c[d+284>>2]=b+(0|c[b+308>>2]),c[d+288>>2]=b+(0|c[b+312>>2]),c[d+292>>2]=b+(0|c[b+316>>2]),c[d+296>>2]=b+(0|c[b+320>>2]),c[d+300>>2]=b+(0|c[b+324>>2]),c[d+304>>2]=b+(0|c[b+328>>2]),c[d+308>>2]=b+(0|c[b+332>>2]),c[d+312>>2]=b+(0|c[b+336>>2]),c[d+316>>2]=b+(0|c[b+340>>2]),c[d+320>>2]=b+(0|c[b+344>>2]),c[d+324>>2]=b+(0|c[b+348>>2]),c[d+336>>2]=b+(0|c[b+352>>2]),c[d+340>>2]=b+(0|c[b+356>>2]),c[d+344>>2]=b+(0|c[b+360>>2]),c[d+328>>2]=b+(0|c[b+364>>2]),c[d+332>>2]=b+(0|c[b+368>>2]),c[d+428>>2]=b+(0|c[b+372>>2]),c[d+432>>2]=b+(0|c[b+376>>2]),c[d+436>>2]=b+(0|c[b+380>>2]),c[d+440>>2]=b+(0|c[b+384>>2]),c[d+444>>2]=b+(0|c[b+388>>2]),c[d+448>>2]=b+(0|c[b+392>>2]),c[d+452>>2]=b+(0|c[b+396>>2]),c[d+456>>2]=b+(0|c[b+400>>2]),c[d+460>>2]=b+(0|c[b+404>>2]),c[d+464>>2]=b+(0|c[b+408>>2]),c[d+468>>2]=b+(0|c[b+412>>2]),c[d+472>>2]=b+(0|c[b+416>>2]),c[d+476>>2]=b+(0|c[b+420>>2]),c[d+480>>2]=b+(0|c[b+424>>2]),c[d+484>>2]=b+(0|c[b+428>>2]),c[d+488>>2]=b+(0|c[b+432>>2]),c[d+492>>2]=b+(0|c[b+436>>2]),c[d+496>>2]=b+(0|c[b+440>>2]),c[d+500>>2]=b+(0|c[b+444>>2]),c[d+504>>2]=b+(0|c[b+448>>2]),c[d+508>>2]=b+(0|c[b+452>>2]),c[d+512>>2]=b+(0|c[b+456>>2]),c[d+516>>2]=b+(0|c[b+460>>2]),c[d+520>>2]=b+(0|c[b+464>>2]),(255&e)<=1||(c[d+104>>2]=b+(0|c[b+468>>2]),(255&e)<=3||(c[d+260>>2]=b+(0|c[b+472>>2]),c[d+264>>2]=b+(0|c[b+476>>2]),c[d+268>>2]=b+(0|c[b+480>>2]),c[d+88>>2]=b+(0|c[b+484>>2]),c[d+120>>2]=b+(0|c[b+488>>2]),c[d+160>>2]=b+(0|c[b+492>>2]),c[d+524>>2]=b+(0|c[b+496>>2]),c[d+528>>2]=b+(0|c[b+500>>2]),c[d+532>>2]=b+(0|c[b+504>>2]),c[d+536>>2]=b+(0|c[b+508>>2]),c[d+540>>2]=b+(0|c[b+512>>2]),c[d+544>>2]=b+(0|c[b+516>>2]),c[d+240>>2]=b+(0|c[b+520>>2]),c[d+252>>2]=b+(0|c[b+524>>2]),c[d+256>>2]=b+(0|c[b+528>>2]),c[d+348>>2]=b+(0|c[b+532>>2]),c[d+352>>2]=b+(0|c[b+536>>2]),c[d+356>>2]=b+(0|c[b+540>>2]),c[d+360>>2]=b+(0|c[b+544>>2]),c[d+364>>2]=b+(0|c[b+548>>2]),c[d+368>>2]=b+(0|c[b+552>>2]),c[d+372>>2]=b+(0|c[b+556>>2]),c[d+376>>2]=b+(0|c[b+560>>2]),c[d+380>>2]=b+(0|c[b+564>>2]),c[d+384>>2]=b+(0|c[b+568>>2]),c[d+388>>2]=b+(0|c[b+572>>2]),c[d+392>>2]=b+(0|c[b+576>>2]),c[d+396>>2]=b+(0|c[b+580>>2]),c[d+400>>2]=b+(0|c[b+584>>2]),c[d+404>>2]=b+(0|c[b+588>>2]),c[d+408>>2]=b+(0|c[b+592>>2]),c[d+412>>2]=b+(0|c[b+596>>2]),c[d+416>>2]=b+(0|c[b+600>>2]),c[d+420>>2]=b+(0|c[b+604>>2]),c[d+424>>2]=b+(0|c[b+608>>2])))}var W=[md,function(a){return 0|A(0,0|(a|=0))},function(a){return 0},md],X=[function(a,b,c){return x(1),0},function(a,b,c){return 0|B(0,0|(a|=0),0|(b|=0),0|(c|=0))},function(a,b,d){b|=0,d|=0;var e,j,k,m,n,o,f=0,g=0,h=0,p=0,l=S,i=S=S+63&-64;for(S=S+32|0,i=16+(g=i)|0,f=0|c[(j=28+(a|=0)|0)>>2],c[g>>2]=f,f=(0|c[(k=a+20|0)>>2])-f|0,c[g+4>>2]=f,c[g+8>>2]=b,e=a+60|0,f=f+(c[g+12>>(h=2)]=d)|0;;){if((0|f)==(0|(b=0|function(a){return 0|((a|=0)<<16>>16?(c[1026]=65535&a,-1):0)}(0|G(0|c[e>>2],0|g,0|h,0|i))?c[i>>2]=-1:0|c[i>>2]))){b=6;break}if((0|b)<0){b=8;break}p=0|c[g+4>>2],c[(n=(m=p>>>0<b>>>0)?g+8|0:g)>>2]=(0|c[n>>2])+(p=b-(m?p:0)|0),c[(o=n+4|0)>>2]=(0|c[o>>2])-p,g=n,h=h+(m<<31>>31)|0,f=f-b|0}return 6==(0|b)?(p=0|c[a+44>>2],c[a+16>>2]=p+(0|c[a+48>>2]),c[j>>2]=p,c[k>>2]=p):8==(0|b)&&(c[a+16>>2]=0,c[j>>2]=0,c[k>>2]=0,c[a>>2]=32|c[a>>2],d=2==(0|h)?0:d-(0|c[g+4>>2])|0),S=l,0|d},function(a,b,d){var e,f;return Zc(0|(f=0|c[(e=20+(a|=0)|0)>>2]),0|(b|=0),0|(a=(d|=0)>>>0<(a=(0|c[a+16>>2])-f|0)>>>0?d:a)),c[e>>2]=(0|c[e>>2])+a,0|d}],Y=[od,function(a,b,c,d){return 0|C(0,0|(a|=0),0|(b|=0),0|(c|=0),0|(d|=0))},function(a,b,c,d){return y(0),0},od],Z=[function(a){x(3)},function(a){D(0,0|(a|=0))}],_=[function(a,b){x(4)},function(a,b){E(0,0|(a|=0),0|(b|=0))},function(a,b){var j,e=0,g=0,h=0,i=0,k=0,l=0,m=0,n=0,e=0|c[(j=308+(a|=0)|0)>>2],g=0|c[a+316>>2],h=0|c[a+320>>2];-1==(0|(i=0|c[(k=e+((b|=0)<<5)+8|0)>>2]))?(c[g+(b<<2)>>2]=c[(0|c[a+148>>2])+(c[e+(b<<5)+16>>2]<<2)>>2],f[h+(b<<2)>>2]=1):(m=0|c[(l=e+(b<<5)+16|0)>>2],n=0|c[(0|c[a+152>>2])+(m<<2)>>2],$[3&c[e+(i<<5)+24>>2]](a,i,n,n,0|c[(0|c[a+60>>2])+(24*m|0)+16>>2]),k=0|c[k>>2],f[g+(b<<2)>>2]=+f[(0|c[a+148>>2])+(c[l>>2]<<2)>>2]*+f[g+(k<<2)>>2],c[h+(b<<2)>>2]=c[h+(k<<2)>>2]),(0|d[4+(0|c[a>>2])>>0])<4||(e=0|c[j>>2],g=0|c[a+324>>2],j=0|c[a+328>>2],h=b<<2,i=c[e+(b<<5)+16>>2]<<2,-1==(0|(e=0|c[e+(b<<5)+8>>2]))?(e=0|c[a+156>>2],c[g+(h<<2)>>2]=c[e+(i<<2)>>2],c[g+((b=1|h)<<2)>>2]=c[e+((k=1|i)<<2)>>2],c[g+((n=2|h)<<2)>>2]=c[e+((m=2|i)<<2)>>2],f[g+((e=3|h)<<2)>>2]=1,l=0|c[a+160>>2],c[j+(h<<2)>>2]=c[l+(i<<2)>>2],c[j+(b<<2)>>2]=c[l+(k<<2)>>2],c[j+(n<<2)>>2]=c[l+(m<<2)>>2]):(m=e<<2,l=(0|c[a+156>>2])+(i<<2)|0,f[(e=g+(h<<2)|0)>>2]=+f[l>>2]*+f[(n=g+(m<<2)|0)>>2],f[e+4>>2]=+f[l+4>>2]*+f[n+4>>2],f[e+8>>2]=+f[l+8>>2]*+f[n+8>>2],f[g+((e=3|h)<<2)>>2]=1,l=(0|c[a+160>>2])+(i<<2)|0,b=+f[l>>2],k=+f[(m=j+(m<<2)|0)>>2],f[(n=j+(h<<2)|0)>>2]=b+k-b*k,k=+f[l+4>>2],b=+f[m+4>>2],f[n+4>>2]=k+b-k*b,b=+f[l+8>>2],k=+f[m+8>>2],f[n+8>>2]=b+k-b*k),f[j+(e<<2)>>2]=1)},function(a,b){var n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,e=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,o=0,D=0,E=0,F=0,G=0,H=S,F=S=S+63&-64;if(S=S+48|0,u=F+8|0,s=F+40|0,r=F+32|0,q=(t=F)+24|0,F=F+16|0,e=0|c[(y=308+(a|=0)|0)>>2],w=0|c[a+316>>2],x=0|c[a+320>>2],-1==(0|(p=0|c[(B=e+((b|=0)<<5)+8|0)>>2])))G=0|c[e+(b<<5)+16>>2],c[w+(b<<2)>>2]=c[(0|c[a+268>>2])+(G<<2)>>2],c[x+(b<<2)>>2]=c[(0|c[a+272>>2])+(G<<2)>>2];else{for(v=0|c[(C=e+(b<<5)+16|0)>>2],j=0|c[(0|c[(z=a+276|0)>>2])+(v<<2)>>2],c[F>>2]=j,v=0|c[(0|c[(A=a+280|0)>>2])+(v<<2)>>2],c[(D=F+4|0)>>2]=v,E=1==(0|c[e+(p<<5)+12>>2])?-10:-.10000000149011612,c[s>>2]=j,c[(j=4+s|0)>>2]=v,$[3&c[(v=e+(p<<5)+24|0)>>2]](a,p,s,r,1),h=4+q|0,e=4+r|0,g=t+4|0,i=9,o=1;f[q>>2]=(m=0*o)+ +f[s>>2],f[h>>2]=(n=E*o)+ +f[j>>2],$[3&c[v>>2]](a,p,q,t,1),l=+f[t>>2]-+f[r>>2],f[t>>2]=l,k=+f[g>>2]-+f[e>>2],!(0!=l|0!=(f[g>>2]=k));){if(f[q>>2]=+f[s>>2]-m,f[h>>2]=+f[j>>2]-n,$[3&c[v>>2]](a,p,q,t,1),k=+f[t>>2]-+f[r>>2],f[t>>2]=k,m=+f[g>>2]-+f[e>>2],0!=k|0!=(f[g>>2]=m)){G=6;break}if(!i){G=8;break}i=i+-1|0,o*=.10000000149011612}6==(0|G)?(l=-k,k=-m):8==(0|G)&&(ia(0,2813,u),k=l=0),E=180*+rb(0,E,l,k)/3.1415927410125732,$[3&c[v>>2]](a,0|c[B>>2],F,F,1),G=0|c[C>>2],c[(0|c[z>>2])+(G<<2)>>2]=c[F>>2],c[(0|c[A>>2])+(G<<2)>>2]=c[D>>2],F=(0|c[a+284>>2])+(G<<2)|0,f[F>>2]=+f[F>>2]-E,F=0|c[B>>2],f[w+(b<<2)>>2]=+f[(0|c[a+268>>2])+(G<<2)>>2]*+f[w+(F<<2)>>2],G=(0|c[a+272>>2])+(G<<2)|0,E=+f[G>>2]*+f[x+(F<<2)>>2],f[x+(b<<2)>>2]=E,f[G>>2]=E}(0|d[4+(0|c[a>>2])>>0])<4||(e=0|c[y>>2],g=0|c[a+324>>2],j=0|c[a+328>>2],h=b<<2,i=c[e+(b<<5)+16>>2]<<2,-1==(0|(e=0|c[e+(b<<5)+8>>2]))?(e=0|c[a+296>>2],c[g+(h<<2)>>2]=c[e+(i<<2)>>2],c[g+((F=1|h)<<2)>>2]=c[e+((D=1|i)<<2)>>2],c[g+((b=2|h)<<2)>>2]=c[e+((G=2|i)<<2)>>2],f[g+((e=3|h)<<2)>>2]=1,a=0|c[a+300>>2],c[j+(h<<2)>>2]=c[a+(i<<2)>>2],c[j+(F<<2)>>2]=c[a+(D<<2)>>2],c[j+(b<<2)>>2]=c[a+(G<<2)>>2]):(F=e<<2,G=(0|c[a+296>>2])+(i<<2)|0,f[(e=g+(h<<2)|0)>>2]=+f[G>>2]*+f[(b=g+(F<<2)|0)>>2],f[e+4>>2]=+f[G+4>>2]*+f[b+4>>2],f[e+8>>2]=+f[G+8>>2]*+f[b+8>>2],f[g+((e=3|h)<<2)>>2]=1,G=(0|c[a+300>>2])+(i<<2)|0,o=+f[G>>2],E=+f[(a=j+(F<<2)|0)>>2],f[(b=j+(h<<2)|0)>>2]=o+E-o*E,E=+f[G+4>>2],o=+f[a+4>>2],f[b+4>>2]=E+o-E*o,o=+f[G+8>>2],E=+f[a+8>>2],f[b+8>>2]=o+E-o*E),f[j+(e<<2)>>2]=1),S=H}],$=[function(a,b,c,d,e){x(5)},function(a,b,c,d,e){F(0,0|(a|=0),0|(b|=0),0|(c|=0),0|(d|=0),0|(e|=0))},function(a,b,d,e,h){d|=0,e|=0;var B,F,G,H,I,J,K,L,N,O,P,Q,R,T,U,V,W,X,Y,ba,ca,da,ea,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,w=0,x=0,y=0,z=0,A=0,C=0,D=0,E=0,M=0,_=0,Z=S;if(S=S+32|0,Y=Z,b=0|c[(0|c[308+(a|=0)>>2])+((b|=0)<<5)+16>>2],i=0|c[a+60>>2],R=0|c[(0|c[a+152>>2])+(b<<2)>>2],T=0|c[i+(24*b|0)+8>>2],U=0|c[i+(24*b|0)+4>>2],V=1+T|0,(0|(h|=0))<=0)S=Z;else{W=0|T,X=0|U,Q=0==(0|c[i+(24*b|0)+12>>2]),F=R+(T<<3)|0,G=R+((N=0|v(U,V))<<3)|0,H=R+((L=N+T|0)<<3)|0,I=4+R|0,J=R+(T<<3)+4|0,K=R+(N<<3)+4|0,L=R+(L<<3)+4|0,P=T-1|0,O=U-1|0,t=u=w=x=j=k=s=r=q=p=E=D=o=n=m=l=M=A=0;do{y=(B=+f[d+(M<<3)>>2])*W,C=(z=+f[d+(M<<3)+4>>2])*X,a=!(1<=B),i=!(1<=z);do{if(i&a&!(B<0)&!(z<0)){if(a=~~y,b=(0|v(V,i=~~C))+a|0,k=y-(0|a),j=C-(0|i),!Q){f[e+(M<<3)>>2]=(y=1-j)*((z=1-k)*+f[R+(b<<3)>>2])+y*(k*+f[R+((_=b+1|0)<<3)>>2])+j*(z*+f[R+((a=b+V|0)<<3)>>2])+j*(k*+f[R+((i=a+1|0)<<3)>>2]),z=y*(z*+f[R+(b<<3)+4>>2])+y*(k*+f[R+(_<<3)+4>>2])+j*(z*+f[R+(a<<3)+4>>2]),y=j*(k*+f[R+(i<<3)+4>>2]);break}if(k+j<=1){f[e+(M<<3)>>2]=(z=1-k-j)*+f[R+(b<<3)>>2]+k*+f[R+((i=b+1|0)<<3)>>2]+j*+f[R+((_=b+V|0)<<3)>>2],z=z*+f[R+(b<<3)+4>>2]+k*+f[R+(i<<3)+4>>2],y=j*+f[R+(_<<3)+4>>2];break}f[e+(M<<3)>>2]=(C=k+-1+j)*+f[R+((a=1+(i=b+V|0)|0)<<3)>>2]+(z=1-k)*+f[R+(i<<3)>>2]+(y=1-j)*+f[R+((_=b+1|0)<<3)>>2],z=C*+f[R+(a<<3)+4>>2]+z*+f[R+(i<<3)+4>>2],y*=+f[R+(_<<3)+4>>2];break}if(A||(ea=+f[R>>2],da=+f[F>>2],ca=+f[G>>2],D=+f[H>>2],ba=+f[I>>2],t=(w=+f[J>>2])-(x=+f[K>>2]),A=1,D=.25*(ea+da+ca+D)-.5*(ea=D-ea),E=.25*(ba+w+x+(E=+f[L>>2]))-.5*(ba=E-ba),x=.5*((u=da-ca)+ea),w=.5*(t+ba),u=.5*(ea-u),t=.5*(ba-t)),!(z<3&-2<B&B<3&-2<z)){f[e+(M<<3)>>2]=z*u+(B*x+D),z*=t,y=B*w+E;break}do{if(B<=0){if(z<=0){l=D-(n=2*u),m=E-(o=2*t),n=(r=D-2*x)-n,o=(s=E-2*w)-o,p=+f[R>>2],q=+f[I>>2],k=.5*(2+B),j=.5*(z+2);break}if(i){o=(j=0|(i=(0|U)==(0|(i=~~C))?O:i))/X,k=(0|(_=i+1|0))/X,i=0|v(i,V),_=0|v(_,V),l=+f[R+(i<<3)>>2],m=+f[R+(i<<3)+4>>2],n=o*u+(r=D-2*x),o=o*t+(s=E-2*w),p=+f[R+(_<<3)>>2],q=+f[R+(_<<3)+4>>2],r=k*u+r,s=k*t+s,k=.5*(2+B),j=C-j;break}l=+f[G>>2],m=+f[K>>2],n=u+(r=D-2*x),o=t+(s=E-2*w),p=(j=3*u)+D,q=(k=3*t)+E,r=j+r,s=k+s,k=.5*(2+B),j=.5*(z+-1);break}if(b=z<=0,a){if(b){l=(m=(0|(i=(_=(0|T)==(0|(_=~~y))?P:_)+1|0))/W)*x+D-(n=2*u),m=m*w+E-(o=2*t),n=(p=(k=0|_)/W)*x+D-n,o=p*w+E-o,p=+f[R+(i<<3)>>2],q=+f[R+(i<<3)+4>>2],r=+f[R+(_<<3)>>2],s=+f[R+(_<<3)+4>>2],k=y-k,j=.5*(z+2);break}if(i){c[Y>>2]=M,g[Y+8>>3]=B,g[Y+16>>3]=z,ia(0,865,Y);break}k=0|(_=(0|T)==(0|(_=~~y))?P:_),q=(0|(i=_+1|0))/W,l=+f[R+((i=i+N|0)<<3)>>2],m=+f[R+(i<<3)+4>>2],n=+f[R+((_=_+N|0)<<3)>>2],o=+f[R+(_<<3)+4>>2],p=(r=3*u)+(q*x+D),q=(j=3*t)+(q*w+E),r+=(s=k/W)*x+D,s=j+(s*w+E),k=y-k,j=.5*(z+-1);break}if(b){l=(p=3*x+D)-(n=2*u),m=(q=3*w+E)-(o=2*t),n=x+D-n,o=w+E-o,r=+f[F>>2],s=+f[J>>2],k=.5*(B-1),j=.5*(z+2);break}if(i){m=(j=0|(i=(0|U)==(0|(i=~~C))?O:i))/X,r=(0|(_=i+1|0))/X,i=(0|v(i,V))+T|0,_=(0|v(_,V))+T|0,l=m*u+(p=3*x+D),m=m*t+(q=3*w+E),n=+f[R+(i<<3)>>2],o=+f[R+(i<<3)+4>>2],p=r*u+p,q=r*t+q,r=+f[R+(_<<3)>>2],s=+f[R+(_<<3)+4>>2],k=.5*(B-1),j=C-j;break}l=u+(p=3*x+D),m=t+(q=3*w+E),n=+f[H>>2],o=+f[L>>2],p=(r=3*u)+p,q=(s=3*t)+q,r+=x+D,s+=w+E,k=.5*(B-1),j=.5*(z+-1);break}while(0);if(k+j<=1){f[e+(M<<3)>>2]=n+(l-n)*k+(r-n)*j,z=o+(m-o)*k,y=(s-o)*j;break}f[e+(M<<3)>>2]=p+(r-p)*(z=1-k)+(l-p)*(y=1-j),z=q+(s-q)*z,y*=m-q;break}while(0)}while(f[e+(M<<3)+4>>2]=z+y,(0|(M=M+1|0))!=(0|h));S=Z}},function(a,b,d,e,g){d|=0,e|=0,g|=0;var i,k,n,o,h,j,l,m;if(b=0|c[(0|c[(a|=0)+308>>2])+((b|=0)<<5)+16>>2],j=3.1415927410125732*(+f[(0|c[a+168>>2])+(12*b|0)+4>>2]+ +f[(0|c[a+284>>2])+(b<<2)>>2])/180,h=+t(j),j=+s(j),k=(j*=i=+f[(0|c[a+272>>2])+(b<<2)>>2])*(l=0==(0|c[(0|c[a+288>>2])+(b<<2)>>2])?1:-1),i=(h*=i)*(m=0==(0|c[(0|c[a+292>>2])+(b<<2)>>2])?1:-1),l*=h,m*=j,j=+f[(0|c[a+276>>2])+(b<<2)>>2],h=+f[(0|c[a+280>>2])+(b<<2)>>2],!((0|g)<=0))for(b=0;o=+f[d+(b<<3)>>2],n=+f[d+(b<<3)+4>>2],f[e+(b<<3)>>2]=k*o-i*n+j,f[e+(b<<3)+4>>2]=l*o+m*n+h,(0|(b=b+1|0))!=(0|g););}];return{___errno_location:function(){return 4104},___muldi3:Qc,___udivdi3:Vc,_bitshift64Lshr:Wc,_bitshift64Shl:Xc,_csmFree:function(a){Kc(a|=0)},_csmGetDrawableConstantFlags:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[888+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2312,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableCount:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+332>>2],S=d,0|b):(c[b>>2]=2274,c[b+4>>2]=1827,ia(0,1664,b),S=d,-1)},_csmGetDrawableDrawOrders:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+440>>2],S=d,0|b):(c[b>>2]=2396,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableDynamicFlags:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+432>>2],S=d,0|b):(c[b>>2]=2340,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableIds:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[832+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2294,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableIndexCounts:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[904+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2598,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableIndices:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[840+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2624,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableMaskCounts:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[912+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2472,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableMasks:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[844+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2497,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableMultiplyColors:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+452>>2],S=d,0|b):(c[b>>2]=2646,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableOpacities:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+448>>2],S=d,0|b):(c[b>>2]=2448,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableParentPartIndices:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[876+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2702,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableRenderOrders:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+436>>2],S=d,0|b):(c[b>>2]=2421,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableScreenColors:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+456>>2],S=d,0|b):(c[b>>2]=2675,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableTextureIndices:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[884+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2367,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableVertexCounts:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[892+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2517,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableVertexPositions:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+444>>2],S=d,0|b):(c[b>>2]=2544,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetDrawableVertexUvs:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[836+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2574,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetLatestMocVersion:function(){return 4},_csmGetMocVersion:function(a,b){b|=0;var d=S;return b=S=S+63&-64,S=S+16|0,(a|=0)?(a=0|ta(a),S=d,0|a):(c[b>>2]=1681,c[b+4>>2]=1698,ia(0,1664,b),S=d,(a=0)|a)},_csmGetParameterCount:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+540>>2],S=d,0|b):(c[b>>2]=2026,c[b+4>>2]=1827,ia(0,1664,b),S=d,-1)},_csmGetParameterDefaultValues:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[932+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2145,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetParameterIds:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[916+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2047,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetParameterKeyCounts:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+616>>2],S=d,0|b):(c[b>>2]=2763,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetParameterKeyValues:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+612>>2],S=d,0|b):(c[b>>2]=2788,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetParameterMaximumValues:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[924+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2116,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetParameterMinimumValues:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[928+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2087,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetParameterTypes:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+548>>2],S=d,0|b):(c[b>>2]=2066,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetParameterValues:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+552>>2],S=d,0|b):(c[b>>2]=2174,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetPartCount:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+4>>2],S=d,0|b):(c[b>>2]=2196,c[b+4>>2]=1827,ia(0,1664,b),S=d,-1)},_csmGetPartIds:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[712+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2212,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetPartOpacities:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[a+52>>2],S=d,0|b):(c[b>>2]=2226,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetPartParentPartIndices:function(a){var b=0,d=S,b=S=S+63&-64;return S=S+16|0,(a|=0)?(b=0|c[740+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2246,c[b+4>>2]=1827,ia(0,1664,b),S=d,(b=0)|b)},_csmGetSizeofModel:Ka,_csmGetVersion:function(){return 67239940},_csmHasMocConsistency:function(a,b){b|=0;var e,d=0,f=0,g=S,d=S=S+63&-64;return S=S+32|0,f=d+16|0,e=d+8|0,(a|=0)?((d=a)+63&-64|0)!=(0|d)?(c[e>>2]=1717,c[4+e>>2]=1738,ia(0,1664,e),S=g,(f=0)|f):0|b&&(b+63&-64|0)==(0|b)?(f=0|qa(a,b),S=g,0|f):(c[f>>2]=1717,c[f+4>>2]=1770,ia(0,1664,f),S=g,(f=0)|f):(c[d>>2]=1717,c[d+4>>2]=1698,ia(0,1664,d),S=g,(f=0)|f)},_csmInitializeAmountOfMemory:function(a){var b=S,d=S=S+63&-64;S=S+16|0,Nc(d,64,a|=0),Kc(0|c[d>>2]),S=b},_csmInitializeModelInPlace:La,_csmMalloc:function(a){return 0|Jc(a|=0)},_csmMallocMoc:function(a){var d=S,b=S=S+63&-64;return S=S+16|0,Nc(b,64,a|=0),S=d,0|c[b>>2]},_csmMallocModelAndInitialize:function(a){var b=0,e=0,f=S,b=S=S+63&-64;return S=S+16|0,0!=(0|(a|=0))&&0==(0|Nc(b,16,e=0|Ka(a)))?(b=0|La(a,a=0|c[b>>2],e))||(Kc(a),b=0):b=0,S=f,0|b},_csmReadCanvasInfo:function(a,b,d,e){b|=0,d|=0,e|=0;var g,h,i=0,j=S,f=S=S+63&-64;if(S=S+32|0,g=24+f|0,i=16+f|0,h=8+f|0,a|=0)return b?d?e?(i=0|c[708+(0|c[a>>2])>>2],c[b>>2]=c[i+12>>2],c[b+4>>2]=c[i+16>>2],c[d>>2]=c[i+4>>2],c[d+4>>2]=c[i+8>>2],c[e>>2]=c[i>>2]):(c[g>>2]=1809,c[4+g>>2]=1903,ia(0,1664,g)):(c[i>>2]=1809,c[i+4>>2]=1874,ia(0,1664,i)):(c[h>>2]=1809,c[4+h>>2]=1847,ia(0,1664,h)),void(S=j);c[f>>2]=1809,c[4+f>>2]=1827,ia(0,1664,f),S=j},_csmResetDrawableDynamicFlags:function(a){var d=S,b=S=S+63&-64;S=S+16|0,(a|=0)?c[a+428>>2]=1:(c[b>>2]=2734,c[4+b>>2]=1827,ia(0,1664,b)),S=d},_csmReviveMocInPlace:function(a,b){b|=0;var e,d=0,f=0,g=S,d=S=S+63&-64;return S=S+32|0,f=d+16|0,e=d+8|0,(a|=0)?((d=a)+63&-64|0)!=(0|d)?(c[e>>2]=1789,c[4+e>>2]=1738,ia(0,1664,e),S=g,(f=0)|f):0|b&&(b+63&-64|0)==(0|b)?(f=0|sa(a),S=g,0|f):(c[f>>2]=1789,c[f+4>>2]=1770,ia(0,1664,f),S=g,(f=0)|f):(c[d>>2]=1789,c[d+4>>2]=1698,ia(0,1664,d),S=g,(f=0)|f)},_csmSetLogFunction:function(a){c[1008]=a|=0},_csmUpdateModel:function(a){var d=S,b=S=S+63&-64;S=S+16|0,(a|=0)?Jb(a):(c[b>>2]=2011,c[4+b>>2]=1827,ia(0,1664,b)),S=d},_emscripten_get_sbrk_ptr:function(){return 4624},_emscripten_replace_memory:function(newBuffer){return a=new Int8Array(newBuffer),d=new Uint8Array(newBuffer),b=new Int16Array(newBuffer),e=new Uint16Array(newBuffer),c=new Int32Array(newBuffer),f=new Float32Array(newBuffer),g=new Float64Array(newBuffer),!0},_free:Kc,_i64Add:Rc,_i64Subtract:Sc,_malloc:Jc,_memcpy:Zc,_memmove:_c,_memset:$c,dynCall_ii:function(a,b){return 0|W[3&(a|=0)](0|(b|=0))},dynCall_iiii:function(a,b,c,d){return 0|X[3&(a|=0)](0|(b|=0),0|(c|=0),0|(d|=0))},dynCall_iiiii:function(a,b,c,d,e){return 0|Y[3&(a|=0)](0|(b|=0),0|(c|=0),0|(d|=0),0|(e|=0))},dynCall_vi:function(a,b){Z[1&(a|=0)](0|(b|=0))},dynCall_vii:function(a,b,c){_[3&(a|=0)](0|(b|=0),0|(c|=0))},dynCall_viiiii:function(a,b,c,d,e,f){$[3&(a|=0)](0|(b|=0),0|(c|=0),0|(d|=0),0|(e|=0),0|(f|=0))},establishStackSpace:function(a,b){S=a|=0},stackAlloc:function(a){var b=S;return S=15+(S+(a|=0)|0)&-16,0|b},stackRestore:function(a){S=0|a},stackSave:function(){return 0|S}}}({Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Float32Array:Float32Array,Float64Array:Float64Array},{a:C,b:function(a){J=a},c:function(){return J},d:function(a,c){return I[a](c)},e:function(a,c,d,f){return I[a](c,d,f)},f:function(a,c,d,f,g){return I[a](c,d,f,g)},g:function(a,c){I[a](c)},h:function(a,c,d){I[a](c,d)},i:function(a,c,d,f,g,h){I[a](c,d,f,g,h)},j:function(){return pa.apply(null,arguments)},k:qa,l:function(a,c,d){M.set(M.subarray(c,c+d),a)},m:function(a){if(2130706432<a)return!1;for(var c=Math.max(qa(),16777216);c<a;)c=c<=536870912?ea(2*c):Math.min(ea((3*c+2147483648)/4),2130706432);return!!ra(c)},n:pa,o:function(){C("OOM")},p:function(a){return a},q:na,r:ra,s:function(){var a=b._fflush;a&&a(0),V[1].length&&W(1,10),V[2].length&&W(2,10)},t:oa,u:function(){var a=oa();return b.extraStackTrace&&(a+="\\n"+b.extraStackTrace()),na(a)},v:4816},buffer),sa=(b.___errno_location=q.___errno_location,b.___muldi3=q.___muldi3,b.___udivdi3=q.___udivdi3,b._bitshift64Lshr=q._bitshift64Lshr,b._bitshift64Shl=q._bitshift64Shl,b._csmFree=q._csmFree,b._csmGetDrawableConstantFlags=q._csmGetDrawableConstantFlags,b._csmGetDrawableCount=q._csmGetDrawableCount,b._csmGetDrawableDrawOrders=q._csmGetDrawableDrawOrders,b._csmGetDrawableDynamicFlags=q._csmGetDrawableDynamicFlags,b._csmGetDrawableIds=q._csmGetDrawableIds,b._csmGetDrawableIndexCounts=q._csmGetDrawableIndexCounts,b._csmGetDrawableIndices=q._csmGetDrawableIndices,b._csmGetDrawableMaskCounts=q._csmGetDrawableMaskCounts,b._csmGetDrawableMasks=q._csmGetDrawableMasks,b._csmGetDrawableMultiplyColors=q._csmGetDrawableMultiplyColors,b._csmGetDrawableOpacities=q._csmGetDrawableOpacities,b._csmGetDrawableParentPartIndices=q._csmGetDrawableParentPartIndices,b._csmGetDrawableRenderOrders=q._csmGetDrawableRenderOrders,b._csmGetDrawableScreenColors=q._csmGetDrawableScreenColors,b._csmGetDrawableTextureIndices=q._csmGetDrawableTextureIndices,b._csmGetDrawableVertexCounts=q._csmGetDrawableVertexCounts,b._csmGetDrawableVertexPositions=q._csmGetDrawableVertexPositions,b._csmGetDrawableVertexUvs=q._csmGetDrawableVertexUvs,b._csmGetLatestMocVersion=q._csmGetLatestMocVersion,b._csmGetMocVersion=q._csmGetMocVersion,b._csmGetParameterCount=q._csmGetParameterCount,b._csmGetParameterDefaultValues=q._csmGetParameterDefaultValues,b._csmGetParameterIds=q._csmGetParameterIds,b._csmGetParameterKeyCounts=q._csmGetParameterKeyCounts,b._csmGetParameterKeyValues=q._csmGetParameterKeyValues,b._csmGetParameterMaximumValues=q._csmGetParameterMaximumValues,b._csmGetParameterMinimumValues=q._csmGetParameterMinimumValues,b._csmGetParameterTypes=q._csmGetParameterTypes,b._csmGetParameterValues=q._csmGetParameterValues,b._csmGetPartCount=q._csmGetPartCount,b._csmGetPartIds=q._csmGetPartIds,b._csmGetPartOpacities=q._csmGetPartOpacities,b._csmGetPartParentPartIndices=q._csmGetPartParentPartIndices,b._csmGetSizeofModel=q._csmGetSizeofModel,b._csmGetVersion=q._csmGetVersion,b._csmHasMocConsistency=q._csmHasMocConsistency,b._csmInitializeAmountOfMemory=q._csmInitializeAmountOfMemory,b._csmInitializeModelInPlace=q._csmInitializeModelInPlace,b._csmMalloc=q._csmMalloc,b._csmMallocMoc=q._csmMallocMoc,b._csmMallocModelAndInitialize=q._csmMallocModelAndInitialize,b._csmReadCanvasInfo=q._csmReadCanvasInfo,b._csmResetDrawableDynamicFlags=q._csmResetDrawableDynamicFlags,b._csmReviveMocInPlace=q._csmReviveMocInPlace,b._csmSetLogFunction=q._csmSetLogFunction,b._csmUpdateModel=q._csmUpdateModel,b._emscripten_get_sbrk_ptr=q._emscripten_get_sbrk_ptr,b._emscripten_replace_memory=q._emscripten_replace_memory),xa=(b._free=q._free,b._i64Add=q._i64Add,b._i64Subtract=q._i64Subtract,b._malloc=q._malloc,b._memcpy=q._memcpy,b._memmove=q._memmove,b._memset=q._memset,b.establishStackSpace=q.establishStackSpace,b.stackAlloc=q.stackAlloc),ya=b.stackRestore=q.stackRestore,za=b.stackSave=q.stackSave;function Z(){function a(){if(!Y&&(Y=!0,!K)){if(P(ja),P(ka),b.onRuntimeInitialized&&b.onRuntimeInitialized(),b.postRun)for("function"==typeof b.postRun&&(b.postRun=[b.postRun]);b.postRun.length;){var a=b.postRun.shift();la.unshift(a)}P(la)}}if(!(0<Q)){if(b.preRun)for("function"==typeof b.preRun&&(b.preRun=[b.preRun]);b.preRun.length;)!function(){var a=b.preRun.shift();ia.unshift(a)}();P(ia),0<Q||(b.setStatus?(b.setStatus("Running..."),setTimeout(function(){setTimeout(function(){b.setStatus("")},1),a()},1)):a())}}if(b.dynCall_ii=q.dynCall_ii,b.dynCall_iiii=q.dynCall_iiii,b.dynCall_iiiii=q.dynCall_iiiii,b.dynCall_vi=q.dynCall_vi,b.dynCall_vii=q.dynCall_vii,b.dynCall_viiiii=q.dynCall_viiiii,b.asm=q,b.ccall=function(a,c,d,f){var g={string:function(a){var c=0;if(null!=a&&0!==a){var d=1+(a.length<<2),f=c=xa(d),g=M;if(0<d){for(var d=f+d-1,h=0;h<a.length;++h){var l=a.charCodeAt(h);if((l=55296<=l&&l<=57343?65536+((1023&l)<<10)|1023&a.charCodeAt(++h):l)<=127){if(d<=f)break;g[f++]=l}else{if(l<=2047){if(d<=f+1)break;g[f++]=192|l>>6}else{if(l<=65535){if(d<=f+2)break;g[f++]=224|l>>12}else{if(d<=f+3)break;g[f++]=240|l>>18,g[f++]=128|l>>12&63}g[f++]=128|l>>6&63}g[f++]=128|63&l}}g[f]=0}}return c},array:function(a){var c=xa(a.length);return N.set(a,c),c}},h=function(a){var c=b["_"+a];return assert(c,"Cannot call unknown function "+a+", make sure it is exported"),c}(a),p=[];if(a=0,f)for(var k=0;k<f.length;k++){var y=g[d[k]];y?(0===a&&(a=za()),p[k]=y(f[k])):p[k]=f[k]}return d=function(a){return"string"===c?da(a):"boolean"===c?!!a:a}(d=h.apply(null,p)),0!==a&&ya(a),d},b.UTF8ToString=da,b.addFunction=function(a){for(var c=0;c<1;c++)if(!I[c])return I[c]=a,1+c;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},E&&((String.prototype.startsWith?E.startsWith(U):0===E.indexOf(U))||(n=E,E=b.locateFile?b.locateFile(n,u):u+n),r||t?(q=x(E),M.set(q,8)):(Q++,b.monitorRunDependencies&&b.monitorRunDependencies(Q),F=function(a){a.byteLength&&(a=new Uint8Array(a)),M.set(a,8),b.memoryInitializerRequest&&delete b.memoryInitializerRequest.response,Q--,b.monitorRunDependencies&&b.monitorRunDependencies(Q),0==Q&&(null!==S&&(clearInterval(S),S=null),T&&(a=T,T=null,a()))},Ca=function(){w(function(){throw"could not load memory initializer "+E})},(u=B(E))?F(u.buffer):b.memoryInitializerRequest?(n=function(){var a=b.memoryInitializerRequest,c=a.response;if(200!==a.status&&0!==a.status){if(!(c=B(b.memoryInitializerRequestURL)))return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+a.status+", retrying "+E),void Ca();c=c.buffer}F(c)},b.memoryInitializerRequest.response?setTimeout(n,0):b.memoryInitializerRequest.addEventListener("load",n)):Ca())),b.then=function(a){var c;return Y?a(b):(c=b.onRuntimeInitialized,b.onRuntimeInitialized=function(){c&&c(),a(b)}),b},T=function Fa(){Y||Z(),Y||(T=Fa)},b.run=Z,b.preInit)for("function"==typeof b.preInit&&(b.preInit=[b.preInit]);0<b.preInit.length;)b.preInit.pop()();return Z(),_em_module}),_em=("object"==typeof exports&&"object"==typeof module?module.exports=_em_module:"function"==typeof define&&define.amd?define([],function(){return _em_module}):"object"==typeof exports&&(exports._em_module=_em_module),_em_module())}(Live2DCubismCore=Live2DCubismCore||{});\n;WL2D_CORE_LOADED();',[2]}))}))()})();